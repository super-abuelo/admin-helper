function xw(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Nw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cd={exports:{}},Pa={},hd={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function kw(){if(ag)return Re;ag=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,U={};function b(L,Q,pe){this.props=L,this.context=Q,this.refs=U,this.updater=pe||j}b.prototype.isReactComponent={},b.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function B(){}B.prototype=b.prototype;function H(L,Q,pe){this.props=L,this.context=Q,this.refs=U,this.updater=pe||j}var te=H.prototype=new B;te.constructor=H,q(te,b.prototype),te.isPureReactComponent=!0;var ie=Array.isArray,fe=Object.prototype.hasOwnProperty,_e={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,pe){var Ce,Ae={},De=null,Le=null;if(Q!=null)for(Ce in Q.ref!==void 0&&(Le=Q.ref),Q.key!==void 0&&(De=""+Q.key),Q)fe.call(Q,Ce)&&!k.hasOwnProperty(Ce)&&(Ae[Ce]=Q[Ce]);var Me=arguments.length-2;if(Me===1)Ae.children=pe;else if(1<Me){for(var $e=Array(Me),yt=0;yt<Me;yt++)$e[yt]=arguments[yt+2];Ae.children=$e}if(L&&L.defaultProps)for(Ce in Me=L.defaultProps,Me)Ae[Ce]===void 0&&(Ae[Ce]=Me[Ce]);return{$$typeof:r,type:L,key:De,ref:Le,props:Ae,_owner:_e.current}}function P(L,Q){return{$$typeof:r,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function x(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function D(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(pe){return Q[pe]})}var V=/\/+/g;function R(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):Q.toString(36)}function He(L,Q,pe,Ce,Ae){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var Le=!1;if(L===null)Le=!0;else switch(De){case"string":case"number":Le=!0;break;case"object":switch(L.$$typeof){case r:case e:Le=!0}}if(Le)return Le=L,Ae=Ae(Le),L=Ce===""?"."+R(Le,0):Ce,ie(Ae)?(pe="",L!=null&&(pe=L.replace(V,"$&/")+"/"),He(Ae,Q,pe,"",function(yt){return yt})):Ae!=null&&(x(Ae)&&(Ae=P(Ae,pe+(!Ae.key||Le&&Le.key===Ae.key?"":(""+Ae.key).replace(V,"$&/")+"/")+L)),Q.push(Ae)),1;if(Le=0,Ce=Ce===""?".":Ce+":",ie(L))for(var Me=0;Me<L.length;Me++){De=L[Me];var $e=Ce+R(De,Me);Le+=He(De,Q,pe,$e,Ae)}else if($e=A(L),typeof $e=="function")for(L=$e.call(L),Me=0;!(De=L.next()).done;)De=De.value,$e=Ce+R(De,Me++),Le+=He(De,Q,pe,$e,Ae);else if(De==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Le}function kt(L,Q,pe){if(L==null)return L;var Ce=[],Ae=0;return He(L,Ce,"","",function(De){return Q.call(pe,De,Ae++)}),Ce}function Dt(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(pe){(L._status===0||L._status===-1)&&(L._status=1,L._result=pe)},function(pe){(L._status===0||L._status===-1)&&(L._status=2,L._result=pe)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var Be={current:null},re={transition:null},ge={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:re,ReactCurrentOwner:_e};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:kt,forEach:function(L,Q,pe){kt(L,function(){Q.apply(this,arguments)},pe)},count:function(L){var Q=0;return kt(L,function(){Q++}),Q},toArray:function(L){return kt(L,function(Q){return Q})||[]},only:function(L){if(!x(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Re.Component=b,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=H,Re.StrictMode=s,Re.Suspense=p,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Re.act=ae,Re.cloneElement=function(L,Q,pe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ce=q({},L.props),Ae=L.key,De=L.ref,Le=L._owner;if(Q!=null){if(Q.ref!==void 0&&(De=Q.ref,Le=_e.current),Q.key!==void 0&&(Ae=""+Q.key),L.type&&L.type.defaultProps)var Me=L.type.defaultProps;for($e in Q)fe.call(Q,$e)&&!k.hasOwnProperty($e)&&(Ce[$e]=Q[$e]===void 0&&Me!==void 0?Me[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Ce.children=pe;else if(1<$e){Me=Array($e);for(var yt=0;yt<$e;yt++)Me[yt]=arguments[yt+2];Ce.children=Me}return{$$typeof:r,type:L.type,key:Ae,ref:De,props:Ce,_owner:Le}},Re.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Re.createElement=S,Re.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},Re.createRef=function(){return{current:null}},Re.forwardRef=function(L){return{$$typeof:f,render:L}},Re.isValidElement=x,Re.lazy=function(L){return{$$typeof:w,_payload:{_status:-1,_result:L},_init:Dt}},Re.memo=function(L,Q){return{$$typeof:y,type:L,compare:Q===void 0?null:Q}},Re.startTransition=function(L){var Q=re.transition;re.transition={};try{L()}finally{re.transition=Q}},Re.unstable_act=ae,Re.useCallback=function(L,Q){return Be.current.useCallback(L,Q)},Re.useContext=function(L){return Be.current.useContext(L)},Re.useDebugValue=function(){},Re.useDeferredValue=function(L){return Be.current.useDeferredValue(L)},Re.useEffect=function(L,Q){return Be.current.useEffect(L,Q)},Re.useId=function(){return Be.current.useId()},Re.useImperativeHandle=function(L,Q,pe){return Be.current.useImperativeHandle(L,Q,pe)},Re.useInsertionEffect=function(L,Q){return Be.current.useInsertionEffect(L,Q)},Re.useLayoutEffect=function(L,Q){return Be.current.useLayoutEffect(L,Q)},Re.useMemo=function(L,Q){return Be.current.useMemo(L,Q)},Re.useReducer=function(L,Q,pe){return Be.current.useReducer(L,Q,pe)},Re.useRef=function(L){return Be.current.useRef(L)},Re.useState=function(L){return Be.current.useState(L)},Re.useSyncExternalStore=function(L,Q,pe){return Be.current.useSyncExternalStore(L,Q,pe)},Re.useTransition=function(){return Be.current.useTransition()},Re.version="18.3.1",Re}var lg;function rf(){return lg||(lg=1,hd.exports=kw()),hd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function Dw(){if(ug)return Pa;ug=1;var r=rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var w,I={},A=null,j=null;y!==void 0&&(A=""+y),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(j=p.ref);for(w in p)s.call(p,w)&&!l.hasOwnProperty(w)&&(I[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)I[w]===void 0&&(I[w]=p[w]);return{$$typeof:e,type:f,key:A,ref:j,props:I,_owner:o.current}}return Pa.Fragment=t,Pa.jsx=c,Pa.jsxs=c,Pa}var cg;function Ow(){return cg||(cg=1,cd.exports=Dw()),cd.exports}var v=Ow(),Pu={},dd={exports:{}},Zt={},fd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function bw(){return hg||(hg=1,function(r){function e(re,ge){var ae=re.length;re.push(ge);e:for(;0<ae;){var L=ae-1>>>1,Q=re[L];if(0<o(Q,ge))re[L]=ge,re[ae]=Q,ae=L;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var ge=re[0],ae=re.pop();if(ae!==ge){re[0]=ae;e:for(var L=0,Q=re.length,pe=Q>>>1;L<pe;){var Ce=2*(L+1)-1,Ae=re[Ce],De=Ce+1,Le=re[De];if(0>o(Ae,ae))De<Q&&0>o(Le,Ae)?(re[L]=Le,re[De]=ae,L=De):(re[L]=Ae,re[Ce]=ae,L=Ce);else if(De<Q&&0>o(Le,ae))re[L]=Le,re[De]=ae,L=De;else break e}}return ge}function o(re,ge){var ae=re.sortIndex-ge.sortIndex;return ae!==0?ae:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var p=[],y=[],w=1,I=null,A=3,j=!1,q=!1,U=!1,b=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(re){for(var ge=t(y);ge!==null;){if(ge.callback===null)s(y);else if(ge.startTime<=re)s(y),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(y)}}function ie(re){if(U=!1,te(re),!q)if(t(p)!==null)q=!0,Dt(fe);else{var ge=t(y);ge!==null&&Be(ie,ge.startTime-re)}}function fe(re,ge){q=!1,U&&(U=!1,B(S),S=-1),j=!0;var ae=A;try{for(te(ge),I=t(p);I!==null&&(!(I.expirationTime>ge)||re&&!D());){var L=I.callback;if(typeof L=="function"){I.callback=null,A=I.priorityLevel;var Q=L(I.expirationTime<=ge);ge=r.unstable_now(),typeof Q=="function"?I.callback=Q:I===t(p)&&s(p),te(ge)}else s(p);I=t(p)}if(I!==null)var pe=!0;else{var Ce=t(y);Ce!==null&&Be(ie,Ce.startTime-ge),pe=!1}return pe}finally{I=null,A=ae,j=!1}}var _e=!1,k=null,S=-1,P=5,x=-1;function D(){return!(r.unstable_now()-x<P)}function V(){if(k!==null){var re=r.unstable_now();x=re;var ge=!0;try{ge=k(!0,re)}finally{ge?R():(_e=!1,k=null)}}else _e=!1}var R;if(typeof H=="function")R=function(){H(V)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,kt=He.port2;He.port1.onmessage=V,R=function(){kt.postMessage(null)}}else R=function(){b(V,0)};function Dt(re){k=re,_e||(_e=!0,R())}function Be(re,ge){S=b(function(){re(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){q||j||(q=!0,Dt(fe))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(re){switch(A){case 1:case 2:case 3:var ge=3;break;default:ge=A}var ae=A;A=ge;try{return re()}finally{A=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=A;A=re;try{return ge()}finally{A=ae}},r.unstable_scheduleCallback=function(re,ge,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,re={id:w++,callback:ge,priorityLevel:re,startTime:ae,expirationTime:Q,sortIndex:-1},ae>L?(re.sortIndex=ae,e(y,re),t(p)===null&&re===t(y)&&(U?(B(S),S=-1):U=!0,Be(ie,ae-L))):(re.sortIndex=Q,e(p,re),q||j||(q=!0,Dt(fe))),re},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(re){var ge=A;return function(){var ae=A;A=ge;try{return re.apply(this,arguments)}finally{A=ae}}}}(pd)),pd}var dg;function jw(){return dg||(dg=1,fd.exports=bw()),fd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function Vw(){if(fg)return Zt;fg=1;var r=rf(),e=jw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function A(n){return p.call(I,n)?!0:p.call(w,n)?!1:y.test(n)?I[n]=!0:(w[n]=!0,!1)}function j(n,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,h){if(i===null||typeof i>"u"||j(n,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(n,i,a,h,d,g,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=E}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new U(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new U(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new U(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new U(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new U(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new U(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new U(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new U(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new U(n,5,!1,n.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function H(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(B,H);b[i]=new U(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(B,H);b[i]=new U(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(B,H);b[i]=new U(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new U(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new U(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,i,a,h){var d=b.hasOwnProperty(i)?b[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,h)&&(a=null),h||d===null?A(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?n.setAttributeNS(h,i,a):n.setAttribute(i,a))))}var ie=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),_e=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),re=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function Q(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var pe=!1;function Ce(n,i){if(!n||pe)return"";pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var h=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){h=$}n.call(i.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=h.stack.split(`
`),E=d.length-1,C=g.length-1;1<=E&&0<=C&&d[E]!==g[C];)C--;for(;1<=E&&0<=C;E--,C--)if(d[E]!==g[C]){if(E!==1||C!==1)do if(E--,C--,0>C||d[E]!==g[C]){var N=`
`+d[E].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=E&&0<=C);break}}}finally{pe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ae(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case _e:return"Portal";case P:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case He:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case V:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case kt:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Dt:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function Le(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Me(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(n){var i=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ir(n){n._valueTracker||(n._valueTracker=yt(n))}function ps(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return n&&(h=$e(n)?n.checked?"true":"false":n.value),n=h,n!==a?(i.setValue(n),!0):!1}function Or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ai(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ms(n,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Me(i.value!=null?i.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function bo(n,i){i=i.checked,i!=null&&te(n,"checked",i,!1)}function jo(n,i){bo(n,i);var a=Me(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?gs(n,i.type,a):i.hasOwnProperty("defaultValue")&&gs(n,i.type,Me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function fl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gs(n,i,a){(i!=="number"||Or(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var sr=Array.isArray;function or(n,i,a,h){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Me(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,h&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Vo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ys(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(sr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Me(a)}}function vs(n,i){var a=Me(i.value),h=Me(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function Lo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ct(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ar,Mo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,h,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ar.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function br(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pi=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(n){Pi.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ri[i]=Ri[n]})});function Fo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ri.hasOwnProperty(n)&&Ri[n]?(""+i).trim():i+"px"}function Uo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Fo(a,i[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,d):n[a]=d}}var Bo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zo(n,i){if(i){if(Bo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function $o(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function _s(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Es=null,dn=null,Un=null;function ws(n){if(n=fa(n)){if(typeof Es!="function")throw Error(t(280));var i=n.stateNode;i&&(i=$l(i),Es(n.stateNode,n.type,i))}}function Bn(n){dn?Un?Un.push(n):Un=[n]:dn=n}function qo(){if(dn){var n=dn,i=Un;if(Un=dn=null,ws(n),i)for(n=0;n<i.length;n++)ws(i[n])}}function Ni(n,i){return n(i)}function Wo(){}var lr=!1;function Ho(n,i,a){if(lr)return n(i,a);lr=!0;try{return Ni(n,i,a)}finally{lr=!1,(dn!==null||Un!==null)&&(Wo(),qo())}}function rt(n,i){var a=n.stateNode;if(a===null)return null;var h=$l(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ts=!1;if(f)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Ts=!1}function ki(n,i,a,h,d,g,E,C,N){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(X){this.onError(X)}}var Di=!1,Is=null,In=!1,Go=null,Mc={onError:function(n){Di=!0,Is=n}};function Ss(n,i,a,h,d,g,E,C,N){Di=!1,Is=null,ki.apply(Mc,arguments)}function pl(n,i,a,h,d,g,E,C,N){if(Ss.apply(this,arguments),Di){if(Di){var $=Is;Di=!1,Is=null}else throw Error(t(198));In||(In=!0,Go=$)}}function Sn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Oi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Cn(n){if(Sn(n)!==n)throw Error(t(188))}function ml(n){var i=n.alternate;if(!i){if(i=Sn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,h=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Cn(d),n;if(g===h)return Cn(d),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=g;else{for(var E=!1,C=d.child;C;){if(C===a){E=!0,a=d,h=g;break}if(C===h){E=!0,h=d,a=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===a){E=!0,a=g,h=d;break}if(C===h){E=!0,h=g,a=d;break}C=C.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ko(n){return n=ml(n),n!==null?Cs(n):null}function Cs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Cs(n);if(i!==null)return i;n=n.sibling}return null}var As=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,gl=e.unstable_shouldYield,Fc=e.unstable_requestPaint,qe=e.unstable_now,yl=e.unstable_getCurrentPriorityLevel,bi=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,fn=e.unstable_NormalPriority,Yo=e.unstable_LowPriority,vl=e.unstable_IdlePriority,ji=null,rn=null;function _l(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(ji,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:wl,Xo=Math.log,El=Math.LN2;function wl(n){return n>>>=0,n===0?32:31-(Xo(n)/El|0)|0}var Rs=64,Ps=4194304;function Vr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Vi(n,i){var a=n.pendingLanes;if(a===0)return 0;var h=0,d=n.suspendedLanes,g=n.pingedLanes,E=a&268435455;if(E!==0){var C=E&~d;C!==0?h=Vr(C):(g&=E,g!==0&&(h=Vr(g)))}else E=a&~d,E!==0?h=Vr(E):g!==0&&(h=Vr(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)a=31-Bt(i),d=1<<a,h|=n[a],i&=~d;return h}function Uc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(n,i){for(var a=n.suspendedLanes,h=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var E=31-Bt(g),C=1<<E,N=d[E];N===-1?((C&a)===0||(C&h)!==0)&&(d[E]=Uc(C,i)):N<=i&&(n.expiredLanes|=C),g&=~C}}function sn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Li(){var n=Rs;return Rs<<=1,(Rs&4194240)===0&&(Rs=64),n}function Lr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Mr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Bt(i),n[i]=a}function ze(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Bt(a),g=1<<d;i[d]=0,h[d]=-1,n[d]=-1,a&=~g}}function Fr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var h=31-Bt(a),d=1<<h;d&i|n[h]&i&&(n[h]|=i),a&=~d}}var Ne=0;function Ur(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Tl,xs,Il,Sl,Cl,Jo=!1,zn=[],St=null,An=null,Rn=null,Br=new Map,pn=new Map,$n=[],Bc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(n,i){switch(n){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Br.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pn.delete(i.pointerId)}}function Ht(n,i,a,h,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[d]},i!==null&&(i=fa(i),i!==null&&xs(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function zc(n,i,a,h,d){switch(i){case"focusin":return St=Ht(St,n,i,a,h,d),!0;case"dragenter":return An=Ht(An,n,i,a,h,d),!0;case"mouseover":return Rn=Ht(Rn,n,i,a,h,d),!0;case"pointerover":var g=d.pointerId;return Br.set(g,Ht(Br.get(g)||null,n,i,a,h,d)),!0;case"gotpointercapture":return g=d.pointerId,pn.set(g,Ht(pn.get(g)||null,n,i,a,h,d)),!0}return!1}function Rl(n){var i=zi(n.target);if(i!==null){var a=Sn(i);if(a!==null){if(i=a.tag,i===13){if(i=Oi(a),i!==null){n.blockedOn=i,Cl(n.priority,function(){Il(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ns(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);xi=h,a.target.dispatchEvent(h),xi=null}else return i=fa(a),i!==null&&xs(i),n.blockedOn=a,!1;i.shift()}return!0}function Mi(n,i,a){cr(n)&&a.delete(i)}function Pl(){Jo=!1,St!==null&&cr(St)&&(St=null),An!==null&&cr(An)&&(An=null),Rn!==null&&cr(Rn)&&(Rn=null),Br.forEach(Mi),pn.forEach(Mi)}function Pn(n,i){n.blockedOn===i&&(n.blockedOn=null,Jo||(Jo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pl)))}function xn(n){function i(d){return Pn(d,n)}if(0<zn.length){Pn(zn[0],n);for(var a=1;a<zn.length;a++){var h=zn[a];h.blockedOn===n&&(h.blockedOn=null)}}for(St!==null&&Pn(St,n),An!==null&&Pn(An,n),Rn!==null&&Pn(Rn,n),Br.forEach(i),pn.forEach(i),a=0;a<$n.length;a++)h=$n[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)Rl(a),a.blockedOn===null&&$n.shift()}var hr=ie.ReactCurrentBatchConfig,zr=!0;function Ye(n,i,a,h){var d=Ne,g=hr.transition;hr.transition=null;try{Ne=1,Zo(n,i,a,h)}finally{Ne=d,hr.transition=g}}function $c(n,i,a,h){var d=Ne,g=hr.transition;hr.transition=null;try{Ne=4,Zo(n,i,a,h)}finally{Ne=d,hr.transition=g}}function Zo(n,i,a,h){if(zr){var d=Ns(n,i,a,h);if(d===null)eh(n,i,h,Fi,a),Al(n,h);else if(zc(d,n,i,a,h))h.stopPropagation();else if(Al(n,h),i&4&&-1<Bc.indexOf(n)){for(;d!==null;){var g=fa(d);if(g!==null&&Tl(g),g=Ns(n,i,a,h),g===null&&eh(n,i,h,Fi,a),g===d)break;d=g}d!==null&&h.stopPropagation()}else eh(n,i,h,null,a)}}var Fi=null;function Ns(n,i,a,h){if(Fi=null,n=_s(h),n=zi(n),n!==null)if(i=Sn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Oi(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Fi=n,null}function ea(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yl()){case bi:return 1;case jr:return 4;case fn:case Yo:return 16;case vl:return 536870912;default:return 16}default:return 16}}var on=null,ks=null,Gt=null;function ta(){if(Gt)return Gt;var n,i=ks,a=i.length,h,d="value"in on?on.value:on.textContent,g=d.length;for(n=0;n<a&&i[n]===d[n];n++);var E=a-n;for(h=1;h<=E&&i[a-h]===d[g-h];h++);return Gt=d.slice(n,1<h?1-h:void 0)}function Ds(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qn(){return!0}function na(){return!1}function Ct(n){function i(a,h,d,g,E){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qn:na,this.isPropagationStopped=na,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),i}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Ct(Nn),Wn=ae({},Nn,{view:0,detail:0}),qc=Ct(Wn),bs,dr,$r,Ui=ae({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$r&&($r&&n.type==="mousemove"?(bs=n.screenX-$r.screenX,dr=n.screenY-$r.screenY):dr=bs=0,$r=n),bs)},movementY:function(n){return"movementY"in n?n.movementY:dr}}),js=Ct(Ui),ra=ae({},Ui,{dataTransfer:0}),xl=Ct(ra),Vs=ae({},Wn,{relatedTarget:0}),Ls=Ct(Vs),Nl=ae({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),fr=Ct(Nl),kl=ae({},Nn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dl=Ct(kl),Ol=ae({},Nn,{data:0}),ia=Ct(Ol),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=bl[n])?!!i[n]:!1}function Hn(){return jl}var u=ae({},Wn,{key:function(n){if(n.key){var i=Ms[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ds(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(n){return n.type==="keypress"?Ds(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ds(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Ct(u),_=ae({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ct(_),M=ae({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),W=Ct(M),ne=ae({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Ct(ne),dt=ae({},Ui,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=Ct(dt),vt=[9,13,27,32],ot=f&&"CompositionEvent"in window,mn=null;f&&"documentMode"in document&&(mn=document.documentMode);var an=f&&"TextEvent"in window&&!mn,Bi=f&&(!ot||mn&&8<mn&&11>=mn),Fs=" ",tp=!1;function np(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Us=!1;function AE(n,i){switch(n){case"compositionend":return rp(i);case"keypress":return i.which!==32?null:(tp=!0,Fs);case"textInput":return n=i.data,n===Fs&&tp?null:n;default:return null}}function RE(n,i){if(Us)return n==="compositionend"||!ot&&np(n,i)?(n=ta(),Gt=ks=on=null,Us=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Bi&&i.locale!=="ko"?null:i.data;default:return null}}var PE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ip(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!PE[n.type]:i==="textarea"}function sp(n,i,a,h){Bn(h),i=Ul(i,"onChange"),0<i.length&&(a=new Os("onChange","change",null,a,h),n.push({event:a,listeners:i}))}var sa=null,oa=null;function xE(n){Ip(n,0)}function Vl(n){var i=Ws(n);if(ps(i))return n}function NE(n,i){if(n==="change")return i}var op=!1;if(f){var Wc;if(f){var Hc="oninput"in document;if(!Hc){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),Hc=typeof ap.oninput=="function"}Wc=Hc}else Wc=!1;op=Wc&&(!document.documentMode||9<document.documentMode)}function lp(){sa&&(sa.detachEvent("onpropertychange",up),oa=sa=null)}function up(n){if(n.propertyName==="value"&&Vl(oa)){var i=[];sp(i,oa,n,_s(n)),Ho(xE,i)}}function kE(n,i,a){n==="focusin"?(lp(),sa=i,oa=a,sa.attachEvent("onpropertychange",up)):n==="focusout"&&lp()}function DE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vl(oa)}function OE(n,i){if(n==="click")return Vl(i)}function bE(n,i){if(n==="input"||n==="change")return Vl(i)}function jE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var kn=typeof Object.is=="function"?Object.is:jE;function aa(n,i){if(kn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(i,d)||!kn(n[d],i[d]))return!1}return!0}function cp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hp(n,i){var a=cp(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=i&&h>=i)return{node:a,offset:i-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cp(a)}}function dp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?dp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function fp(){for(var n=window,i=Or();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Or(n.document)}return i}function Gc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function VE(n){var i=fp(),a=n.focusedElem,h=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&dp(a.ownerDocument.documentElement,a)){if(h!==null&&Gc(a)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(h.start,d);h=h.end===void 0?g:Math.min(h.end,d),!n.extend&&g>h&&(d=h,h=g,g=d),d=hp(a,g);var E=hp(a,h);d&&E&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),g>h?(n.addRange(i),n.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LE=f&&"documentMode"in document&&11>=document.documentMode,Bs=null,Kc=null,la=null,Qc=!1;function pp(n,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qc||Bs==null||Bs!==Or(h)||(h=Bs,"selectionStart"in h&&Gc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),la&&aa(la,h)||(la=h,h=Ul(Kc,"onSelect"),0<h.length&&(i=new Os("onSelect","select",null,i,a),n.push({event:i,listeners:h}),i.target=Bs)))}function Ll(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var zs={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Yc={},mp={};f&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Ml(n){if(Yc[n])return Yc[n];if(!zs[n])return n;var i=zs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in mp)return Yc[n]=i[a];return n}var gp=Ml("animationend"),yp=Ml("animationiteration"),vp=Ml("animationstart"),_p=Ml("transitionend"),Ep=new Map,wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(n,i){Ep.set(n,i),l(i,[n])}for(var Xc=0;Xc<wp.length;Xc++){var Jc=wp[Xc],ME=Jc.toLowerCase(),FE=Jc[0].toUpperCase()+Jc.slice(1);qr(ME,"on"+FE)}qr(gp,"onAnimationEnd"),qr(yp,"onAnimationIteration"),qr(vp,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(_p,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function Tp(n,i,a){var h=n.type||"unknown-event";n.currentTarget=a,pl(h,i,void 0,n),n.currentTarget=null}function Ip(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],d=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var E=h.length-1;0<=E;E--){var C=h[E],N=C.instance,$=C.currentTarget;if(C=C.listener,N!==g&&d.isPropagationStopped())break e;Tp(d,C,$),g=N}else for(E=0;E<h.length;E++){if(C=h[E],N=C.instance,$=C.currentTarget,C=C.listener,N!==g&&d.isPropagationStopped())break e;Tp(d,C,$),g=N}}}if(In)throw n=Go,In=!1,Go=null,n}function Ge(n,i){var a=i[oh];a===void 0&&(a=i[oh]=new Set);var h=n+"__bubble";a.has(h)||(Sp(i,n,2,!1),a.add(h))}function Zc(n,i,a){var h=0;i&&(h|=4),Sp(a,n,h,i)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function ca(n){if(!n[Fl]){n[Fl]=!0,s.forEach(function(a){a!=="selectionchange"&&(UE.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fl]||(i[Fl]=!0,Zc("selectionchange",!1,i))}}function Sp(n,i,a,h){switch(ea(i)){case 1:var d=Ye;break;case 4:d=$c;break;default:d=Zo}a=d.bind(null,i,a,n),d=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function eh(n,i,a,h,d){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;E=E.return}for(;C!==null;){if(E=zi(C),E===null)return;if(N=E.tag,N===5||N===6){h=g=E;continue e}C=C.parentNode}}h=h.return}Ho(function(){var $=g,X=_s(a),Z=[];e:{var Y=Ep.get(n);if(Y!==void 0){var se=Os,ce=n;switch(n){case"keypress":if(Ds(a)===0)break e;case"keydown":case"keyup":se=m;break;case"focusin":ce="focus",se=Ls;break;case"focusout":ce="blur",se=Ls;break;case"beforeblur":case"afterblur":se=Ls;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=js;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=W;break;case gp:case yp:case vp:se=fr;break;case _p:se=Ue;break;case"scroll":se=qc;break;case"wheel":se=Oe;break;case"copy":case"cut":case"paste":se=Dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=T}var he=(i&4)!==0,it=!he&&n==="scroll",F=he?Y!==null?Y+"Capture":null:Y;he=[];for(var O=$,z;O!==null;){z=O;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,F!==null&&(ee=rt(O,F),ee!=null&&he.push(ha(O,ee,z)))),it)break;O=O.return}0<he.length&&(Y=new se(Y,ce,null,a,X),Z.push({event:Y,listeners:he}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",Y&&a!==xi&&(ce=a.relatedTarget||a.fromElement)&&(zi(ce)||ce[pr]))break e;if((se||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=$,ce=ce?zi(ce):null,ce!==null&&(it=Sn(ce),ce!==it||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=$),se!==ce)){if(he=js,ee="onMouseLeave",F="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(he=T,ee="onPointerLeave",F="onPointerEnter",O="pointer"),it=se==null?Y:Ws(se),z=ce==null?Y:Ws(ce),Y=new he(ee,O+"leave",se,a,X),Y.target=it,Y.relatedTarget=z,ee=null,zi(X)===$&&(he=new he(F,O+"enter",ce,a,X),he.target=z,he.relatedTarget=it,ee=he),it=ee,se&&ce)t:{for(he=se,F=ce,O=0,z=he;z;z=$s(z))O++;for(z=0,ee=F;ee;ee=$s(ee))z++;for(;0<O-z;)he=$s(he),O--;for(;0<z-O;)F=$s(F),z--;for(;O--;){if(he===F||F!==null&&he===F.alternate)break t;he=$s(he),F=$s(F)}he=null}else he=null;se!==null&&Cp(Z,Y,se,he,!1),ce!==null&&it!==null&&Cp(Z,it,ce,he,!0)}}e:{if(Y=$?Ws($):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var de=NE;else if(ip(Y))if(op)de=bE;else{de=DE;var ye=kE}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=OE);if(de&&(de=de(n,$))){sp(Z,de,a,X);break e}ye&&ye(n,Y,$),n==="focusout"&&(ye=Y._wrapperState)&&ye.controlled&&Y.type==="number"&&gs(Y,"number",Y.value)}switch(ye=$?Ws($):window,n){case"focusin":(ip(ye)||ye.contentEditable==="true")&&(Bs=ye,Kc=$,la=null);break;case"focusout":la=Kc=Bs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,pp(Z,a,X);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":pp(Z,a,X)}var ve;if(ot)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Us?np(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Bi&&a.locale!=="ko"&&(Us||we!=="onCompositionStart"?we==="onCompositionEnd"&&Us&&(ve=ta()):(on=X,ks="value"in on?on.value:on.textContent,Us=!0)),ye=Ul($,we),0<ye.length&&(we=new ia(we,n,null,a,X),Z.push({event:we,listeners:ye}),ve?we.data=ve:(ve=rp(a),ve!==null&&(we.data=ve)))),(ve=an?AE(n,a):RE(n,a))&&($=Ul($,"onBeforeInput"),0<$.length&&(X=new ia("onBeforeInput","beforeinput",null,a,X),Z.push({event:X,listeners:$}),X.data=ve))}Ip(Z,i)})}function ha(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Ul(n,i){for(var a=i+"Capture",h=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=rt(n,a),g!=null&&h.unshift(ha(n,g,d)),g=rt(n,i),g!=null&&h.push(ha(n,g,d))),n=n.return}return h}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cp(n,i,a,h,d){for(var g=i._reactName,E=[];a!==null&&a!==h;){var C=a,N=C.alternate,$=C.stateNode;if(N!==null&&N===h)break;C.tag===5&&$!==null&&(C=$,d?(N=rt(a,g),N!=null&&E.unshift(ha(a,N,C))):d||(N=rt(a,g),N!=null&&E.push(ha(a,N,C)))),a=a.return}E.length!==0&&n.push({event:i,listeners:E})}var BE=/\r\n?/g,zE=/\u0000|\uFFFD/g;function Ap(n){return(typeof n=="string"?n:""+n).replace(BE,`
`).replace(zE,"")}function Bl(n,i,a){if(i=Ap(i),Ap(n)!==i&&a)throw Error(t(425))}function zl(){}var th=null,nh=null;function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,Rp=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof Rp<"u"?function(n){return Rp.resolve(null).then(n).catch(WE)}:ih;function WE(n){setTimeout(function(){throw n})}function sh(n,i){var a=i,h=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){n.removeChild(d),xn(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);xn(i)}function Wr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Pp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var qs=Math.random().toString(36).slice(2),Gn="__reactFiber$"+qs,da="__reactProps$"+qs,pr="__reactContainer$"+qs,oh="__reactEvents$"+qs,HE="__reactListeners$"+qs,GE="__reactHandles$"+qs;function zi(n){var i=n[Gn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[pr]||a[Gn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Pp(n);n!==null;){if(a=n[Gn])return a;n=Pp(n)}return i}n=a,a=n.parentNode}return null}function fa(n){return n=n[Gn]||n[pr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ws(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function $l(n){return n[da]||null}var ah=[],Hs=-1;function Hr(n){return{current:n}}function Ke(n){0>Hs||(n.current=ah[Hs],ah[Hs]=null,Hs--)}function We(n,i){Hs++,ah[Hs]=n.current,n.current=i}var Gr={},Ot=Hr(Gr),Kt=Hr(!1),$i=Gr;function Gs(n,i){var a=n.type.contextTypes;if(!a)return Gr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=i[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Qt(n){return n=n.childContextTypes,n!=null}function ql(){Ke(Kt),Ke(Ot)}function xp(n,i,a){if(Ot.current!==Gr)throw Error(t(168));We(Ot,i),We(Kt,a)}function Np(n,i,a){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,Le(n)||"Unknown",d));return ae({},a,h)}function Wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gr,$i=Ot.current,We(Ot,n),We(Kt,Kt.current),!0}function kp(n,i,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=Np(n,i,$i),h.__reactInternalMemoizedMergedChildContext=n,Ke(Kt),Ke(Ot),We(Ot,n)):Ke(Kt),We(Kt,a)}var mr=null,Hl=!1,lh=!1;function Dp(n){mr===null?mr=[n]:mr.push(n)}function KE(n){Hl=!0,Dp(n)}function Kr(){if(!lh&&mr!==null){lh=!0;var n=0,i=Ne;try{var a=mr;for(Ne=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}mr=null,Hl=!1}catch(d){throw mr!==null&&(mr=mr.slice(n+1)),As(bi,Kr),d}finally{Ne=i,lh=!1}}return null}var Ks=[],Qs=0,Gl=null,Kl=0,gn=[],yn=0,qi=null,gr=1,yr="";function Wi(n,i){Ks[Qs++]=Kl,Ks[Qs++]=Gl,Gl=n,Kl=i}function Op(n,i,a){gn[yn++]=gr,gn[yn++]=yr,gn[yn++]=qi,qi=n;var h=gr;n=yr;var d=32-Bt(h)-1;h&=~(1<<d),a+=1;var g=32-Bt(i)+d;if(30<g){var E=d-d%5;g=(h&(1<<E)-1).toString(32),h>>=E,d-=E,gr=1<<32-Bt(i)+d|a<<d|h,yr=g+n}else gr=1<<g|a<<d|h,yr=n}function uh(n){n.return!==null&&(Wi(n,1),Op(n,1,0))}function ch(n){for(;n===Gl;)Gl=Ks[--Qs],Ks[Qs]=null,Kl=Ks[--Qs],Ks[Qs]=null;for(;n===qi;)qi=gn[--yn],gn[yn]=null,yr=gn[--yn],gn[yn]=null,gr=gn[--yn],gn[yn]=null}var ln=null,un=null,Xe=!1,Dn=null;function bp(n,i){var a=wn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function jp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,ln=n,un=Wr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,ln=n,un=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=qi!==null?{id:gr,overflow:yr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=wn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,ln=n,un=null,!0):!1;default:return!1}}function hh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dh(n){if(Xe){var i=un;if(i){var a=i;if(!jp(n,i)){if(hh(n))throw Error(t(418));i=Wr(a.nextSibling);var h=ln;i&&jp(n,i)?bp(h,a):(n.flags=n.flags&-4097|2,Xe=!1,ln=n)}}else{if(hh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Xe=!1,ln=n}}}function Vp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ln=n}function Ql(n){if(n!==ln)return!1;if(!Xe)return Vp(n),Xe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!rh(n.type,n.memoizedProps)),i&&(i=un)){if(hh(n))throw Lp(),Error(t(418));for(;i;)bp(n,i),i=Wr(i.nextSibling)}if(Vp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){un=Wr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}un=null}}else un=ln?Wr(n.stateNode.nextSibling):null;return!0}function Lp(){for(var n=un;n;)n=Wr(n.nextSibling)}function Ys(){un=ln=null,Xe=!1}function fh(n){Dn===null?Dn=[n]:Dn.push(n)}var QE=ie.ReactCurrentBatchConfig;function pa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var d=h,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(E){var C=d.refs;E===null?delete C[g]:C[g]=E},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Yl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Mp(n){var i=n._init;return i(n._payload)}function Fp(n){function i(F,O){if(n){var z=F.deletions;z===null?(F.deletions=[O],F.flags|=16):z.push(O)}}function a(F,O){if(!n)return null;for(;O!==null;)i(F,O),O=O.sibling;return null}function h(F,O){for(F=new Map;O!==null;)O.key!==null?F.set(O.key,O):F.set(O.index,O),O=O.sibling;return F}function d(F,O){return F=ni(F,O),F.index=0,F.sibling=null,F}function g(F,O,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<O?(F.flags|=2,O):z):(F.flags|=2,O)):(F.flags|=1048576,O)}function E(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,O,z,ee){return O===null||O.tag!==6?(O=id(z,F.mode,ee),O.return=F,O):(O=d(O,z),O.return=F,O)}function N(F,O,z,ee){var de=z.type;return de===k?X(F,O,z.props.children,ee,z.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&Mp(de)===O.type)?(ee=d(O,z.props),ee.ref=pa(F,O,z),ee.return=F,ee):(ee=Eu(z.type,z.key,z.props,null,F.mode,ee),ee.ref=pa(F,O,z),ee.return=F,ee)}function $(F,O,z,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=sd(z,F.mode,ee),O.return=F,O):(O=d(O,z.children||[]),O.return=F,O)}function X(F,O,z,ee,de){return O===null||O.tag!==7?(O=Zi(z,F.mode,ee,de),O.return=F,O):(O=d(O,z),O.return=F,O)}function Z(F,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=id(""+O,F.mode,z),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fe:return z=Eu(O.type,O.key,O.props,null,F.mode,z),z.ref=pa(F,null,O),z.return=F,z;case _e:return O=sd(O,F.mode,z),O.return=F,O;case Dt:var ee=O._init;return Z(F,ee(O._payload),z)}if(sr(O)||ge(O))return O=Zi(O,F.mode,z,null),O.return=F,O;Yl(F,O)}return null}function Y(F,O,z,ee){var de=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return de!==null?null:C(F,O,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:return z.key===de?N(F,O,z,ee):null;case _e:return z.key===de?$(F,O,z,ee):null;case Dt:return de=z._init,Y(F,O,de(z._payload),ee)}if(sr(z)||ge(z))return de!==null?null:X(F,O,z,ee,null);Yl(F,z)}return null}function se(F,O,z,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return F=F.get(z)||null,C(O,F,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case fe:return F=F.get(ee.key===null?z:ee.key)||null,N(O,F,ee,de);case _e:return F=F.get(ee.key===null?z:ee.key)||null,$(O,F,ee,de);case Dt:var ye=ee._init;return se(F,O,z,ye(ee._payload),de)}if(sr(ee)||ge(ee))return F=F.get(z)||null,X(O,F,ee,de,null);Yl(O,ee)}return null}function ce(F,O,z,ee){for(var de=null,ye=null,ve=O,we=O=0,wt=null;ve!==null&&we<z.length;we++){ve.index>we?(wt=ve,ve=null):wt=ve.sibling;var Ve=Y(F,ve,z[we],ee);if(Ve===null){ve===null&&(ve=wt);break}n&&ve&&Ve.alternate===null&&i(F,ve),O=g(Ve,O,we),ye===null?de=Ve:ye.sibling=Ve,ye=Ve,ve=wt}if(we===z.length)return a(F,ve),Xe&&Wi(F,we),de;if(ve===null){for(;we<z.length;we++)ve=Z(F,z[we],ee),ve!==null&&(O=g(ve,O,we),ye===null?de=ve:ye.sibling=ve,ye=ve);return Xe&&Wi(F,we),de}for(ve=h(F,ve);we<z.length;we++)wt=se(ve,F,we,z[we],ee),wt!==null&&(n&&wt.alternate!==null&&ve.delete(wt.key===null?we:wt.key),O=g(wt,O,we),ye===null?de=wt:ye.sibling=wt,ye=wt);return n&&ve.forEach(function(ri){return i(F,ri)}),Xe&&Wi(F,we),de}function he(F,O,z,ee){var de=ge(z);if(typeof de!="function")throw Error(t(150));if(z=de.call(z),z==null)throw Error(t(151));for(var ye=de=null,ve=O,we=O=0,wt=null,Ve=z.next();ve!==null&&!Ve.done;we++,Ve=z.next()){ve.index>we?(wt=ve,ve=null):wt=ve.sibling;var ri=Y(F,ve,Ve.value,ee);if(ri===null){ve===null&&(ve=wt);break}n&&ve&&ri.alternate===null&&i(F,ve),O=g(ri,O,we),ye===null?de=ri:ye.sibling=ri,ye=ri,ve=wt}if(Ve.done)return a(F,ve),Xe&&Wi(F,we),de;if(ve===null){for(;!Ve.done;we++,Ve=z.next())Ve=Z(F,Ve.value,ee),Ve!==null&&(O=g(Ve,O,we),ye===null?de=Ve:ye.sibling=Ve,ye=Ve);return Xe&&Wi(F,we),de}for(ve=h(F,ve);!Ve.done;we++,Ve=z.next())Ve=se(ve,F,we,Ve.value,ee),Ve!==null&&(n&&Ve.alternate!==null&&ve.delete(Ve.key===null?we:Ve.key),O=g(Ve,O,we),ye===null?de=Ve:ye.sibling=Ve,ye=Ve);return n&&ve.forEach(function(Pw){return i(F,Pw)}),Xe&&Wi(F,we),de}function it(F,O,z,ee){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:e:{for(var de=z.key,ye=O;ye!==null;){if(ye.key===de){if(de=z.type,de===k){if(ye.tag===7){a(F,ye.sibling),O=d(ye,z.props.children),O.return=F,F=O;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&Mp(de)===ye.type){a(F,ye.sibling),O=d(ye,z.props),O.ref=pa(F,ye,z),O.return=F,F=O;break e}a(F,ye);break}else i(F,ye);ye=ye.sibling}z.type===k?(O=Zi(z.props.children,F.mode,ee,z.key),O.return=F,F=O):(ee=Eu(z.type,z.key,z.props,null,F.mode,ee),ee.ref=pa(F,O,z),ee.return=F,F=ee)}return E(F);case _e:e:{for(ye=z.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(F,O.sibling),O=d(O,z.children||[]),O.return=F,F=O;break e}else{a(F,O);break}else i(F,O);O=O.sibling}O=sd(z,F.mode,ee),O.return=F,F=O}return E(F);case Dt:return ye=z._init,it(F,O,ye(z._payload),ee)}if(sr(z))return ce(F,O,z,ee);if(ge(z))return he(F,O,z,ee);Yl(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(a(F,O.sibling),O=d(O,z),O.return=F,F=O):(a(F,O),O=id(z,F.mode,ee),O.return=F,F=O),E(F)):a(F,O)}return it}var Xs=Fp(!0),Up=Fp(!1),Xl=Hr(null),Jl=null,Js=null,ph=null;function mh(){ph=Js=Jl=null}function gh(n){var i=Xl.current;Ke(Xl),n._currentValue=i}function yh(n,i,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===a)break;n=n.return}}function Zs(n,i){Jl=n,ph=Js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Yt=!0),n.firstContext=null)}function vn(n){var i=n._currentValue;if(ph!==n)if(n={context:n,memoizedValue:i,next:null},Js===null){if(Jl===null)throw Error(t(308));Js=n,Jl.dependencies={lanes:0,firstContext:n}}else Js=Js.next=n;return i}var Hi=null;function vh(n){Hi===null?Hi=[n]:Hi.push(n)}function Bp(n,i,a,h){var d=i.interleaved;return d===null?(a.next=a,vh(i)):(a.next=d.next,d.next=a),i.interleaved=a,vr(n,h)}function vr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Qr=!1;function _h(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _r(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Yr(n,i,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,vr(n,a)}return d=h.interleaved,d===null?(i.next=i,vh(h)):(i.next=d.next,d.next=i),h.interleaved=i,vr(n,a)}function Zl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Fr(n,a)}}function $p(n,i){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function eu(n,i,a,h){var d=n.updateQueue;Qr=!1;var g=d.firstBaseUpdate,E=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,$=N.next;N.next=null,E===null?g=$:E.next=$,E=N;var X=n.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==E&&(C===null?X.firstBaseUpdate=$:C.next=$,X.lastBaseUpdate=N))}if(g!==null){var Z=d.baseState;E=0,X=$=N=null,C=g;do{var Y=C.lane,se=C.eventTime;if((h&Y)===Y){X!==null&&(X=X.next={eventTime:se,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=n,he=C;switch(Y=i,se=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){Z=ce.call(se,Z,Y);break e}Z=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,Y=typeof ce=="function"?ce.call(se,Z,Y):ce,Y==null)break e;Z=ae({},Z,Y);break e;case 2:Qr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[C]:Y.push(C))}else se={eventTime:se,lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?($=X=se,N=Z):X=X.next=se,E|=Y;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Y=C,C=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(X===null&&(N=Z),d.baseState=N,d.firstBaseUpdate=$,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do E|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Qi|=E,n.lanes=E,n.memoizedState=Z}}function qp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var ma={},Kn=Hr(ma),ga=Hr(ma),ya=Hr(ma);function Gi(n){if(n===ma)throw Error(t(174));return n}function Eh(n,i){switch(We(ya,i),We(ga,n),We(Kn,ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ht(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ht(i,n)}Ke(Kn),We(Kn,i)}function eo(){Ke(Kn),Ke(ga),Ke(ya)}function Wp(n){Gi(ya.current);var i=Gi(Kn.current),a=ht(i,n.type);i!==a&&(We(ga,n),We(Kn,a))}function wh(n){ga.current===n&&(Ke(Kn),Ke(ga))}var Je=Hr(0);function tu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Th=[];function Ih(){for(var n=0;n<Th.length;n++)Th[n]._workInProgressVersionPrimary=null;Th.length=0}var nu=ie.ReactCurrentDispatcher,Sh=ie.ReactCurrentBatchConfig,Ki=0,Ze=null,ft=null,_t=null,ru=!1,va=!1,_a=0,YE=0;function bt(){throw Error(t(321))}function Ch(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!kn(n[a],i[a]))return!1;return!0}function Ah(n,i,a,h,d,g){if(Ki=g,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,nu.current=n===null||n.memoizedState===null?ew:tw,n=a(h,d),va){g=0;do{if(va=!1,_a=0,25<=g)throw Error(t(301));g+=1,_t=ft=null,i.updateQueue=null,nu.current=nw,n=a(h,d)}while(va)}if(nu.current=ou,i=ft!==null&&ft.next!==null,Ki=0,_t=ft=Ze=null,ru=!1,i)throw Error(t(300));return n}function Rh(){var n=_a!==0;return _a=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ze.memoizedState=_t=n:_t=_t.next=n,_t}function _n(){if(ft===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var i=_t===null?Ze.memoizedState:_t.next;if(i!==null)_t=i,ft=n;else{if(n===null)throw Error(t(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Ze.memoizedState=_t=n:_t=_t.next=n}return _t}function Ea(n,i){return typeof i=="function"?i(n):i}function Ph(n){var i=_n(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=ft,d=h.baseQueue,g=a.pending;if(g!==null){if(d!==null){var E=d.next;d.next=g.next,g.next=E}h.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,h=h.baseState;var C=E=null,N=null,$=g;do{var X=$.lane;if((Ki&X)===X)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var Z={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(C=N=Z,E=h):N=N.next=Z,Ze.lanes|=X,Qi|=X}$=$.next}while($!==null&&$!==g);N===null?E=h:N.next=C,kn(h,i.memoizedState)||(Yt=!0),i.memoizedState=h,i.baseState=E,i.baseQueue=N,a.lastRenderedState=h}if(n=a.interleaved,n!==null){d=n;do g=d.lane,Ze.lanes|=g,Qi|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function xh(n){var i=_n(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do g=n(g,E.action),E=E.next;while(E!==d);kn(g,i.memoizedState)||(Yt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function Hp(){}function Gp(n,i){var a=Ze,h=_n(),d=i(),g=!kn(h.memoizedState,d);if(g&&(h.memoizedState=d,Yt=!0),h=h.queue,Nh(Yp.bind(null,a,h,n),[n]),h.getSnapshot!==i||g||_t!==null&&_t.memoizedState.tag&1){if(a.flags|=2048,wa(9,Qp.bind(null,a,h,d,i),void 0,null),Et===null)throw Error(t(349));(Ki&30)!==0||Kp(a,i,d)}return d}function Kp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Qp(n,i,a,h){i.value=a,i.getSnapshot=h,Xp(i)&&Jp(n)}function Yp(n,i,a){return a(function(){Xp(i)&&Jp(n)})}function Xp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!kn(n,a)}catch{return!0}}function Jp(n){var i=vr(n,1);i!==null&&Vn(i,n,1,-1)}function Zp(n){var i=Qn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:n},i.queue=n,n=n.dispatch=ZE.bind(null,Ze,n),[i.memoizedState,n]}function wa(n,i,a,h){return n={tag:n,create:i,destroy:a,deps:h,next:null},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,i.lastEffect=n)),n}function em(){return _n().memoizedState}function iu(n,i,a,h){var d=Qn();Ze.flags|=n,d.memoizedState=wa(1|i,a,void 0,h===void 0?null:h)}function su(n,i,a,h){var d=_n();h=h===void 0?null:h;var g=void 0;if(ft!==null){var E=ft.memoizedState;if(g=E.destroy,h!==null&&Ch(h,E.deps)){d.memoizedState=wa(i,a,g,h);return}}Ze.flags|=n,d.memoizedState=wa(1|i,a,g,h)}function tm(n,i){return iu(8390656,8,n,i)}function Nh(n,i){return su(2048,8,n,i)}function nm(n,i){return su(4,2,n,i)}function rm(n,i){return su(4,4,n,i)}function im(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function sm(n,i,a){return a=a!=null?a.concat([n]):null,su(4,4,im.bind(null,i,n),a)}function kh(){}function om(n,i){var a=_n();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ch(i,h[1])?h[0]:(a.memoizedState=[n,i],n)}function am(n,i){var a=_n();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ch(i,h[1])?h[0]:(n=n(),a.memoizedState=[n,i],n)}function lm(n,i,a){return(Ki&21)===0?(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a):(kn(a,i)||(a=Li(),Ze.lanes|=a,Qi|=a,n.baseState=!0),i)}function XE(n,i){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var h=Sh.transition;Sh.transition={};try{n(!1),i()}finally{Ne=a,Sh.transition=h}}function um(){return _n().memoizedState}function JE(n,i,a){var h=ei(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},cm(n))hm(i,a);else if(a=Bp(n,i,a,h),a!==null){var d=qt();Vn(a,n,h,d),dm(a,i,h)}}function ZE(n,i,a){var h=ei(n),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(cm(n))hm(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,C=g(E,a);if(d.hasEagerState=!0,d.eagerState=C,kn(C,E)){var N=i.interleaved;N===null?(d.next=d,vh(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}finally{}a=Bp(n,i,d,h),a!==null&&(d=qt(),Vn(a,n,h,d),dm(a,i,h))}}function cm(n){var i=n.alternate;return n===Ze||i!==null&&i===Ze}function hm(n,i){va=ru=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function dm(n,i,a){if((a&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,a|=h,i.lanes=a,Fr(n,a)}}var ou={readContext:vn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},ew={readContext:vn,useCallback:function(n,i){return Qn().memoizedState=[n,i===void 0?null:i],n},useContext:vn,useEffect:tm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,iu(4194308,4,im.bind(null,i,n),a)},useLayoutEffect:function(n,i){return iu(4194308,4,n,i)},useInsertionEffect:function(n,i){return iu(4,2,n,i)},useMemo:function(n,i){var a=Qn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var h=Qn();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=JE.bind(null,Ze,n),[h.memoizedState,n]},useRef:function(n){var i=Qn();return n={current:n},i.memoizedState=n},useState:Zp,useDebugValue:kh,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=Zp(!1),i=n[0];return n=XE.bind(null,n[1]),Qn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var h=Ze,d=Qn();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Et===null)throw Error(t(349));(Ki&30)!==0||Kp(h,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,tm(Yp.bind(null,h,g,n),[n]),h.flags|=2048,wa(9,Qp.bind(null,h,g,a,i),void 0,null),a},useId:function(){var n=Qn(),i=Et.identifierPrefix;if(Xe){var a=yr,h=gr;a=(h&~(1<<32-Bt(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=_a++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=YE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},tw={readContext:vn,useCallback:om,useContext:vn,useEffect:Nh,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:am,useReducer:Ph,useRef:em,useState:function(){return Ph(Ea)},useDebugValue:kh,useDeferredValue:function(n){var i=_n();return lm(i,ft.memoizedState,n)},useTransition:function(){var n=Ph(Ea)[0],i=_n().memoizedState;return[n,i]},useMutableSource:Hp,useSyncExternalStore:Gp,useId:um,unstable_isNewReconciler:!1},nw={readContext:vn,useCallback:om,useContext:vn,useEffect:Nh,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:am,useReducer:xh,useRef:em,useState:function(){return xh(Ea)},useDebugValue:kh,useDeferredValue:function(n){var i=_n();return ft===null?i.memoizedState=n:lm(i,ft.memoizedState,n)},useTransition:function(){var n=xh(Ea)[0],i=_n().memoizedState;return[n,i]},useMutableSource:Hp,useSyncExternalStore:Gp,useId:um,unstable_isNewReconciler:!1};function On(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Dh(n,i,a,h){i=n.memoizedState,a=a(h,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var au={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var h=qt(),d=ei(n),g=_r(h,d);g.payload=i,a!=null&&(g.callback=a),i=Yr(n,g,d),i!==null&&(Vn(i,n,d,h),Zl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var h=qt(),d=ei(n),g=_r(h,d);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Yr(n,g,d),i!==null&&(Vn(i,n,d,h),Zl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=qt(),h=ei(n),d=_r(a,h);d.tag=2,i!=null&&(d.callback=i),i=Yr(n,d,h),i!==null&&(Vn(i,n,h,a),Zl(i,n,h))}};function fm(n,i,a,h,d,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,E):i.prototype&&i.prototype.isPureReactComponent?!aa(a,h)||!aa(d,g):!0}function pm(n,i,a){var h=!1,d=Gr,g=i.contextType;return typeof g=="object"&&g!==null?g=vn(g):(d=Qt(i)?$i:Ot.current,h=i.contextTypes,g=(h=h!=null)?Gs(n,d):Gr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=au,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),i}function mm(n,i,a,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==n&&au.enqueueReplaceState(i,i.state,null)}function Oh(n,i,a,h){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},_h(n);var g=i.contextType;typeof g=="object"&&g!==null?d.context=vn(g):(g=Qt(i)?$i:Ot.current,d.context=Gs(n,g)),d.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Dh(n,i,g,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&au.enqueueReplaceState(d,d.state,null),eu(n,a,d,h),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function to(n,i){try{var a="",h=i;do a+=Ae(h),h=h.return;while(h);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:d,digest:null}}function bh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function jh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var rw=typeof WeakMap=="function"?WeakMap:Map;function gm(n,i,a){a=_r(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){pu||(pu=!0,Yh=h),jh(n,i)},a}function ym(n,i,a){a=_r(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){jh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){jh(n,i),typeof h!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),a}function vm(n,i,a){var h=n.pingCache;if(h===null){h=n.pingCache=new rw;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),n=yw.bind(null,n,i,a),i.then(n,n))}function _m(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Em(n,i,a,h,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=_r(-1,1),i.tag=2,Yr(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var iw=ie.ReactCurrentOwner,Yt=!1;function $t(n,i,a,h){i.child=n===null?Up(i,null,a,h):Xs(i,n.child,a,h)}function wm(n,i,a,h,d){a=a.render;var g=i.ref;return Zs(i,d),h=Ah(n,i,a,h,g,d),a=Rh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Er(n,i,d)):(Xe&&a&&uh(i),i.flags|=1,$t(n,i,h,d),i.child)}function Tm(n,i,a,h,d){if(n===null){var g=a.type;return typeof g=="function"&&!rd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Im(n,i,g,h,d)):(n=Eu(a.type,null,h,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&d)===0){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:aa,a(E,h)&&n.ref===i.ref)return Er(n,i,d)}return i.flags|=1,n=ni(g,h),n.ref=i.ref,n.return=i,i.child=n}function Im(n,i,a,h,d){if(n!==null){var g=n.memoizedProps;if(aa(g,h)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=h=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Yt=!0);else return i.lanes=n.lanes,Er(n,i,d)}return Vh(n,i,a,h,d)}function Sm(n,i,a){var h=i.pendingProps,d=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ro,cn),cn|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(ro,cn),cn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,We(ro,cn),cn|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,We(ro,cn),cn|=h;return $t(n,i,d,a),i.child}function Cm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Vh(n,i,a,h,d){var g=Qt(a)?$i:Ot.current;return g=Gs(i,g),Zs(i,d),a=Ah(n,i,a,h,g,d),h=Rh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Er(n,i,d)):(Xe&&h&&uh(i),i.flags|=1,$t(n,i,a,d),i.child)}function Am(n,i,a,h,d){if(Qt(a)){var g=!0;Wl(i)}else g=!1;if(Zs(i,d),i.stateNode===null)uu(n,i),pm(i,a,h),Oh(i,a,h,d),h=!0;else if(n===null){var E=i.stateNode,C=i.memoizedProps;E.props=C;var N=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=vn($):($=Qt(a)?$i:Ot.current,$=Gs(i,$));var X=a.getDerivedStateFromProps,Z=typeof X=="function"||typeof E.getSnapshotBeforeUpdate=="function";Z||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||N!==$)&&mm(i,E,h,$),Qr=!1;var Y=i.memoizedState;E.state=Y,eu(i,h,E,d),N=i.memoizedState,C!==h||Y!==N||Kt.current||Qr?(typeof X=="function"&&(Dh(i,a,X,h),N=i.memoizedState),(C=Qr||fm(i,a,C,h,Y,N,$))?(Z||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=N),E.props=h,E.state=N,E.context=$,h=C):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,zp(n,i),C=i.memoizedProps,$=i.type===i.elementType?C:On(i.type,C),E.props=$,Z=i.pendingProps,Y=E.context,N=a.contextType,typeof N=="object"&&N!==null?N=vn(N):(N=Qt(a)?$i:Ot.current,N=Gs(i,N));var se=a.getDerivedStateFromProps;(X=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==Z||Y!==N)&&mm(i,E,h,N),Qr=!1,Y=i.memoizedState,E.state=Y,eu(i,h,E,d);var ce=i.memoizedState;C!==Z||Y!==ce||Kt.current||Qr?(typeof se=="function"&&(Dh(i,a,se,h),ce=i.memoizedState),($=Qr||fm(i,a,$,h,Y,ce,N)||!1)?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ce,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ce,N)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ce),E.props=h,E.state=ce,E.context=N,h=$):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),h=!1)}return Lh(n,i,a,h,g,d)}function Lh(n,i,a,h,d,g){Cm(n,i);var E=(i.flags&128)!==0;if(!h&&!E)return d&&kp(i,a,!1),Er(n,i,g);h=i.stateNode,iw.current=i;var C=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&E?(i.child=Xs(i,n.child,null,g),i.child=Xs(i,null,C,g)):$t(n,i,C,g),i.memoizedState=h.state,d&&kp(i,a,!0),i.child}function Rm(n){var i=n.stateNode;i.pendingContext?xp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&xp(n,i.context,!1),Eh(n,i.containerInfo)}function Pm(n,i,a,h,d){return Ys(),fh(d),i.flags|=256,$t(n,i,a,h),i.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function Fh(n){return{baseLanes:n,cachePool:null,transitions:null}}function xm(n,i,a){var h=i.pendingProps,d=Je.current,g=!1,E=(i.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Je,d&1),n===null)return dh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=h.children,n=h.fallback,g?(h=i.mode,g=i.child,E={mode:"hidden",children:E},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=wu(E,h,0,null),n=Zi(n,h,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Fh(a),i.memoizedState=Mh,n):Uh(i,E));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return sw(n,i,E,h,C,d,a);if(g){g=h.fallback,E=i.mode,d=n.child,C=d.sibling;var N={mode:"hidden",children:h.children};return(E&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=N,i.deletions=null):(h=ni(d,N),h.subtreeFlags=d.subtreeFlags&14680064),C!==null?g=ni(C,g):(g=Zi(g,E,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,E=n.child.memoizedState,E=E===null?Fh(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=n.childLanes&~a,i.memoizedState=Mh,h}return g=n.child,n=g.sibling,h=ni(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=h,i.memoizedState=null,h}function Uh(n,i){return i=wu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function lu(n,i,a,h){return h!==null&&fh(h),Xs(i,n.child,null,a),n=Uh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function sw(n,i,a,h,d,g,E){if(a)return i.flags&256?(i.flags&=-257,h=bh(Error(t(422))),lu(n,i,E,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=h.fallback,d=i.mode,h=wu({mode:"visible",children:h.children},d,0,null),g=Zi(g,d,E,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&Xs(i,n.child,null,E),i.child.memoizedState=Fh(E),i.memoizedState=Mh,g);if((i.mode&1)===0)return lu(n,i,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=bh(g,h,void 0),lu(n,i,E,h)}if(C=(E&n.childLanes)!==0,Yt||C){if(h=Et,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|E))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,vr(n,d),Vn(h,n,d,-1))}return nd(),h=bh(Error(t(421))),lu(n,i,E,h)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=vw.bind(null,n),d._reactRetry=i,null):(n=g.treeContext,un=Wr(d.nextSibling),ln=i,Xe=!0,Dn=null,n!==null&&(gn[yn++]=gr,gn[yn++]=yr,gn[yn++]=qi,gr=n.id,yr=n.overflow,qi=i),i=Uh(i,h.children),i.flags|=4096,i)}function Nm(n,i,a){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),yh(n.return,i,a)}function Bh(n,i,a,h,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=d)}function km(n,i,a){var h=i.pendingProps,d=h.revealOrder,g=h.tail;if($t(n,i,h.children,a),h=Je.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Nm(n,a,i);else if(n.tag===19)Nm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(We(Je,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&tu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Bh(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&tu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Bh(i,!0,a,null,g);break;case"together":Bh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function uu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Er(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Qi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ni(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ni(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function ow(n,i,a){switch(i.tag){case 3:Rm(i),Ys();break;case 5:Wp(i);break;case 1:Qt(i.type)&&Wl(i);break;case 4:Eh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;We(Xl,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(We(Je,Je.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?xm(n,i,a):(We(Je,Je.current&1),n=Er(n,i,a),n!==null?n.sibling:null);We(Je,Je.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(n.flags&128)!==0){if(h)return km(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Je,Je.current),h)break;return null;case 22:case 23:return i.lanes=0,Sm(n,i,a)}return Er(n,i,a)}var Dm,zh,Om,bm;Dm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zh=function(){},Om=function(n,i,a,h){var d=n.memoizedProps;if(d!==h){n=i.stateNode,Gi(Kn.current);var g=null;switch(a){case"input":d=Ai(n,d),h=Ai(n,h),g=[];break;case"select":d=ae({},d,{value:void 0}),h=ae({},h,{value:void 0}),g=[];break;case"textarea":d=Vo(n,d),h=Vo(n,h),g=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=zl)}zo(a,h);var E;a=null;for($ in d)if(!h.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(E in C)C.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var N=h[$];if(C=d!=null?d[$]:void 0,h.hasOwnProperty($)&&N!==C&&(N!=null||C!=null))if($==="style")if(C){for(E in C)!C.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in N)N.hasOwnProperty(E)&&C[E]!==N[E]&&(a||(a={}),a[E]=N[E])}else a||(g||(g=[]),g.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(g=g||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&Ge("scroll",n),g||C===N||(g=[])):(g=g||[]).push($,N))}a&&(g=g||[]).push("style",a);var $=g;(i.updateQueue=$)&&(i.flags|=4)}},bm=function(n,i,a,h){a!==h&&(i.flags|=4)};function Ta(n,i){if(!Xe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function jt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=h,n.childLanes=a,i}function aw(n,i,a){var h=i.pendingProps;switch(ch(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(i),null;case 1:return Qt(i.type)&&ql(),jt(i),null;case 3:return h=i.stateNode,eo(),Ke(Kt),Ke(Ot),Ih(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Ql(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dn!==null&&(Zh(Dn),Dn=null))),zh(n,i),jt(i),null;case 5:wh(i);var d=Gi(ya.current);if(a=i.type,n!==null&&i.stateNode!=null)Om(n,i,a,h,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return jt(i),null}if(n=Gi(Kn.current),Ql(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[Gn]=i,h[da]=g,n=(i.mode&1)!==0,a){case"dialog":Ge("cancel",h),Ge("close",h);break;case"iframe":case"object":case"embed":Ge("load",h);break;case"video":case"audio":for(d=0;d<ua.length;d++)Ge(ua[d],h);break;case"source":Ge("error",h);break;case"img":case"image":case"link":Ge("error",h),Ge("load",h);break;case"details":Ge("toggle",h);break;case"input":ms(h,g),Ge("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ge("invalid",h);break;case"textarea":ys(h,g),Ge("invalid",h)}zo(a,g),d=null;for(var E in g)if(g.hasOwnProperty(E)){var C=g[E];E==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&Bl(h.textContent,C,n),d=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&Bl(h.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Ge("scroll",h)}switch(a){case"input":ir(h),fl(h,g,!0);break;case"textarea":ir(h),Lo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=zl)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ct(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=E.createElement(a,{is:h.is}):(n=E.createElement(a),a==="select"&&(E=n,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):n=E.createElementNS(n,a),n[Gn]=i,n[da]=h,Dm(n,i,!1,!1),i.stateNode=n;e:{switch(E=$o(a,h),a){case"dialog":Ge("cancel",n),Ge("close",n),d=h;break;case"iframe":case"object":case"embed":Ge("load",n),d=h;break;case"video":case"audio":for(d=0;d<ua.length;d++)Ge(ua[d],n);d=h;break;case"source":Ge("error",n),d=h;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),d=h;break;case"details":Ge("toggle",n),d=h;break;case"input":ms(n,h),d=Ai(n,h),Ge("invalid",n);break;case"option":d=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},d=ae({},h,{value:void 0}),Ge("invalid",n);break;case"textarea":ys(n,h),d=Vo(n,h),Ge("invalid",n);break;default:d=h}zo(a,d),C=d;for(g in C)if(C.hasOwnProperty(g)){var N=C[g];g==="style"?Uo(n,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Mo(n,N)):g==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&br(n,N):typeof N=="number"&&br(n,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?N!=null&&g==="onScroll"&&Ge("scroll",n):N!=null&&te(n,g,N,E))}switch(a){case"input":ir(n),fl(n,h,!1);break;case"textarea":ir(n),Lo(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Me(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?or(n,!!h.multiple,g,!1):h.defaultValue!=null&&or(n,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=zl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return jt(i),null;case 6:if(n&&i.stateNode!=null)bm(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Gi(ya.current),Gi(Kn.current),Ql(i)){if(h=i.stateNode,a=i.memoizedProps,h[Gn]=i,(g=h.nodeValue!==a)&&(n=ln,n!==null))switch(n.tag){case 3:Bl(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bl(h.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Gn]=i,i.stateNode=h}return jt(i),null;case 13:if(Ke(Je),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&un!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Lp(),Ys(),i.flags|=98560,g=!1;else if(g=Ql(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Gn]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;jt(i),g=!1}else Dn!==null&&(Zh(Dn),Dn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Je.current&1)!==0?pt===0&&(pt=3):nd())),i.updateQueue!==null&&(i.flags|=4),jt(i),null);case 4:return eo(),zh(n,i),n===null&&ca(i.stateNode.containerInfo),jt(i),null;case 10:return gh(i.type._context),jt(i),null;case 17:return Qt(i.type)&&ql(),jt(i),null;case 19:if(Ke(Je),g=i.memoizedState,g===null)return jt(i),null;if(h=(i.flags&128)!==0,E=g.rendering,E===null)if(h)Ta(g,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(E=tu(n),E!==null){for(i.flags|=128,Ta(g,!1),h=E.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,n=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,n=E.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Je,Je.current&1|2),i.child}n=n.sibling}g.tail!==null&&qe()>io&&(i.flags|=128,h=!0,Ta(g,!1),i.lanes=4194304)}else{if(!h)if(n=tu(E),n!==null){if(i.flags|=128,h=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ta(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Xe)return jt(i),null}else 2*qe()-g.renderingStartTime>io&&a!==1073741824&&(i.flags|=128,h=!0,Ta(g,!1),i.lanes=4194304);g.isBackwards?(E.sibling=i.child,i.child=E):(a=g.last,a!==null?a.sibling=E:i.child=E,g.last=E)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=qe(),i.sibling=null,a=Je.current,We(Je,h?a&1|2:a&1),i):(jt(i),null);case 22:case 23:return td(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(cn&1073741824)!==0&&(jt(i),i.subtreeFlags&6&&(i.flags|=8192)):jt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function lw(n,i){switch(ch(i),i.tag){case 1:return Qt(i.type)&&ql(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return eo(),Ke(Kt),Ke(Ot),Ih(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return wh(i),null;case 13:if(Ke(Je),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ke(Je),null;case 4:return eo(),null;case 10:return gh(i.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var cu=!1,Vt=!1,uw=typeof WeakSet=="function"?WeakSet:Set,ue=null;function no(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){tt(n,i,h)}else a.current=null}function $h(n,i,a){try{a()}catch(h){tt(n,i,h)}}var jm=!1;function cw(n,i){if(th=zr,n=fp(),Gc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,C=-1,N=-1,$=0,X=0,Z=n,Y=null;t:for(;;){for(var se;Z!==a||d!==0&&Z.nodeType!==3||(C=E+d),Z!==g||h!==0&&Z.nodeType!==3||(N=E+h),Z.nodeType===3&&(E+=Z.nodeValue.length),(se=Z.firstChild)!==null;)Y=Z,Z=se;for(;;){if(Z===n)break t;if(Y===a&&++$===d&&(C=E),Y===g&&++X===h&&(N=E),(se=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=se}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(nh={focusedElem:n,selectionRange:a},zr=!1,ue=i;ue!==null;)if(i=ue,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ue=n;else for(;ue!==null;){i=ue;try{var ce=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,it=ce.memoizedState,F=i.stateNode,O=F.getSnapshotBeforeUpdate(i.elementType===i.type?he:On(i.type,he),it);F.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){tt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ue=n;break}ue=i.return}return ce=jm,jm=!1,ce}function Ia(n,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&$h(i,a,g)}d=d.next}while(d!==h)}}function hu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function qh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Vm(n){var i=n.alternate;i!==null&&(n.alternate=null,Vm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Gn],delete i[da],delete i[oh],delete i[HE],delete i[GE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Lm(n){return n.tag===5||n.tag===3||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Lm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=zl));else if(h!==4&&(n=n.child,n!==null))for(Wh(n,i,a),n=n.sibling;n!==null;)Wh(n,i,a),n=n.sibling}function Hh(n,i,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Hh(n,i,a),n=n.sibling;n!==null;)Hh(n,i,a),n=n.sibling}var At=null,bn=!1;function Xr(n,i,a){for(a=a.child;a!==null;)Fm(n,i,a),a=a.sibling}function Fm(n,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(ji,a)}catch{}switch(a.tag){case 5:Vt||no(a,i);case 6:var h=At,d=bn;At=null,Xr(n,i,a),At=h,bn=d,At!==null&&(bn?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(bn?(n=At,a=a.stateNode,n.nodeType===8?sh(n.parentNode,a):n.nodeType===1&&sh(n,a),xn(n)):sh(At,a.stateNode));break;case 4:h=At,d=bn,At=a.stateNode.containerInfo,bn=!0,Xr(n,i,a),At=h,bn=d;break;case 0:case 11:case 14:case 15:if(!Vt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var g=d,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&$h(a,i,E),d=d.next}while(d!==h)}Xr(n,i,a);break;case 1:if(!Vt&&(no(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){tt(a,i,C)}Xr(n,i,a);break;case 21:Xr(n,i,a);break;case 22:a.mode&1?(Vt=(h=Vt)||a.memoizedState!==null,Xr(n,i,a),Vt=h):Xr(n,i,a);break;default:Xr(n,i,a)}}function Um(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new uw),i.forEach(function(h){var d=_w.bind(null,n,h);a.has(h)||(a.add(h),h.then(d,d))})}}function jn(n,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var g=n,E=i,C=E;e:for(;C!==null;){switch(C.tag){case 5:At=C.stateNode,bn=!1;break e;case 3:At=C.stateNode.containerInfo,bn=!0;break e;case 4:At=C.stateNode.containerInfo,bn=!0;break e}C=C.return}if(At===null)throw Error(t(160));Fm(g,E,d),At=null,bn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch($){tt(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Bm(i,n),i=i.sibling}function Bm(n,i){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jn(i,n),Yn(n),h&4){try{Ia(3,n,n.return),hu(3,n)}catch(he){tt(n,n.return,he)}try{Ia(5,n,n.return)}catch(he){tt(n,n.return,he)}}break;case 1:jn(i,n),Yn(n),h&512&&a!==null&&no(a,a.return);break;case 5:if(jn(i,n),Yn(n),h&512&&a!==null&&no(a,a.return),n.flags&32){var d=n.stateNode;try{br(d,"")}catch(he){tt(n,n.return,he)}}if(h&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,E=a!==null?a.memoizedProps:g,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&bo(d,g),$o(C,E);var $=$o(C,g);for(E=0;E<N.length;E+=2){var X=N[E],Z=N[E+1];X==="style"?Uo(d,Z):X==="dangerouslySetInnerHTML"?Mo(d,Z):X==="children"?br(d,Z):te(d,X,Z,$)}switch(C){case"input":jo(d,g);break;case"textarea":vs(d,g);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var se=g.value;se!=null?or(d,!!g.multiple,se,!1):Y!==!!g.multiple&&(g.defaultValue!=null?or(d,!!g.multiple,g.defaultValue,!0):or(d,!!g.multiple,g.multiple?[]:"",!1))}d[da]=g}catch(he){tt(n,n.return,he)}}break;case 6:if(jn(i,n),Yn(n),h&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(he){tt(n,n.return,he)}}break;case 3:if(jn(i,n),Yn(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{xn(i.containerInfo)}catch(he){tt(n,n.return,he)}break;case 4:jn(i,n),Yn(n);break;case 13:jn(i,n),Yn(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Qh=qe())),h&4&&Um(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Vt=($=Vt)||X,jn(i,n),Vt=$):jn(i,n),Yn(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!X&&(n.mode&1)!==0)for(ue=n,X=n.child;X!==null;){for(Z=ue=X;ue!==null;){switch(Y=ue,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ia(4,Y,Y.return);break;case 1:no(Y,Y.return);var ce=Y.stateNode;if(typeof ce.componentWillUnmount=="function"){h=Y,a=Y.return;try{i=h,ce.props=i.memoizedProps,ce.state=i.memoizedState,ce.componentWillUnmount()}catch(he){tt(h,a,he)}}break;case 5:no(Y,Y.return);break;case 22:if(Y.memoizedState!==null){qm(Z);continue}}se!==null?(se.return=Y,ue=se):qm(Z)}X=X.sibling}e:for(X=null,Z=n;;){if(Z.tag===5){if(X===null){X=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=Z.stateNode,N=Z.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=Fo("display",E))}catch(he){tt(n,n.return,he)}}}else if(Z.tag===6){if(X===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(he){tt(n,n.return,he)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;X===Z&&(X=null),Z=Z.return}X===Z&&(X=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:jn(i,n),Yn(n),h&4&&Um(n);break;case 21:break;default:jn(i,n),Yn(n)}}function Yn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Lm(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(br(d,""),h.flags&=-33);var g=Mm(n);Hh(n,g,d);break;case 3:case 4:var E=h.stateNode.containerInfo,C=Mm(n);Wh(n,C,E);break;default:throw Error(t(161))}}catch(N){tt(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function hw(n,i,a){ue=n,zm(n)}function zm(n,i,a){for(var h=(n.mode&1)!==0;ue!==null;){var d=ue,g=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||cu;if(!E){var C=d.alternate,N=C!==null&&C.memoizedState!==null||Vt;C=cu;var $=Vt;if(cu=E,(Vt=N)&&!$)for(ue=d;ue!==null;)E=ue,N=E.child,E.tag===22&&E.memoizedState!==null?Wm(d):N!==null?(N.return=E,ue=N):Wm(d);for(;g!==null;)ue=g,zm(g),g=g.sibling;ue=d,cu=C,Vt=$}$m(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,ue=g):$m(n)}}function $m(n){for(;ue!==null;){var i=ue;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Vt||hu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Vt)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:On(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&qp(i,g,h);break;case 3:var E=i.updateQueue;if(E!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}qp(i,E,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var Z=X.dehydrated;Z!==null&&xn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vt||i.flags&512&&qh(i)}catch(Y){tt(i,i.return,Y)}}if(i===n){ue=null;break}if(a=i.sibling,a!==null){a.return=i.return,ue=a;break}ue=i.return}}function qm(n){for(;ue!==null;){var i=ue;if(i===n){ue=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ue=a;break}ue=i.return}}function Wm(n){for(;ue!==null;){var i=ue;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{hu(4,i)}catch(N){tt(i,a,N)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(N){tt(i,d,N)}}var g=i.return;try{qh(i)}catch(N){tt(i,g,N)}break;case 5:var E=i.return;try{qh(i)}catch(N){tt(i,E,N)}}}catch(N){tt(i,i.return,N)}if(i===n){ue=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ue=C;break}ue=i.return}}var dw=Math.ceil,du=ie.ReactCurrentDispatcher,Gh=ie.ReactCurrentOwner,En=ie.ReactCurrentBatchConfig,je=0,Et=null,at=null,Rt=0,cn=0,ro=Hr(0),pt=0,Sa=null,Qi=0,fu=0,Kh=0,Ca=null,Xt=null,Qh=0,io=1/0,wr=null,pu=!1,Yh=null,Jr=null,mu=!1,Zr=null,gu=0,Aa=0,Xh=null,yu=-1,vu=0;function qt(){return(je&6)!==0?qe():yu!==-1?yu:yu=qe()}function ei(n){return(n.mode&1)===0?1:(je&2)!==0&&Rt!==0?Rt&-Rt:QE.transition!==null?(vu===0&&(vu=Li()),vu):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:ea(n.type)),n)}function Vn(n,i,a,h){if(50<Aa)throw Aa=0,Xh=null,Error(t(185));Mr(n,a,h),((je&2)===0||n!==Et)&&(n===Et&&((je&2)===0&&(fu|=a),pt===4&&ti(n,Rt)),Jt(n,h),a===1&&je===0&&(i.mode&1)===0&&(io=qe()+500,Hl&&Kr()))}function Jt(n,i){var a=n.callbackNode;ur(n,i);var h=Vi(n,n===Et?Rt:0);if(h===0)a!==null&&Qo(a),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(a!=null&&Qo(a),i===1)n.tag===0?KE(Gm.bind(null,n)):Dp(Gm.bind(null,n)),qE(function(){(je&6)===0&&Kr()}),a=null;else{switch(Ur(h)){case 1:a=bi;break;case 4:a=jr;break;case 16:a=fn;break;case 536870912:a=vl;break;default:a=fn}a=tg(a,Hm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Hm(n,i){if(yu=-1,vu=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var h=Vi(n,n===Et?Rt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=_u(n,h);else{i=h;var d=je;je|=2;var g=Qm();(Et!==n||Rt!==i)&&(wr=null,io=qe()+500,Xi(n,i));do try{mw();break}catch(C){Km(n,C)}while(!0);mh(),du.current=g,je=d,at!==null?i=0:(Et=null,Rt=0,i=pt)}if(i!==0){if(i===2&&(d=sn(n),d!==0&&(h=d,i=Jh(n,d))),i===1)throw a=Sa,Xi(n,0),ti(n,h),Jt(n,qe()),a;if(i===6)ti(n,h);else{if(d=n.current.alternate,(h&30)===0&&!fw(d)&&(i=_u(n,h),i===2&&(g=sn(n),g!==0&&(h=g,i=Jh(n,g))),i===1))throw a=Sa,Xi(n,0),ti(n,h),Jt(n,qe()),a;switch(n.finishedWork=d,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ji(n,Xt,wr);break;case 3:if(ti(n,h),(h&130023424)===h&&(i=Qh+500-qe(),10<i)){if(Vi(n,0)!==0)break;if(d=n.suspendedLanes,(d&h)!==h){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=ih(Ji.bind(null,n,Xt,wr),i);break}Ji(n,Xt,wr);break;case 4:if(ti(n,h),(h&4194240)===h)break;for(i=n.eventTimes,d=-1;0<h;){var E=31-Bt(h);g=1<<E,E=i[E],E>d&&(d=E),h&=~g}if(h=d,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*dw(h/1960))-h,10<h){n.timeoutHandle=ih(Ji.bind(null,n,Xt,wr),h);break}Ji(n,Xt,wr);break;case 5:Ji(n,Xt,wr);break;default:throw Error(t(329))}}}return Jt(n,qe()),n.callbackNode===a?Hm.bind(null,n):null}function Jh(n,i){var a=Ca;return n.current.memoizedState.isDehydrated&&(Xi(n,i).flags|=256),n=_u(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&Zh(i)),n}function Zh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function fw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],g=d.getSnapshot;d=d.value;try{if(!kn(g(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(n,i){for(i&=~Kh,i&=~fu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Bt(i),h=1<<a;n[a]=-1,i&=~h}}function Gm(n){if((je&6)!==0)throw Error(t(327));so();var i=Vi(n,0);if((i&1)===0)return Jt(n,qe()),null;var a=_u(n,i);if(n.tag!==0&&a===2){var h=sn(n);h!==0&&(i=h,a=Jh(n,h))}if(a===1)throw a=Sa,Xi(n,0),ti(n,i),Jt(n,qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ji(n,Xt,wr),Jt(n,qe()),null}function ed(n,i){var a=je;je|=1;try{return n(i)}finally{je=a,je===0&&(io=qe()+500,Hl&&Kr())}}function Yi(n){Zr!==null&&Zr.tag===0&&(je&6)===0&&so();var i=je;je|=1;var a=En.transition,h=Ne;try{if(En.transition=null,Ne=1,n)return n()}finally{Ne=h,En.transition=a,je=i,(je&6)===0&&Kr()}}function td(){cn=ro.current,Ke(ro)}function Xi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,$E(a)),at!==null)for(a=at.return;a!==null;){var h=a;switch(ch(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ql();break;case 3:eo(),Ke(Kt),Ke(Ot),Ih();break;case 5:wh(h);break;case 4:eo();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:gh(h.type._context);break;case 22:case 23:td()}a=a.return}if(Et=n,at=n=ni(n.current,null),Rt=cn=i,pt=0,Sa=null,Kh=fu=Qi=0,Xt=Ca=null,Hi!==null){for(i=0;i<Hi.length;i++)if(a=Hi[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,g=a.pending;if(g!==null){var E=g.next;g.next=d,h.next=E}a.pending=h}Hi=null}return n}function Km(n,i){do{var a=at;try{if(mh(),nu.current=ou,ru){for(var h=Ze.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}ru=!1}if(Ki=0,_t=ft=Ze=null,va=!1,_a=0,Gh.current=null,a===null||a.return===null){pt=1,Sa=i,at=null;break}e:{var g=n,E=a.return,C=a,N=i;if(i=Rt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,X=C,Z=X.tag;if((X.mode&1)===0&&(Z===0||Z===11||Z===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var se=_m(E);if(se!==null){se.flags&=-257,Em(se,E,C,g,i),se.mode&1&&vm(g,$,i),i=se,N=$;var ce=i.updateQueue;if(ce===null){var he=new Set;he.add(N),i.updateQueue=he}else ce.add(N);break e}else{if((i&1)===0){vm(g,$,i),nd();break e}N=Error(t(426))}}else if(Xe&&C.mode&1){var it=_m(E);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Em(it,E,C,g,i),fh(to(N,C));break e}}g=N=to(N,C),pt!==4&&(pt=2),Ca===null?Ca=[g]:Ca.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var F=gm(g,N,i);$p(g,F);break e;case 1:C=N;var O=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Jr===null||!Jr.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var ee=ym(g,C,i);$p(g,ee);break e}}g=g.return}while(g!==null)}Xm(a)}catch(de){i=de,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function Qm(){var n=du.current;return du.current=ou,n===null?ou:n}function nd(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||(Qi&268435455)===0&&(fu&268435455)===0||ti(Et,Rt)}function _u(n,i){var a=je;je|=2;var h=Qm();(Et!==n||Rt!==i)&&(wr=null,Xi(n,i));do try{pw();break}catch(d){Km(n,d)}while(!0);if(mh(),je=a,du.current=h,at!==null)throw Error(t(261));return Et=null,Rt=0,pt}function pw(){for(;at!==null;)Ym(at)}function mw(){for(;at!==null&&!gl();)Ym(at)}function Ym(n){var i=eg(n.alternate,n,cn);n.memoizedProps=n.pendingProps,i===null?Xm(n):at=i,Gh.current=null}function Xm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=aw(a,i,cn),a!==null){at=a;return}}else{if(a=lw(a,i),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,at=null;return}}if(i=i.sibling,i!==null){at=i;return}at=i=n}while(i!==null);pt===0&&(pt=5)}function Ji(n,i,a){var h=Ne,d=En.transition;try{En.transition=null,Ne=1,gw(n,i,a,h)}finally{En.transition=d,Ne=h}return null}function gw(n,i,a,h){do so();while(Zr!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(ze(n,g),n===Et&&(at=Et=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||mu||(mu=!0,tg(fn,function(){return so(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=En.transition,En.transition=null;var E=Ne;Ne=1;var C=je;je|=4,Gh.current=null,cw(n,a),Bm(a,n),VE(nh),zr=!!th,nh=th=null,n.current=a,hw(a),Fc(),je=C,Ne=E,En.transition=g}else n.current=a;if(mu&&(mu=!1,Zr=n,gu=d),g=n.pendingLanes,g===0&&(Jr=null),_l(a.stateNode),Jt(n,qe()),i!==null)for(h=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(pu)throw pu=!1,n=Yh,Yh=null,n;return(gu&1)!==0&&n.tag!==0&&so(),g=n.pendingLanes,(g&1)!==0?n===Xh?Aa++:(Aa=0,Xh=n):Aa=0,Kr(),null}function so(){if(Zr!==null){var n=Ur(gu),i=En.transition,a=Ne;try{if(En.transition=null,Ne=16>n?16:n,Zr===null)var h=!1;else{if(n=Zr,Zr=null,gu=0,(je&6)!==0)throw Error(t(331));var d=je;for(je|=4,ue=n.current;ue!==null;){var g=ue,E=g.child;if((ue.flags&16)!==0){var C=g.deletions;if(C!==null){for(var N=0;N<C.length;N++){var $=C[N];for(ue=$;ue!==null;){var X=ue;switch(X.tag){case 0:case 11:case 15:Ia(8,X,g)}var Z=X.child;if(Z!==null)Z.return=X,ue=Z;else for(;ue!==null;){X=ue;var Y=X.sibling,se=X.return;if(Vm(X),X===$){ue=null;break}if(Y!==null){Y.return=se,ue=Y;break}ue=se}}}var ce=g.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var it=he.sibling;he.sibling=null,he=it}while(he!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,ue=E;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ia(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,ue=F;break e}ue=g.return}}var O=n.current;for(ue=O;ue!==null;){E=ue;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ue=z;else e:for(E=O;ue!==null;){if(C=ue,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:hu(9,C)}}catch(de){tt(C,C.return,de)}if(C===E){ue=null;break e}var ee=C.sibling;if(ee!==null){ee.return=C.return,ue=ee;break e}ue=C.return}}if(je=d,Kr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(ji,n)}catch{}h=!0}return h}finally{Ne=a,En.transition=i}}return!1}function Jm(n,i,a){i=to(a,i),i=gm(n,i,1),n=Yr(n,i,1),i=qt(),n!==null&&(Mr(n,1,i),Jt(n,i))}function tt(n,i,a){if(n.tag===3)Jm(n,n,a);else for(;i!==null;){if(i.tag===3){Jm(i,n,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Jr===null||!Jr.has(h))){n=to(a,n),n=ym(i,n,1),i=Yr(i,n,1),n=qt(),i!==null&&(Mr(i,1,n),Jt(i,n));break}}i=i.return}}function yw(n,i,a){var h=n.pingCache;h!==null&&h.delete(i),i=qt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Rt&a)===a&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>qe()-Qh?Xi(n,0):Kh|=a),Jt(n,i)}function Zm(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ps,Ps<<=1,(Ps&130023424)===0&&(Ps=4194304)));var a=qt();n=vr(n,i),n!==null&&(Mr(n,i,a),Jt(n,a))}function vw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Zm(n,a)}function _w(n,i){var a=0;switch(n.tag){case 13:var h=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Zm(n,a)}var eg;eg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Kt.current)Yt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Yt=!1,ow(n,i,a);Yt=(n.flags&131072)!==0}else Yt=!1,Xe&&(i.flags&1048576)!==0&&Op(i,Kl,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;uu(n,i),n=i.pendingProps;var d=Gs(i,Ot.current);Zs(i,a),d=Ah(null,i,h,n,d,a);var g=Rh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qt(h)?(g=!0,Wl(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,_h(i),d.updater=au,i.stateNode=d,d._reactInternals=i,Oh(i,h,n,a),i=Lh(null,i,h,!0,g,a)):(i.tag=0,Xe&&g&&uh(i),$t(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(uu(n,i),n=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=ww(h),n=On(h,n),d){case 0:i=Vh(null,i,h,n,a);break e;case 1:i=Am(null,i,h,n,a);break e;case 11:i=wm(null,i,h,n,a);break e;case 14:i=Tm(null,i,h,On(h.type,n),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:On(h,d),Vh(n,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:On(h,d),Am(n,i,h,d,a);case 3:e:{if(Rm(i),n===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,d=g.element,zp(n,i),eu(i,h,null,a);var E=i.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=to(Error(t(423)),i),i=Pm(n,i,h,a,d);break e}else if(h!==d){d=to(Error(t(424)),i),i=Pm(n,i,h,a,d);break e}else for(un=Wr(i.stateNode.containerInfo.firstChild),ln=i,Xe=!0,Dn=null,a=Up(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ys(),h===d){i=Er(n,i,a);break e}$t(n,i,h,a)}i=i.child}return i;case 5:return Wp(i),n===null&&dh(i),h=i.type,d=i.pendingProps,g=n!==null?n.memoizedProps:null,E=d.children,rh(h,d)?E=null:g!==null&&rh(h,g)&&(i.flags|=32),Cm(n,i),$t(n,i,E,a),i.child;case 6:return n===null&&dh(i),null;case 13:return xm(n,i,a);case 4:return Eh(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=Xs(i,null,h,a):$t(n,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:On(h,d),wm(n,i,h,d,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,g=i.memoizedProps,E=d.value,We(Xl,h._currentValue),h._currentValue=E,g!==null)if(kn(g.value,E)){if(g.children===d.children&&!Kt.current){i=Er(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var C=g.dependencies;if(C!==null){E=g.child;for(var N=C.firstContext;N!==null;){if(N.context===h){if(g.tag===1){N=_r(-1,a&-a),N.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?N.next=N:(N.next=X.next,X.next=N),$.pending=N}}g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),yh(g.return,a,i),C.lanes|=a;break}N=N.next}}else if(g.tag===10)E=g.type===i.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,C=E.alternate,C!==null&&(C.lanes|=a),yh(E,a,i),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}$t(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,Zs(i,a),d=vn(d),h=h(d),i.flags|=1,$t(n,i,h,a),i.child;case 14:return h=i.type,d=On(h,i.pendingProps),d=On(h.type,d),Tm(n,i,h,d,a);case 15:return Im(n,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:On(h,d),uu(n,i),i.tag=1,Qt(h)?(n=!0,Wl(i)):n=!1,Zs(i,a),pm(i,h,d),Oh(i,h,d,a),Lh(null,i,h,!0,n,a);case 19:return km(n,i,a);case 22:return Sm(n,i,a)}throw Error(t(156,i.tag))};function tg(n,i){return As(n,i)}function Ew(n,i,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,h){return new Ew(n,i,a,h)}function rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ww(n){if(typeof n=="function")return rd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===kt)return 14}return 2}function ni(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Eu(n,i,a,h,d,g){var E=2;if(h=n,typeof n=="function")rd(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case k:return Zi(a.children,d,g,i);case S:E=8,d|=8;break;case P:return n=wn(12,a,i,d|2),n.elementType=P,n.lanes=g,n;case R:return n=wn(13,a,i,d),n.elementType=R,n.lanes=g,n;case He:return n=wn(19,a,i,d),n.elementType=He,n.lanes=g,n;case Be:return wu(a,d,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:E=10;break e;case D:E=9;break e;case V:E=11;break e;case kt:E=14;break e;case Dt:E=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=wn(E,a,i,d),i.elementType=n,i.type=h,i.lanes=g,i}function Zi(n,i,a,h){return n=wn(7,n,h,i),n.lanes=a,n}function wu(n,i,a,h){return n=wn(22,n,h,i),n.elementType=Be,n.lanes=a,n.stateNode={isHidden:!1},n}function id(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function sd(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Tw(n,i,a,h,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lr(0),this.expirationTimes=Lr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function od(n,i,a,h,d,g,E,C,N){return n=new Tw(n,i,a,C,N),i===1?(i=1,g===!0&&(i|=8)):i=0,g=wn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(g),n}function Iw(n,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:h==null?null:""+h,children:n,containerInfo:i,implementation:a}}function ng(n){if(!n)return Gr;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Qt(a))return Np(n,a,i)}return i}function rg(n,i,a,h,d,g,E,C,N){return n=od(a,h,!0,n,d,g,E,C,N),n.context=ng(null),a=n.current,h=qt(),d=ei(a),g=_r(h,d),g.callback=i??null,Yr(a,g,d),n.current.lanes=d,Mr(n,d,h),Jt(n,h),n}function Tu(n,i,a,h){var d=i.current,g=qt(),E=ei(d);return a=ng(a),i.context===null?i.context=a:i.pendingContext=a,i=_r(g,E),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=Yr(d,i,E),n!==null&&(Vn(n,d,E,g),Zl(n,d,E)),E}function Iu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ig(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ad(n,i){ig(n,i),(n=n.alternate)&&ig(n,i)}function Sw(){return null}var sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ld(n){this._internalRoot=n}Su.prototype.render=ld.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Tu(n,i,null,null)},Su.prototype.unmount=ld.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Yi(function(){Tu(null,n,null,null)}),i[pr]=null}};function Su(n){this._internalRoot=n}Su.prototype.unstable_scheduleHydration=function(n){if(n){var i=Sl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<$n.length&&i!==0&&i<$n[a].priority;a++);$n.splice(a,0,n),a===0&&Rl(n)}};function ud(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function og(){}function Cw(n,i,a,h,d){if(d){if(typeof h=="function"){var g=h;h=function(){var $=Iu(E);g.call($)}}var E=rg(i,h,n,0,null,!1,!1,"",og);return n._reactRootContainer=E,n[pr]=E.current,ca(n.nodeType===8?n.parentNode:n),Yi(),E}for(;d=n.lastChild;)n.removeChild(d);if(typeof h=="function"){var C=h;h=function(){var $=Iu(N);C.call($)}}var N=od(n,0,!1,null,null,!1,!1,"",og);return n._reactRootContainer=N,n[pr]=N.current,ca(n.nodeType===8?n.parentNode:n),Yi(function(){Tu(i,N,a,h)}),N}function Au(n,i,a,h,d){var g=a._reactRootContainer;if(g){var E=g;if(typeof d=="function"){var C=d;d=function(){var N=Iu(E);C.call(N)}}Tu(i,E,n,d)}else E=Cw(a,i,n,d,h);return Iu(E)}Tl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Vr(i.pendingLanes);a!==0&&(Fr(i,a|1),Jt(i,qe()),(je&6)===0&&(io=qe()+500,Kr()))}break;case 13:Yi(function(){var h=vr(n,1);if(h!==null){var d=qt();Vn(h,n,1,d)}}),ad(n,1)}},xs=function(n){if(n.tag===13){var i=vr(n,134217728);if(i!==null){var a=qt();Vn(i,n,134217728,a)}ad(n,134217728)}},Il=function(n){if(n.tag===13){var i=ei(n),a=vr(n,i);if(a!==null){var h=qt();Vn(a,n,i,h)}ad(n,i)}},Sl=function(){return Ne},Cl=function(n,i){var a=Ne;try{return Ne=n,i()}finally{Ne=a}},Es=function(n,i,a){switch(i){case"input":if(jo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==n&&h.form===n.form){var d=$l(h);if(!d)throw Error(t(90));ps(h),jo(h,d)}}}break;case"textarea":vs(n,a);break;case"select":i=a.value,i!=null&&or(n,!!a.multiple,i,!1)}},Ni=ed,Wo=Yi;var Aw={usingClientEntryPoint:!1,Events:[fa,Ws,$l,Bn,qo,ed]},Ra={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rw={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ko(n),n===null?null:n.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||Sw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{ji=Ru.inject(Rw),rn=Ru}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aw,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(i))throw Error(t(200));return Iw(n,i,null,a)},Zt.createRoot=function(n,i){if(!ud(n))throw Error(t(299));var a=!1,h="",d=sg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=od(n,1,!1,null,null,a,!1,h,d),n[pr]=i.current,ca(n.nodeType===8?n.parentNode:n),new ld(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ko(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return Yi(n)},Zt.hydrate=function(n,i,a){if(!Cu(i))throw Error(t(200));return Au(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!ud(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,g="",E=sg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),i=rg(i,null,n,1,a??null,d,!1,g,E),n[pr]=i.current,ca(n),h)for(n=0;n<h.length;n++)a=h[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Su(i)},Zt.render=function(n,i,a){if(!Cu(i))throw Error(t(200));return Au(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Cu(n))throw Error(t(40));return n._reactRootContainer?(Yi(function(){Au(null,null,n,!1,function(){n._reactRootContainer=null,n[pr]=null})}),!0):!1},Zt.unstable_batchedUpdates=ed,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,h){if(!Cu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Au(n,i,a,!1,h)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var pg;function zy(){if(pg)return dd.exports;pg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dd.exports=Vw(),dd.exports}var mg;function Lw(){if(mg)return Pu;mg=1;var r=zy();return Pu.createRoot=r.createRoot,Pu.hydrateRoot=r.hydrateRoot,Pu}var Mw=Lw(),J=rf();const $y=Nw(J),Fw=xw({__proto__:null,default:$y},[J]);zy();/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ba.apply(this,arguments)}var ui;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ui||(ui={}));const gg="popstate";function Uw(r){r===void 0&&(r={});function e(o,l){let{pathname:c="/",search:f="",hash:p=""}=as(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Pd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Hu(l))}function s(o,l){sf(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return zw(e,t,s,r)}function nt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function sf(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Bw(){return Math.random().toString(36).substr(2,8)}function yg(r,e){return{usr:r.state,key:r.key,idx:e}}function Pd(r,e,t,s){return t===void 0&&(t=null),Ba({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?as(e):e,{state:t,key:e&&e.key||s||Bw()})}function Hu(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function as(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function zw(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f=ui.Pop,p=null,y=w();y==null&&(y=0,c.replaceState(Ba({},c.state,{idx:y}),""));function w(){return(c.state||{idx:null}).idx}function I(){f=ui.Pop;let b=w(),B=b==null?null:b-y;y=b,p&&p({action:f,location:U.location,delta:B})}function A(b,B){f=ui.Push;let H=Pd(U.location,b,B);t&&t(H,b),y=w()+1;let te=yg(H,y),ie=U.createHref(H);try{c.pushState(te,"",ie)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(ie)}l&&p&&p({action:f,location:U.location,delta:1})}function j(b,B){f=ui.Replace;let H=Pd(U.location,b,B);t&&t(H,b),y=w();let te=yg(H,y),ie=U.createHref(H);c.replaceState(te,"",ie),l&&p&&p({action:f,location:U.location,delta:0})}function q(b){let B=o.location.origin!=="null"?o.location.origin:o.location.href,H=typeof b=="string"?b:Hu(b);return H=H.replace(/ $/,"%20"),nt(B,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,B)}let U={get action(){return f},get location(){return r(o,c)},listen(b){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(gg,I),p=b,()=>{o.removeEventListener(gg,I),p=null}},createHref(b){return e(o,b)},createURL:q,encodeLocation(b){let B=q(b);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:A,replace:j,go(b){return c.go(b)}};return U}var vg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(vg||(vg={}));function $w(r,e,t){return t===void 0&&(t="/"),qw(r,e,t)}function qw(r,e,t,s){let o=typeof e=="string"?as(e):e,l=go(o.pathname||"/",t);if(l==null)return null;let c=qy(r);Ww(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let y=n0(l);f=e0(c[p],y)}return f}function qy(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(nt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=hi([s,p.relativePath]),w=t.concat(p);l.children&&l.children.length>0&&(nt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),qy(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Jw(y,l.index),routesMeta:w})};return r.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,c);else for(let p of Wy(l.path))o(l,c,p)}),e}function Wy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=Wy(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function Ww(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Zw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Hw=/^:[\w-]+$/,Gw=3,Kw=2,Qw=1,Yw=10,Xw=-2,_g=r=>r==="*";function Jw(r,e){let t=r.split("/"),s=t.length;return t.some(_g)&&(s+=Xw),e&&(s+=Kw),t.filter(o=>!_g(o)).reduce((o,l)=>o+(Hw.test(l)?Gw:l===""?Qw:Yw),s)}function Zw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function e0(r,e,t){let{routesMeta:s}=r,o={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",I=xd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),A=p.route;if(!I)return null;Object.assign(o,I.params),c.push({params:o,pathname:hi([l,I.pathname]),pathnameBase:o0(hi([l,I.pathnameBase])),route:A}),I.pathnameBase!=="/"&&(l=hi([l,I.pathnameBase]))}return c}function xd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=t0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,w,I)=>{let{paramName:A,isOptional:j}=w;if(A==="*"){let U=f[I]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const q=f[I];return j&&!q?y[A]=void 0:y[A]=(q||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:r}}function t0(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),sf(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function n0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sf(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function go(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function r0(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?as(r):r;return{pathname:t?t.startsWith("/")?t:i0(t,e):e,search:a0(s),hash:l0(o)}}function i0(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function md(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Hy(r,e){let t=s0(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Gy(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=as(r):(o=Ba({},r),nt(!o.pathname||!o.pathname.includes("?"),md("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),md("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),md("#","search","hash",o)));let l=r===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let I=e.length-1;if(!s&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),I-=1;o.pathname=A.join("/")}f=I>=0?e[I]:"/"}let p=r0(o,f),y=c&&c!=="/"&&c.endsWith("/"),w=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}const hi=r=>r.join("/").replace(/\/\/+/g,"/"),o0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),a0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,l0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function u0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Ky=["post","put","patch","delete"];new Set(Ky);const c0=["get",...Ky];new Set(c0);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},za.apply(this,arguments)}const dc=J.createContext(null),Qy=J.createContext(null),wi=J.createContext(null),fc=J.createContext(null),ls=J.createContext({outlet:null,matches:[],isDataRoute:!1}),Yy=J.createContext(null);function h0(r,e){let{relative:t}=e===void 0?{}:e;Za()||nt(!1);let{basename:s,navigator:o}=J.useContext(wi),{hash:l,pathname:c,search:f}=pc(r,{relative:t}),p=c;return s!=="/"&&(p=c==="/"?s:hi([s,c])),o.createHref({pathname:p,search:f,hash:l})}function Za(){return J.useContext(fc)!=null}function Co(){return Za()||nt(!1),J.useContext(fc).location}function Xy(r){J.useContext(wi).static||J.useLayoutEffect(r)}function of(){let{isDataRoute:r}=J.useContext(ls);return r?S0():d0()}function d0(){Za()||nt(!1);let r=J.useContext(dc),{basename:e,future:t,navigator:s}=J.useContext(wi),{matches:o}=J.useContext(ls),{pathname:l}=Co(),c=JSON.stringify(Hy(o,t.v7_relativeSplatPath)),f=J.useRef(!1);return Xy(()=>{f.current=!0}),J.useCallback(function(y,w){if(w===void 0&&(w={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let I=Gy(y,JSON.parse(c),l,w.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:hi([e,I.pathname])),(w.replace?s.replace:s.push)(I,w.state,w)},[e,s,c,l,r])}function pc(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=J.useContext(wi),{matches:o}=J.useContext(ls),{pathname:l}=Co(),c=JSON.stringify(Hy(o,s.v7_relativeSplatPath));return J.useMemo(()=>Gy(r,JSON.parse(c),l,t==="path"),[r,c,l,t])}function f0(r,e){return p0(r,e)}function p0(r,e,t,s){Za()||nt(!1);let{navigator:o}=J.useContext(wi),{matches:l}=J.useContext(ls),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=Co(),w;if(e){var I;let b=typeof e=="string"?as(e):e;p==="/"||(I=b.pathname)!=null&&I.startsWith(p)||nt(!1),w=b}else w=y;let A=w.pathname||"/",j=A;if(p!=="/"){let b=p.replace(/^\//,"").split("/");j="/"+A.replace(/^\//,"").split("/").slice(b.length).join("/")}let q=$w(r,{pathname:j}),U=_0(q&&q.map(b=>Object.assign({},b,{params:Object.assign({},f,b.params),pathname:hi([p,o.encodeLocation?o.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?p:hi([p,o.encodeLocation?o.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,t,s);return e&&U?J.createElement(fc.Provider,{value:{location:za({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:ui.Pop}},U):U}function m0(){let r=I0(),e=u0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:o},t):null,null)}const g0=J.createElement(m0,null);class y0 extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(ls.Provider,{value:this.props.routeContext},J.createElement(Yy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v0(r){let{routeContext:e,match:t,children:s}=r,o=J.useContext(dc);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(ls.Provider,{value:e},s)}function _0(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let c=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let w=c.findIndex(I=>I.route.id&&(f==null?void 0:f[I.route.id])!==void 0);w>=0||nt(!1),c=c.slice(0,Math.min(c.length,w+1))}let p=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<c.length;w++){let I=c[w];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(y=w),I.route.id){let{loaderData:A,errors:j}=t,q=I.route.loader&&A[I.route.id]===void 0&&(!j||j[I.route.id]===void 0);if(I.route.lazy||q){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((w,I,A)=>{let j,q=!1,U=null,b=null;t&&(j=f&&I.route.id?f[I.route.id]:void 0,U=I.route.errorElement||g0,p&&(y<0&&A===0?(C0("route-fallback"),q=!0,b=null):y===A&&(q=!0,b=I.route.hydrateFallbackElement||null)));let B=e.concat(c.slice(0,A+1)),H=()=>{let te;return j?te=U:q?te=b:I.route.Component?te=J.createElement(I.route.Component,null):I.route.element?te=I.route.element:te=w,J.createElement(v0,{match:I,routeContext:{outlet:w,matches:B,isDataRoute:t!=null},children:te})};return t&&(I.route.ErrorBoundary||I.route.errorElement||A===0)?J.createElement(y0,{location:t.location,revalidation:t.revalidation,component:U,error:j,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):H()},null)}var Jy=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Jy||{}),Zy=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Zy||{});function E0(r){let e=J.useContext(dc);return e||nt(!1),e}function w0(r){let e=J.useContext(Qy);return e||nt(!1),e}function T0(r){let e=J.useContext(ls);return e||nt(!1),e}function ev(r){let e=T0(),t=e.matches[e.matches.length-1];return t.route.id||nt(!1),t.route.id}function I0(){var r;let e=J.useContext(Yy),t=w0(),s=ev();return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function S0(){let{router:r}=E0(Jy.UseNavigateStable),e=ev(Zy.UseNavigateStable),t=J.useRef(!1);return Xy(()=>{t.current=!0}),J.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,za({fromRouteId:e},l)))},[r,e])}const Eg={};function C0(r,e,t){Eg[r]||(Eg[r]=!0)}function xa(r){nt(!1)}function A0(r){let{basename:e="/",children:t=null,location:s,navigationType:o=ui.Pop,navigator:l,static:c=!1,future:f}=r;Za()&&nt(!1);let p=e.replace(/^\/*/,"/"),y=J.useMemo(()=>({basename:p,navigator:l,static:c,future:za({v7_relativeSplatPath:!1},f)}),[p,f,l,c]);typeof s=="string"&&(s=as(s));let{pathname:w="/",search:I="",hash:A="",state:j=null,key:q="default"}=s,U=J.useMemo(()=>{let b=go(w,p);return b==null?null:{location:{pathname:b,search:I,hash:A,state:j,key:q},navigationType:o}},[p,w,I,A,j,q,o]);return U==null?null:J.createElement(wi.Provider,{value:y},J.createElement(fc.Provider,{children:t,value:U}))}function R0(r){let{children:e,location:t}=r;return f0(Nd(e),t)}new Promise(()=>{});function Nd(r,e){e===void 0&&(e=[]);let t=[];return J.Children.forEach(r,(s,o)=>{if(!J.isValidElement(s))return;let l=[...e,o];if(s.type===J.Fragment){t.push.apply(t,Nd(s.props.children,l));return}s.type!==xa&&nt(!1),!s.props.index||!s.props.children||nt(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Nd(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gu(){return Gu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Gu.apply(this,arguments)}function tv(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function P0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function x0(r,e){return r.button===0&&(!e||e==="_self")&&!P0(r)}const N0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],k0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],D0="6";try{window.__reactRouterVersion=D0}catch{}const O0=J.createContext({isTransitioning:!1}),b0="startTransition",wg=Fw[b0];function j0(r){let{basename:e,children:t,future:s,window:o}=r,l=J.useRef();l.current==null&&(l.current=Uw({window:o,v5Compat:!0}));let c=l.current,[f,p]=J.useState({action:c.action,location:c.location}),{v7_startTransition:y}=s||{},w=J.useCallback(I=>{y&&wg?wg(()=>p(I)):p(I)},[p,y]);return J.useLayoutEffect(()=>c.listen(w),[c,w]),J.createElement(A0,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:s})}const V0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nv=J.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:f,target:p,to:y,preventScrollReset:w,viewTransition:I}=e,A=tv(e,N0),{basename:j}=J.useContext(wi),q,U=!1;if(typeof y=="string"&&L0.test(y)&&(q=y,V0))try{let te=new URL(window.location.href),ie=y.startsWith("//")?new URL(te.protocol+y):new URL(y),fe=go(ie.pathname,j);ie.origin===te.origin&&fe!=null?y=fe+ie.search+ie.hash:U=!0}catch{}let b=h0(y,{relative:o}),B=F0(y,{replace:c,state:f,target:p,preventScrollReset:w,relative:o,viewTransition:I});function H(te){s&&s(te),te.defaultPrevented||B(te)}return J.createElement("a",Gu({},A,{href:q||b,onClick:U||l?s:H,ref:t,target:p}))}),xu=J.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:o=!1,className:l="",end:c=!1,style:f,to:p,viewTransition:y,children:w}=e,I=tv(e,k0),A=pc(p,{relative:I.relative}),j=Co(),q=J.useContext(Qy),{navigator:U,basename:b}=J.useContext(wi),B=q!=null&&U0(A)&&y===!0,H=U.encodeLocation?U.encodeLocation(A).pathname:A.pathname,te=j.pathname,ie=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;o||(te=te.toLowerCase(),ie=ie?ie.toLowerCase():null,H=H.toLowerCase()),ie&&b&&(ie=go(ie,b)||ie);const fe=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let _e=te===H||!c&&te.startsWith(H)&&te.charAt(fe)==="/",k=ie!=null&&(ie===H||!c&&ie.startsWith(H)&&ie.charAt(H.length)==="/"),S={isActive:_e,isPending:k,isTransitioning:B},P=_e?s:void 0,x;typeof l=="function"?x=l(S):x=[l,_e?"active":null,k?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let D=typeof f=="function"?f(S):f;return J.createElement(nv,Gu({},I,{"aria-current":P,className:x,ref:t,style:D,to:p,viewTransition:y}),typeof w=="function"?w(S):w)});var kd;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(kd||(kd={}));var Tg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Tg||(Tg={}));function M0(r){let e=J.useContext(dc);return e||nt(!1),e}function F0(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,p=of(),y=Co(),w=pc(r,{relative:c});return J.useCallback(I=>{if(x0(I,t)){I.preventDefault();let A=s!==void 0?s:Hu(y)===Hu(w);p(r,{replace:A,state:o,preventScrollReset:l,relative:c,viewTransition:f})}},[y,p,w,s,o,t,r,l,c,f])}function U0(r,e){e===void 0&&(e={});let t=J.useContext(O0);t==null&&nt(!1);let{basename:s}=M0(kd.useViewTransitionState),o=pc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=go(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=go(t.nextLocation.pathname,s)||t.nextLocation.pathname;return xd(o.pathname,c)!=null||xd(o.pathname,l)!=null}var Ig={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},B0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},iv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,f=c?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,w=l>>2,I=(l&3)<<4|f>>4;let A=(f&15)<<2|y>>6,j=y&63;p||(j=64,c||(A=64)),s.push(t[w],t[I],t[A],t[j])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(rv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):B0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||I==null)throw new z0;const A=l<<2|f>>4;if(s.push(A),y!==64){const j=f<<4&240|y>>2;if(s.push(j),I!==64){const q=y<<6&192|I;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class z0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $0=function(r){const e=rv(r);return iv.encodeByteArray(e,!0)},Ku=function(r){return $0(r).replace(/\./g,"")},sv=function(r){try{return iv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=()=>q0().__FIREBASE_DEFAULTS__,H0=()=>{if(typeof process>"u"||typeof Ig>"u")return;const r=Ig.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},G0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&sv(r[1]);return e&&JSON.parse(e)},mc=()=>{try{return W0()||H0()||G0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ov=r=>{var e,t;return(t=(e=mc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},K0=r=>{const e=ov(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},av=()=>{var r;return(r=mc())===null||r===void 0?void 0:r.config},lv=r=>{var e;return(e=mc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ku(JSON.stringify(t)),Ku(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function J0(){var r;const e=(r=mc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function tT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nT(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rT(){return!J0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iT(){try{return typeof indexedDB=="object"}catch{return!1}}function sT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="FirebaseError";class Dr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=oT,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?aT(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new Dr(o,f,s)}}function aT(r,e){return r.replace(lT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const lT=/\{\$([^}]+)}/g;function uT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Qu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],c=e[o];if(Sg(l)&&Sg(c)){if(!Qu(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Sg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Na(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function ka(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function cT(r,e){const t=new hT(r,e);return t.subscribe.bind(t)}class hT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");dT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=gd),o.error===void 0&&(o.error=gd),o.complete===void 0&&(o.complete=gd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function gd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r){return r&&r._delegate?r._delegate:r}class rs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Q0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mT(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:pT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pT(r){return r===es?void 0:r}function mT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const yT={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},vT=Pe.INFO,_T={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ET=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=_T[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class af{constructor(e){this.name=e,this._logLevel=vT,this._logHandler=ET,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const wT=(r,e)=>e.some(t=>r instanceof t);let Cg,Ag;function TT(){return Cg||(Cg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IT(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uv=new WeakMap,Dd=new WeakMap,cv=new WeakMap,yd=new WeakMap,lf=new WeakMap;function ST(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(di(r.result)),o()},c=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&uv.set(t,r)}).catch(()=>{}),lf.set(e,r),e}function CT(r){if(Dd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Dd.set(r,e)}let Od={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Dd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return di(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function AT(r){Od=r(Od)}function RT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(vd(this),e,...t);return cv.set(s,e.sort?e.sort():[e]),di(s)}:IT().includes(r)?function(...e){return r.apply(vd(this),e),di(uv.get(this))}:function(...e){return di(r.apply(vd(this),e))}}function PT(r){return typeof r=="function"?RT(r):(r instanceof IDBTransaction&&CT(r),wT(r,TT())?new Proxy(r,Od):r)}function di(r){if(r instanceof IDBRequest)return ST(r);if(yd.has(r))return yd.get(r);const e=PT(r);return e!==r&&(yd.set(r,e),lf.set(e,r)),e}const vd=r=>lf.get(r);function xT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),f=di(c);return s&&c.addEventListener("upgradeneeded",p=>{s(di(c.result),p.oldVersion,p.newVersion,di(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const NT=["get","getKey","getAll","getAllKeys","count"],kT=["put","add","delete","clear"],_d=new Map;function Rg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=kT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||NT.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return _d.set(e,l),l}AT(r=>({...r,get:(e,t,s)=>Rg(e,t)||r.get(e,t,s),has:(e,t)=>!!Rg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function OT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bd="@firebase/app",Pg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new af("@firebase/app"),bT="@firebase/app-compat",jT="@firebase/analytics-compat",VT="@firebase/analytics",LT="@firebase/app-check-compat",MT="@firebase/app-check",FT="@firebase/auth",UT="@firebase/auth-compat",BT="@firebase/database",zT="@firebase/data-connect",$T="@firebase/database-compat",qT="@firebase/functions",WT="@firebase/functions-compat",HT="@firebase/installations",GT="@firebase/installations-compat",KT="@firebase/messaging",QT="@firebase/messaging-compat",YT="@firebase/performance",XT="@firebase/performance-compat",JT="@firebase/remote-config",ZT="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",rI="@firebase/vertexai",iI="@firebase/firestore-compat",sI="firebase",oI="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",aI={[bd]:"fire-core",[bT]:"fire-core-compat",[VT]:"fire-analytics",[jT]:"fire-analytics-compat",[MT]:"fire-app-check",[LT]:"fire-app-check-compat",[FT]:"fire-auth",[UT]:"fire-auth-compat",[BT]:"fire-rtdb",[zT]:"fire-data-connect",[$T]:"fire-rtdb-compat",[qT]:"fire-fn",[WT]:"fire-fn-compat",[HT]:"fire-iid",[GT]:"fire-iid-compat",[KT]:"fire-fcm",[QT]:"fire-fcm-compat",[YT]:"fire-perf",[XT]:"fire-perf-compat",[JT]:"fire-rc",[ZT]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[iI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,lI=new Map,Vd=new Map;function xg(r,e){try{r.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function yo(r){const e=r.name;if(Vd.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Vd.set(e,r);for(const t of Yu.values())xg(t,r);for(const t of lI.values())xg(t,r);return!0}function uf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Xn(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new el("app","Firebase",uI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=oI;function hv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:jd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(t||(t=av()),!t)throw fi.create("no-options");const l=Yu.get(o);if(l){if(Qu(t,l.options)&&Qu(s,l.config))return l;throw fi.create("duplicate-app",{appName:o})}const c=new gT(o);for(const p of Vd.values())c.addComponent(p);const f=new cI(t,s,c);return Yu.set(o,f),f}function dv(r=jd){const e=Yu.get(r);if(!e&&r===jd&&av())return hv();if(!e)throw fi.create("no-app",{appName:r});return e}function pi(r,e,t){var s;let o=(s=aI[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(f.join(" "));return}yo(new rs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firebase-heartbeat-database",dI=1,$a="firebase-heartbeat-store";let Ed=null;function fv(){return Ed||(Ed=xT(hI,dI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($a)}catch(t){console.warn(t)}}}}).catch(r=>{throw fi.create("idb-open",{originalErrorMessage:r.message})})),Ed}async function fI(r){try{const t=(await fv()).transaction($a),s=await t.objectStore($a).get(pv(r));return await t.done,s}catch(e){if(e instanceof Dr)Rr.warn(e.message);else{const t=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(t.message)}}}async function Ng(r,e){try{const s=(await fv()).transaction($a,"readwrite");await s.objectStore($a).put(e,pv(r)),await s.done}catch(t){if(t instanceof Dr)Rr.warn(t.message);else{const s=fi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(s.message)}}}function pv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=1024,mI=30*24*60*60*1e3;class gI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=kg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=mI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Rr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kg(),{heartbeatsToSend:s,unsentEntries:o}=yI(this._heartbeatsCache.heartbeats),l=Ku(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Rr.warn(t),""}}}function kg(){return new Date().toISOString().substring(0,10)}function yI(r,e=pI){const t=[];let s=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Dg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Dg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class vI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iT()?sT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Dg(r){return Ku(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(r){yo(new rs("platform-logger",e=>new DT(e),"PRIVATE")),yo(new rs("heartbeat",e=>new gI(e),"PRIVATE")),pi(bd,Pg,r),pi(bd,Pg,"esm2017"),pi("fire-js","")}_I("");var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,mv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function P(){}P.prototype=S.prototype,k.D=S.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(x,D,V){for(var R=Array(arguments.length-2),He=2;He<arguments.length;He++)R[He-2]=arguments[He];return S.prototype[D].apply(x,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,P){P||(P=0);var x=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)x[D]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(D=0;16>D;++D)x[D]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=k.g[0],P=k.g[1],D=k.g[2];var V=k.g[3],R=S+(V^P&(D^V))+x[0]+3614090360&4294967295;S=P+(R<<7&4294967295|R>>>25),R=V+(D^S&(P^D))+x[1]+3905402710&4294967295,V=S+(R<<12&4294967295|R>>>20),R=D+(P^V&(S^P))+x[2]+606105819&4294967295,D=V+(R<<17&4294967295|R>>>15),R=P+(S^D&(V^S))+x[3]+3250441966&4294967295,P=D+(R<<22&4294967295|R>>>10),R=S+(V^P&(D^V))+x[4]+4118548399&4294967295,S=P+(R<<7&4294967295|R>>>25),R=V+(D^S&(P^D))+x[5]+1200080426&4294967295,V=S+(R<<12&4294967295|R>>>20),R=D+(P^V&(S^P))+x[6]+2821735955&4294967295,D=V+(R<<17&4294967295|R>>>15),R=P+(S^D&(V^S))+x[7]+4249261313&4294967295,P=D+(R<<22&4294967295|R>>>10),R=S+(V^P&(D^V))+x[8]+1770035416&4294967295,S=P+(R<<7&4294967295|R>>>25),R=V+(D^S&(P^D))+x[9]+2336552879&4294967295,V=S+(R<<12&4294967295|R>>>20),R=D+(P^V&(S^P))+x[10]+4294925233&4294967295,D=V+(R<<17&4294967295|R>>>15),R=P+(S^D&(V^S))+x[11]+2304563134&4294967295,P=D+(R<<22&4294967295|R>>>10),R=S+(V^P&(D^V))+x[12]+1804603682&4294967295,S=P+(R<<7&4294967295|R>>>25),R=V+(D^S&(P^D))+x[13]+4254626195&4294967295,V=S+(R<<12&4294967295|R>>>20),R=D+(P^V&(S^P))+x[14]+2792965006&4294967295,D=V+(R<<17&4294967295|R>>>15),R=P+(S^D&(V^S))+x[15]+1236535329&4294967295,P=D+(R<<22&4294967295|R>>>10),R=S+(D^V&(P^D))+x[1]+4129170786&4294967295,S=P+(R<<5&4294967295|R>>>27),R=V+(P^D&(S^P))+x[6]+3225465664&4294967295,V=S+(R<<9&4294967295|R>>>23),R=D+(S^P&(V^S))+x[11]+643717713&4294967295,D=V+(R<<14&4294967295|R>>>18),R=P+(V^S&(D^V))+x[0]+3921069994&4294967295,P=D+(R<<20&4294967295|R>>>12),R=S+(D^V&(P^D))+x[5]+3593408605&4294967295,S=P+(R<<5&4294967295|R>>>27),R=V+(P^D&(S^P))+x[10]+38016083&4294967295,V=S+(R<<9&4294967295|R>>>23),R=D+(S^P&(V^S))+x[15]+3634488961&4294967295,D=V+(R<<14&4294967295|R>>>18),R=P+(V^S&(D^V))+x[4]+3889429448&4294967295,P=D+(R<<20&4294967295|R>>>12),R=S+(D^V&(P^D))+x[9]+568446438&4294967295,S=P+(R<<5&4294967295|R>>>27),R=V+(P^D&(S^P))+x[14]+3275163606&4294967295,V=S+(R<<9&4294967295|R>>>23),R=D+(S^P&(V^S))+x[3]+4107603335&4294967295,D=V+(R<<14&4294967295|R>>>18),R=P+(V^S&(D^V))+x[8]+1163531501&4294967295,P=D+(R<<20&4294967295|R>>>12),R=S+(D^V&(P^D))+x[13]+2850285829&4294967295,S=P+(R<<5&4294967295|R>>>27),R=V+(P^D&(S^P))+x[2]+4243563512&4294967295,V=S+(R<<9&4294967295|R>>>23),R=D+(S^P&(V^S))+x[7]+1735328473&4294967295,D=V+(R<<14&4294967295|R>>>18),R=P+(V^S&(D^V))+x[12]+2368359562&4294967295,P=D+(R<<20&4294967295|R>>>12),R=S+(P^D^V)+x[5]+4294588738&4294967295,S=P+(R<<4&4294967295|R>>>28),R=V+(S^P^D)+x[8]+2272392833&4294967295,V=S+(R<<11&4294967295|R>>>21),R=D+(V^S^P)+x[11]+1839030562&4294967295,D=V+(R<<16&4294967295|R>>>16),R=P+(D^V^S)+x[14]+4259657740&4294967295,P=D+(R<<23&4294967295|R>>>9),R=S+(P^D^V)+x[1]+2763975236&4294967295,S=P+(R<<4&4294967295|R>>>28),R=V+(S^P^D)+x[4]+1272893353&4294967295,V=S+(R<<11&4294967295|R>>>21),R=D+(V^S^P)+x[7]+4139469664&4294967295,D=V+(R<<16&4294967295|R>>>16),R=P+(D^V^S)+x[10]+3200236656&4294967295,P=D+(R<<23&4294967295|R>>>9),R=S+(P^D^V)+x[13]+681279174&4294967295,S=P+(R<<4&4294967295|R>>>28),R=V+(S^P^D)+x[0]+3936430074&4294967295,V=S+(R<<11&4294967295|R>>>21),R=D+(V^S^P)+x[3]+3572445317&4294967295,D=V+(R<<16&4294967295|R>>>16),R=P+(D^V^S)+x[6]+76029189&4294967295,P=D+(R<<23&4294967295|R>>>9),R=S+(P^D^V)+x[9]+3654602809&4294967295,S=P+(R<<4&4294967295|R>>>28),R=V+(S^P^D)+x[12]+3873151461&4294967295,V=S+(R<<11&4294967295|R>>>21),R=D+(V^S^P)+x[15]+530742520&4294967295,D=V+(R<<16&4294967295|R>>>16),R=P+(D^V^S)+x[2]+3299628645&4294967295,P=D+(R<<23&4294967295|R>>>9),R=S+(D^(P|~V))+x[0]+4096336452&4294967295,S=P+(R<<6&4294967295|R>>>26),R=V+(P^(S|~D))+x[7]+1126891415&4294967295,V=S+(R<<10&4294967295|R>>>22),R=D+(S^(V|~P))+x[14]+2878612391&4294967295,D=V+(R<<15&4294967295|R>>>17),R=P+(V^(D|~S))+x[5]+4237533241&4294967295,P=D+(R<<21&4294967295|R>>>11),R=S+(D^(P|~V))+x[12]+1700485571&4294967295,S=P+(R<<6&4294967295|R>>>26),R=V+(P^(S|~D))+x[3]+2399980690&4294967295,V=S+(R<<10&4294967295|R>>>22),R=D+(S^(V|~P))+x[10]+4293915773&4294967295,D=V+(R<<15&4294967295|R>>>17),R=P+(V^(D|~S))+x[1]+2240044497&4294967295,P=D+(R<<21&4294967295|R>>>11),R=S+(D^(P|~V))+x[8]+1873313359&4294967295,S=P+(R<<6&4294967295|R>>>26),R=V+(P^(S|~D))+x[15]+4264355552&4294967295,V=S+(R<<10&4294967295|R>>>22),R=D+(S^(V|~P))+x[6]+2734768916&4294967295,D=V+(R<<15&4294967295|R>>>17),R=P+(V^(D|~S))+x[13]+1309151649&4294967295,P=D+(R<<21&4294967295|R>>>11),R=S+(D^(P|~V))+x[4]+4149444226&4294967295,S=P+(R<<6&4294967295|R>>>26),R=V+(P^(S|~D))+x[11]+3174756917&4294967295,V=S+(R<<10&4294967295|R>>>22),R=D+(S^(V|~P))+x[2]+718787259&4294967295,D=V+(R<<15&4294967295|R>>>17),R=P+(V^(D|~S))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+V&4294967295}s.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var P=S-this.blockSize,x=this.B,D=this.h,V=0;V<S;){if(D==0)for(;V<=P;)o(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<S;)if(x[D++]=k.charCodeAt(V++),D==this.blockSize){o(this,x),D=0;break}}else for(;V<S;)if(x[D++]=k[V++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=S},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var P=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=P&255,P/=256;for(this.u(k),k=Array(16),S=P=0;4>S;++S)for(var x=0;32>x;x+=8)k[P++]=this.g[S]>>>x&255;return k};function l(k,S){var P=f;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=S(k)}function c(k,S){this.h=S;for(var P=[],x=!0,D=k.length-1;0<=D;D--){var V=k[D]|0;x&&V==S||(P[D]=V,x=!1)}this.g=P}var f={};function p(k){return-128<=k&&128>k?l(k,function(S){return new c([S|0],0>S?-1:0)}):new c([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return I;if(0>k)return b(y(-k));for(var S=[],P=1,x=0;k>=P;x++)S[x]=k/P|0,P*=4294967296;return new c(S,0)}function w(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return b(w(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(S,8)),x=I,D=0;D<k.length;D+=8){var V=Math.min(8,k.length-D),R=parseInt(k.substring(D,D+V),S);8>V?(V=y(Math.pow(S,V)),x=x.j(V).add(y(R))):(x=x.j(P),x=x.add(y(R)))}return x}var I=p(0),A=p(1),j=p(16777216);r=c.prototype,r.m=function(){if(U(this))return-b(this).m();for(var k=0,S=1,P=0;P<this.g.length;P++){var x=this.i(P);k+=(0<=x?x:4294967296+x)*S,S*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(q(this))return"0";if(U(this))return"-"+b(this).toString(k);for(var S=y(Math.pow(k,6)),P=this,x="";;){var D=ie(P,S).g;P=B(P,D.j(S));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=D,q(P))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function q(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function U(k){return k.h==-1}r.l=function(k){return k=B(this,k),U(k)?-1:q(k)?0:1};function b(k){for(var S=k.g.length,P=[],x=0;x<S;x++)P[x]=~k.g[x];return new c(P,~k.h).add(A)}r.abs=function(){return U(this)?b(this):this},r.add=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0,D=0;D<=S;D++){var V=x+(this.i(D)&65535)+(k.i(D)&65535),R=(V>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);x=R>>>16,V&=65535,R&=65535,P[D]=R<<16|V}return new c(P,P[P.length-1]&-2147483648?-1:0)};function B(k,S){return k.add(b(S))}r.j=function(k){if(q(this)||q(k))return I;if(U(this))return U(k)?b(this).j(b(k)):b(b(this).j(k));if(U(k))return b(this.j(b(k)));if(0>this.l(j)&&0>k.l(j))return y(this.m()*k.m());for(var S=this.g.length+k.g.length,P=[],x=0;x<2*S;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var D=0;D<k.g.length;D++){var V=this.i(x)>>>16,R=this.i(x)&65535,He=k.i(D)>>>16,kt=k.i(D)&65535;P[2*x+2*D]+=R*kt,H(P,2*x+2*D),P[2*x+2*D+1]+=V*kt,H(P,2*x+2*D+1),P[2*x+2*D+1]+=R*He,H(P,2*x+2*D+1),P[2*x+2*D+2]+=V*He,H(P,2*x+2*D+2)}for(x=0;x<S;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=S;x<2*S;x++)P[x]=0;return new c(P,0)};function H(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function te(k,S){this.g=k,this.h=S}function ie(k,S){if(q(S))throw Error("division by zero");if(q(k))return new te(I,I);if(U(k))return S=ie(b(k),S),new te(b(S.g),b(S.h));if(U(S))return S=ie(k,b(S)),new te(b(S.g),S.h);if(30<k.g.length){if(U(k)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var P=A,x=S;0>=x.l(k);)P=fe(P),x=fe(x);var D=_e(P,1),V=_e(x,1);for(x=_e(x,2),P=_e(P,2);!q(x);){var R=V.add(x);0>=R.l(k)&&(D=D.add(P),V=R),x=_e(x,1),P=_e(P,1)}return S=B(k,D.j(S)),new te(D,S)}for(D=I;0<=k.l(S);){for(P=Math.max(1,Math.floor(k.m()/S.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=y(P),R=V.j(S);U(R)||0<R.l(k);)P-=x,V=y(P),R=V.j(S);q(V)&&(V=A),D=D.add(V),k=B(k,R)}return new te(D,k)}r.A=function(k){return ie(this,k).h},r.and=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)&k.i(x);return new c(P,this.h&k.h)},r.or=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)|k.i(x);return new c(P,this.h|k.h)},r.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)^k.i(x);return new c(P,this.h^k.h)};function fe(k){for(var S=k.g.length+1,P=[],x=0;x<S;x++)P[x]=k.i(x)<<1|k.i(x-1)>>>31;return new c(P,k.h)}function _e(k,S){var P=S>>5;S%=32;for(var x=k.g.length-P,D=[],V=0;V<x;V++)D[V]=0<S?k.i(V+P)>>>S|k.i(V+P+1)<<32-S:k.i(V+P);return new c(D,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mv=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=w,ns=c}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gv,Da,yv,Vu,Ld,vv,_v,Ev;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in _))break e;_=_[M]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,T=!1,M={next:function(){if(!T&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,_){return u.call.apply(u.bind,arguments)}function I(u,m,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function A(u,m,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:I,A.apply(null,arguments)}function j(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function q(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,M,W){for(var ne=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ne[Ue-2]=arguments[Ue];return m.prototype[M].apply(T,ne)}}function U(u){const m=u.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function b(u,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(p(T)){const M=u.length||0,W=T.length||0;u.length=M+W;for(let ne=0;ne<W;ne++)u[M+ne]=T[ne]}else u.push(T)}}class B{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ie(u){return ie[" "](u),u}ie[" "]=function(){};var fe=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function _e(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function k(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let _,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(_ in T)u[_]=T[_];for(let W=0;W<P.length;W++)_=P[W],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function V(u){f.setTimeout(()=>{throw u},0)}function R(){var u=ge;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class He{constructor(){this.h=this.g=null}add(m,_){const T=kt.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var kt=new B(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,re=!1,ge=new He,ae=()=>{const u=f.Promise.resolve(void 0);Be=()=>{u.then(L)}};var L=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){V(_)}var m=kt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u}();function Ae(u,m){if(pe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(fe){e:{try{ie(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}q(Ae,pe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function $e(u,m,_,T,M){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=M,this.key=++Me,this.da=this.fa=!1}function yt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ir(u){this.src=u,this.g={},this.h=0}ir.prototype.add=function(u,m,_,T,M){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ne=Or(u,m,T,M);return-1<ne?(m=u[ne],_||(m.fa=!1)):(m=new $e(m,this.src,W,!!T,M),m.fa=_,u.push(m)),m};function ps(u,m){var _=m.type;if(_ in u.g){var T=u.g[_],M=Array.prototype.indexOf.call(T,m,void 0),W;(W=0<=M)&&Array.prototype.splice.call(T,M,1),W&&(yt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Or(u,m,_,T){for(var M=0;M<u.length;++M){var W=u[M];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==T)return M}return-1}var Ai="closure_lm_"+(1e6*Math.random()|0),ms={};function bo(u,m,_,T,M){if(Array.isArray(m)){for(var W=0;W<m.length;W++)bo(u,m[W],_,T,M);return null}return _=Lo(_),u&&u[Le]?u.K(m,_,y(T)?!!T.capture:!1,M):jo(u,m,_,!1,T,M)}function jo(u,m,_,T,M,W){if(!m)throw Error("Invalid event type");var ne=y(M)?!!M.capture:!!M,Ue=ys(u);if(Ue||(u[Ai]=Ue=new ir(u)),_=Ue.add(m,_,T,ne,W),_.proxy)return _;if(T=fl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Ce||(M=ne),M===void 0&&(M=!1),u.addEventListener(m.toString(),T,M);else if(u.attachEvent)u.attachEvent(or(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function fl(){function u(_){return m.call(u.src,u.listener,_)}const m=Vo;return u}function gs(u,m,_,T,M){if(Array.isArray(m))for(var W=0;W<m.length;W++)gs(u,m[W],_,T,M);else T=y(T)?!!T.capture:!!T,_=Lo(_),u&&u[Le]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=Or(W,_,T,M),-1<_&&(yt(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=ys(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Or(m,_,T,M)),(_=-1<u?m[u]:null)&&sr(_))}function sr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Le])ps(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(or(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=ys(m))?(ps(_,u),_.h==0&&(_.src=null,m[Ai]=null)):yt(u)}}}function or(u){return u in ms?ms[u]:ms[u]="on"+u}function Vo(u,m){if(u.da)u=!0;else{m=new Ae(m,this);var _=u.listener,T=u.ha||u.src;u.fa&&sr(u),u=_.call(T,m)}return u}function ys(u){return u=u[Ai],u instanceof ir?u:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(u){return typeof u=="function"?u:(u[vs]||(u[vs]=function(m){return u.handleEvent(m)}),u[vs])}function ct(){Q.call(this),this.i=new ir(this),this.M=this,this.F=null}q(ct,Q),ct.prototype[Le]=!0,ct.prototype.removeEventListener=function(u,m,_,T){gs(this,u,m,_,T)};function ht(u,m){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new pe(m,u);else if(m instanceof pe)m.target=m.target||u;else{var M=m;m=new pe(T,u),x(m,M)}if(M=!0,_)for(var W=_.length-1;0<=W;W--){var ne=m.g=_[W];M=ar(ne,T,!0,m)&&M}if(ne=m.g=u,M=ar(ne,T,!0,m)&&M,M=ar(ne,T,!1,m)&&M,_)for(W=0;W<_.length;W++)ne=m.g=_[W],M=ar(ne,T,!1,m)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],T=0;T<_.length;T++)yt(_[T]);delete u.g[m],u.h--}}this.F=null},ct.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ct.prototype.L=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function ar(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,W=0;W<m.length;++W){var ne=m[W];if(ne&&!ne.da&&ne.capture==_){var Ue=ne.listener,dt=ne.ha||ne.src;ne.fa&&ps(u.i,ne),M=Ue.call(dt,T)!==!1&&M}}return M&&!T.defaultPrevented}function Mo(u,m,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function br(u){u.g=Mo(()=>{u.g=null,u.i&&(u.i=!1,br(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ri extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(u){Q.call(this),this.h=u,this.g={}}q(Pi,Q);var Fo=[];function Uo(u){_e(u.g,function(m,_){this.g.hasOwnProperty(_)&&sr(m)},u),u.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),Uo(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bo=f.JSON.stringify,zo=f.JSON.parse,$o=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function xi(){}xi.prototype.h=null;function _s(u){return u.h||(u.h=u.i())}function Es(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){pe.call(this,"d")}q(Un,pe);function ws(){pe.call(this,"c")}q(ws,pe);var Bn={},qo=null;function Ni(){return qo=qo||new ct}Bn.La="serverreachability";function Wo(u){pe.call(this,Bn.La,u)}q(Wo,pe);function lr(u){const m=Ni();ht(m,new Wo(m))}Bn.STAT_EVENT="statevent";function Ho(u,m){pe.call(this,Bn.STAT_EVENT,u),this.stat=m}q(Ho,pe);function rt(u){const m=Ni();ht(m,new Ho(m,u))}Bn.Ma="timingevent";function Ts(u,m){pe.call(this,Bn.Ma,u),this.size=m}q(Ts,pe);function Tn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function ki(){this.g=!0}ki.prototype.xa=function(){this.g=!1};function Di(u,m,_,T,M,W){u.info(function(){if(u.g)if(W)for(var ne="",Ue=W.split("&"),dt=0;dt<Ue.length;dt++){var Oe=Ue[dt].split("=");if(1<Oe.length){var vt=Oe[0];Oe=Oe[1];var ot=vt.split("_");ne=2<=ot.length&&ot[1]=="type"?ne+(vt+"="+Oe+"&"):ne+(vt+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+`
`+_+`
`+ne})}function Is(u,m,_,T,M,W,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+`
`+_+`
`+W+" "+ne})}function In(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Mc(u,_)+(T?" "+T:"")})}function Go(u,m){u.info(function(){return"TIMEOUT: "+m})}ki.prototype.info=function(){};function Mc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var W=M[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<M.length;ne++)M[ne]=""}}}}return Bo(_)}catch{return m}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function Oi(){}q(Oi,xi),Oi.prototype.g=function(){return new XMLHttpRequest},Oi.prototype.i=function(){return{}},Sn=new Oi;function Cn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.R=T||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var Ko={},Cs={};function As(u,m,_){u.L=1,u.v=Fr(sn(m)),u.m=_,u.P=!0,Qo(u,null)}function Qo(u,m){u.F=Date.now(),qe(u),u.A=sn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Br(_.i,"t",T),u.C=0,_=u.j.J,u.h=new ml,u.g=Ol(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Ri(A(u.Y,u,u.g),u.O)),m=u.U,_=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Fo[0]=M.toString()),M=Fo);for(var W=0;W<M.length;W++){var ne=bo(_,M[W],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),lr(),Di(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Gt(u)==3?m.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Gt(this.g);var m=this.g.Ba();const mn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||ot!=4||m==7||(m==8||0>=mn?lr(3):lr(2)),bi(this);var _=this.g.Z();this.X=_;t:if(gl(this)){var T=ta(this.g);u="";var M=T.length,W=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),jr(this);var ne="";break t}this.h.i=new f.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(W&&m==M-1)});T.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Is(this.i,this.u,this.A,this.l,this.R,ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,dt=this.g;if((Ue=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ue)){var Oe=Ue;break t}}Oe=null}if(_=Oe)In(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yo(this,_);else{this.o=!1,this.s=3,rt(12),fn(this),jr(this);break e}}if(this.P){_=!0;let an;for(;!this.J&&this.C<ne.length;)if(an=Fc(this,ne),an==Cs){ot==4&&(this.s=4,rt(14),_=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(an==Ko){this.s=4,rt(15),In(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else In(this.i,this.l,an,null),Yo(this,an);if(gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||ne.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)In(this.i,this.l,ne,"[Invalid Chunked Response]"),fn(this),jr(this);else if(0<ne.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ra(vt),vt.M=!0,rt(11))}}else In(this.i,this.l,ne,null),Yo(this,ne);ot==4&&fn(this),this.o&&!this.J&&(ot==4?Ls(this.j,this):(this.o=!1,qe(this)))}else Ds(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),fn(this),jr(this)}}}catch{}finally{}};function gl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Fc(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Cs:(_=Number(m.substring(_,T)),isNaN(_)?Ko:(T+=1,T+_>m.length?Cs:(m=m.slice(T,T+_),u.C=T+_,m)))}Cn.prototype.cancel=function(){this.J=!0,fn(this)};function qe(u){u.S=Date.now()+u.I,yl(u,u.I)}function yl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tn(A(u.ba,u),m)}function bi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Go(this.i,this.A),this.L!=2&&(lr(),rt(17)),fn(this),this.s=2,jr(this)):yl(this,this.S-u)};function jr(u){u.j.G==0||u.J||Ls(u.j,u)}function fn(u){bi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Uo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Yo(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Bt(_.h,u))){if(!u.K&&Bt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Vs(_),Nn(_);else break e;js(_),rt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tn(A(_.Za,_),6e3));if(1>=_l(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else fr(_,11)}else if((u.K||_.g==u)&&Vs(_),!H(m))for(M=_.Da.g.parse(m),m=0;m<M.length;m++){let Oe=M[m];if(_.T=Oe[0],Oe=Oe[1],_.G==2)if(Oe[0]=="c"){_.K=Oe[1],_.ia=Oe[2];const vt=Oe[3];vt!=null&&(_.la=vt,_.j.info("VER="+_.la));const ot=Oe[4];ot!=null&&(_.Aa=ot,_.j.info("SVER="+_.Aa));const mn=Oe[5];mn!=null&&typeof mn=="number"&&0<mn&&(T=1.5*mn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const an=u.g;if(an){const Bi=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var W=T.h;W.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Xo(W,W.h),W.h=null))}if(T.D){const Fs=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;Fs&&(T.ya=Fs,ze(T.I,T.D,Fs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ne=u;if(T.qa=Dl(T,T.J?T.ia:null,T.W),ne.K){El(T.h,ne);var Ue=ne,dt=T.L;dt&&(Ue.I=dt),Ue.B&&(bi(Ue),qe(Ue)),T.g=ne}else Ui(T);0<_.i.length&&Wn(_)}else Oe[0]!="stop"&&Oe[0]!="close"||fr(_,7);else _.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?fr(_,7):Ct(_):Oe[0]!="noop"&&_.l&&_.l.ta(Oe),_.v=0)}}lr(4)}catch{}}var vl=class{constructor(u,m){this.g=u,this.map=m}};function ji(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _l(u){return u.h?1:u.g?u.g.size:0}function Bt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Xo(u,m){u.g?u.g.add(m):u.h=m}function El(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ji.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return U(u.i)}function Rs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,T=0;T<_;T++)m.push(u[T]);return m}m=[],_=0;for(T in u)m[_++]=u[T];return m}function Ps(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const T in u)m[_++]=T;return m}}}function Vr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Ps(u),T=Rs(u),M=T.length,W=0;W<M;W++)m.call(void 0,T[W],_&&_[W],u)}var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),M=null;if(0<=T){var W=u[_].substring(0,T);M=u[_].substring(T+1)}else W=u[_];m(W,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ur(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ur){this.h=u.h,Li(this,u.j),this.o=u.o,this.g=u.g,Lr(this,u.s),this.l=u.l;var m=u.i,_=new zn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Mr(this,_),this.m=u.m}else u&&(m=String(u).match(Vi))?(this.h=!1,Li(this,m[1]||"",!0),this.o=Ne(m[2]||""),this.g=Ne(m[3]||"",!0),Lr(this,m[4]),this.l=Ne(m[5]||"",!0),Mr(this,m[6]||"",!0),this.m=Ne(m[7]||"")):(this.h=!1,this.i=new zn(null,this.h))}ur.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ur(m,xs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ur(m,xs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ur(_,_.charAt(0)=="/"?Sl:Il,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ur(_,Jo)),u.join("")};function sn(u){return new ur(u)}function Li(u,m,_){u.j=_?Ne(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Lr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Mr(u,m,_){m instanceof zn?(u.i=m,$n(u.i,u.h)):(_||(m=Ur(m,Cl)),u.i=new zn(m,u.h))}function ze(u,m,_){u.i.set(m,_)}function Fr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ne(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ur(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Tl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Tl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var xs=/[#\/\?@]/g,Il=/[#\?:]/g,Sl=/[#\?]/g,Cl=/[#\?@]/g,Jo=/#/g;function zn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function St(u){u.g||(u.g=new Map,u.h=0,u.i&&Uc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=zn.prototype,r.add=function(u,m){St(this),this.i=null,u=pn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function An(u,m){St(u),m=pn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Rn(u,m){return St(u),m=pn(u,m),u.g.has(m)}r.forEach=function(u,m){St(this),this.g.forEach(function(_,T){_.forEach(function(M){u.call(m,M,T,this)},this)},this)},r.na=function(){St(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const M=u[T];for(let W=0;W<M.length;W++)_.push(m[T])}return _},r.V=function(u){St(this);let m=[];if(typeof u=="string")Rn(this,u)&&(m=m.concat(this.g.get(pn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return St(this),this.i=null,u=pn(this,u),Rn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Br(u,m,_){An(u,m),0<_.length&&(u.i=null,u.g.set(pn(u,m),U(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const W=encodeURIComponent(String(T)),ne=this.V(T);for(T=0;T<ne.length;T++){var M=W;ne[T]!==""&&(M+="="+encodeURIComponent(String(ne[T]))),u.push(M)}}return this.i=u.join("&")};function pn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function $n(u,m){m&&!u.j&&(St(u),u.i=null,u.g.forEach(function(_,T){var M=T.toLowerCase();T!=M&&(An(this,T),Br(this,M,_))},u)),u.j=m}function Bc(u,m){const _=new ki;if(f.Image){const T=new Image;T.onload=j(Ht,_,"TestLoadImage: loaded",!0,m,T),T.onerror=j(Ht,_,"TestLoadImage: error",!1,m,T),T.onabort=j(Ht,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=j(Ht,_,"TestLoadImage: timeout",!1,m,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Al(u,m){const _=new ki,T=new AbortController,M=setTimeout(()=>{T.abort(),Ht(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(W=>{clearTimeout(M),W.ok?Ht(_,"TestPingServer: ok",!0,m):Ht(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Ht(_,"TestPingServer: error",!1,m)})}function Ht(u,m,_,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(_)}catch{}}function zc(){this.g=new $o}function Rl(u,m,_){const T=_||"";try{Vr(u,function(M,W){let ne=M;y(M)&&(ne=Bo(M)),m.push(T+W+"="+encodeURIComponent(ne))})}catch(M){throw m.push(T+"type="+encodeURIComponent("_badmap")),M}}function cr(u){this.l=u.Ub||null,this.j=u.eb||!1}q(cr,xi),cr.prototype.g=function(){return new Mi(this.l,this.j)},cr.prototype.i=function(u){return function(){return u}}({});function Mi(u,m){ct.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Mi,ct),r=Mi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Pn(this):xn(this),this.readyState==3&&Pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Pn(this))},r.Qa=function(u){this.g&&(this.response=u,Pn(this))},r.ga=function(){this.g&&Pn(this)};function Pn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hr(u){let m="";return _e(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function zr(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=hr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ze(u,m,_))}function Ye(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(Ye,ct);var $c=/^https?$/i,Zo=["POST","PUT"];r=Ye.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?_s(this.o):_s(Sn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Fi(this,W);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)_.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Zo,m,void 0))||T||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of _)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Fi(this,W)}};function Fi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ns(u),on(u)}function Ns(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ht(this,"complete"),ht(this,"abort"),on(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),on(this,!0)),Ye.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Gt(u)!=4||u.Z()!=2)){if(u.u&&Gt(u)==4)Mo(u.Ea,0,u);else if(ht(u,"readystatechange"),Gt(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=ne===0){var M=String(u.D).match(Vi)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),T=!$c.test(M?M.toLowerCase():"")}_=T}if(_)ht(u,"complete"),ht(u,"success");else{u.m=6;try{var W=2<Gt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ns(u)}}finally{on(u)}}}}function on(u,m){if(u.g){ks(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ht(u,"ready");try{_.onreadystatechange=T}catch{}}}function ks(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Gt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),zo(m)}};function ta(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ds(u){const m={};u=(u.g&&2<=Gt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(H(u[T]))continue;var _=D(u[T]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[M]||[];m[M]=W,W.push(_)}k(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function na(u){this.Aa=0,this.i=[],this.j=new ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qn("baseRetryDelayMs",5e3,u),this.cb=qn("retryDelaySeedMs",1e4,u),this.Wa=qn("forwardChannelMaxRetries",2,u),this.wa=qn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ji(u&&u.concurrentRequestLimit),this.Da=new zc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,T){rt(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Dl(this,null,this.W),Wn(this)};function Ct(u){if(Os(u),u.G==3){var m=u.U++,_=sn(u.I);if(ze(_,"SID",u.K),ze(_,"RID",m),ze(_,"TYPE","terminate"),dr(u,_),m=new Cn(u,u.j,m),m.L=2,m.v=Fr(sn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.v,_=!0),_||(m.g=Ol(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qe(m)}kl(u)}function Nn(u){u.g&&(ra(u),u.g.cancel(),u.g=null)}function Os(u){Nn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Vs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Wn(u){if(!rn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Be||ae(),re||(Be(),re=!0),ge.add(m,u),u.B=0}}function qc(u,m){return _l(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tn(A(u.Ga,u,m),Nl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Cn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=S(W),x(W,this.S)):W=this.S),this.m!==null||this.O||(M.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=$r(this,M,m),_=sn(this.I),ze(_,"RID",u),ze(_,"CVER",22),this.D&&ze(_,"X-HTTP-Session-Id",this.D),dr(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(hr(W)))+"&"+m:this.m&&zr(_,this.m,W)),Xo(this.h,M),this.Ua&&ze(_,"TYPE","init"),this.P?(ze(_,"$req",m),ze(_,"SID","null"),M.T=!0,As(M,_,null)):As(M,_,m),this.G=2}}else this.G==3&&(u?bs(this,u):this.i.length==0||rn(this.h)||bs(this))};function bs(u,m){var _;m?_=m.l:_=u.U++;const T=sn(u.I);ze(T,"SID",u.K),ze(T,"RID",_),ze(T,"AID",u.T),dr(u,T),u.m&&u.o&&zr(T,u.m,u.o),_=new Cn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=$r(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xo(u.h,_),As(_,T,m)}function dr(u,m){u.H&&_e(u.H,function(_,T){ze(m,T,_)}),u.l&&Vr({},function(_,T){ze(m,T,_)})}function $r(u,m,_){_=Math.min(u.i.length,_);var T=u.l?A(u.l.Na,u.l,u):null;e:{var M=u.i;let W=-1;for(;;){const ne=["count="+_];W==-1?0<_?(W=M[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let Ue=!0;for(let dt=0;dt<_;dt++){let Oe=M[dt].g;const vt=M[dt].map;if(Oe-=W,0>Oe)W=Math.max(0,M[dt].g-100),Ue=!1;else try{Rl(vt,ne,"req"+Oe+"_")}catch{T&&T(vt)}}if(Ue){T=ne.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,T}function Ui(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Be||ae(),re||(Be(),re=!0),ge.add(m,u),u.v=0}}function js(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tn(A(u.Fa,u),Nl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,xl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tn(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Nn(this),xl(this))};function ra(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function xl(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=sn(u.qa);ze(m,"RID","rpc"),ze(m,"SID",u.K),ze(m,"AID",u.T),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(m,"TO",u.ja),ze(m,"TYPE","xmlhttp"),dr(u,m),u.m&&u.o&&zr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Fr(sn(m)),_.m=null,_.P=!0,Qo(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Nn(this),js(this),rt(19))};function Vs(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ls(u,m){var _=null;if(u.g==m){Vs(u),ra(u),u.g=null;var T=2}else if(Bt(u.h,m))_=m.D,El(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;T=Ni(),ht(T,new Ts(T,_)),Wn(u)}else Ui(u);else if(M=m.s,M==3||M==0&&0<m.X||!(T==1&&qc(u,m)||T==2&&js(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),M){case 1:fr(u,5);break;case 4:fr(u,10);break;case 3:fr(u,6);break;default:fr(u,2)}}}function Nl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function fr(u,m){if(u.j.info("Error code "+m),m==2){var _=A(u.fb,u),T=u.Xa;const M=!T;T=new ur(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Li(T,"https"),Fr(T),M?Bc(T.toString(),_):Al(T.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),kl(u),Os(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function kl(u){if(u.G=0,u.ka=[],u.l){const m=wl(u.h);(m.length!=0||u.i.length!=0)&&(b(u.ka,m),b(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function Dl(u,m,_){var T=_ instanceof ur?sn(_):new ur(_);if(T.g!="")m&&(T.g=m+"."+T.g),Lr(T,T.s);else{var M=f.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var W=new ur(null);T&&Li(W,T),m&&(W.g=m),M&&Lr(W,M),_&&(W.l=_),T=W}return _=u.D,m=u.ya,_&&m&&ze(T,_,m),ze(T,"VER",u.la),dr(u,T),T}function Ol(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new cr({eb:_})):new Ye(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ia(){}r=ia.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ms(){}Ms.prototype.g=function(u,m){return new zt(u,m)};function zt(u,m){ct.call(this),this.g=new na(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!H(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!H(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Hn(this)}q(zt,ct),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ct(this.g)},zt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Bo(u),u=_);m.i.push(new vl(m.Ya++,u)),m.G==3&&Wn(m)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,zt.aa.N.call(this)};function bl(u){Un.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}q(bl,Un);function jl(){ws.call(this),this.status=1}q(jl,ws);function Hn(u){this.g=u}q(Hn,ia),Hn.prototype.ua=function(){ht(this.g,"a")},Hn.prototype.ta=function(u){ht(this.g,new bl(u))},Hn.prototype.sa=function(u){ht(this.g,new jl)},Hn.prototype.ra=function(){ht(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Ev=function(){return new Ms},_v=function(){return Ni()},vv=Bn,Ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,Vu=Ss,pl.COMPLETE="complete",yv=pl,Es.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Da=Es,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,gv=Ye}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new af("@firebase/firestore");function oo(){return is.logLevel}function le(r,...e){if(is.logLevel<=Pe.DEBUG){const t=e.map(cf);is.debug(`Firestore (${Ro}): ${r}`,...t)}}function Pr(r,...e){if(is.logLevel<=Pe.ERROR){const t=e.map(cf);is.error(`Firestore (${Ro}): ${r}`,...t)}}function vo(r,...e){if(is.logLevel<=Pe.WARN){const t=e.map(cf);is.warn(`Firestore (${Ro}): ${r}`,...t)}}function cf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+r;throw Pr(e),new Error(e)}function Fe(r,e){r||Te()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class wI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TI{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string"),new wv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Mt(e)}}class II{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class SI{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new II(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Fe(this.o===void 0);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string"),this.R=t.token,new CI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=RI(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function _o(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new mt(0,0))}static max(){return new Ie(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(),s===void 0?s=e.length-t:s>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return qa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qe extends qa{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Qe(t)}static emptyPath(){return new Qe([])}}const PI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends qa{construct(e,t,s){return new xt(e,t,s)}static isValidIdentifier(e){return PI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(t)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Qe.fromString(e))}static fromName(e){return new me(Qe.fromString(e).popFirst(5))}static empty(){return new me(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Qe(e.slice()))}}function xI(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new gi(o,me.empty(),e)}function NI(r){return new gi(r.readTime,r.key,-1)}class gi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new gi(Ie.min(),me.empty(),-1)}static max(){return new gi(Ie.max(),me.empty(),-1)}}function kI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(r.documentKey,e.documentKey),t!==0?t:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==DI)throw r;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,s)=>{t(e)})}static reject(e){return new K((t,s)=>{s(e)})}static waitFor(e){return new K((t,s)=>{let o=0,l=0,c=!1;e.forEach(f=>{++o,f.next(()=>{++l,c&&l===o&&t()},p=>s(p))}),c=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next(o=>o?K.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new K((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(w=>{c[y]=w,++f,f===l&&s(c)},w=>o(w))}})}static doWhile(e,t){return new K((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function bI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}gc.oe=-1;function yc(r){return r==null}function Xu(r){return r===0&&1/r==-1/0}function jI(r){return typeof r=="number"&&Number.isInteger(r)&&!Xu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=jg(e)),e=LI(r.get(t),e);return jg(e)}function LI(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function jg(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ti(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Iv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Pt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lg(this.data.getIterator())}getIteratorFrom(e){return new Lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class Lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new hn([])}unionWith(e){let t=new gt(xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Sv("Invalid base64 string: "+l):l}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const MI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(r){if(Fe(!!r),typeof r=="string"){let e=0;const t=MI.exec(r);if(Fe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(r.seconds),nanos:st(r.nanos)}}function st(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function vi(r){return typeof r=="string"?Nt.fromBase64String(r):Nt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vc(r){const e=r.mapValue.fields.__previous_value__;return hf(e)?vc(e):e}function Wa(r){const e=yi(r.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t,s,o,l,c,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class Ha{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{}};function _i(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hf(r)?4:BI(r)?9007199254740991:UI(r)?10:11:Te()}function nr(r,e){if(r===e)return!0;const t=_i(r);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Wa(r).isEqual(Wa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=yi(o.timestampValue),f=yi(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return vi(o.bytesValue).isEqual(vi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return st(o.geoPointValue.latitude)===st(l.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return st(o.integerValue)===st(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=st(o.doubleValue),f=st(l.doubleValue);return c===f?Xu(c)===Xu(f):isNaN(c)&&isNaN(f)}return!1}(r,e);case 9:return _o(r.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Vg(c)!==Vg(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!nr(c[p],f[p])))return!1;return!0}(r,e);default:return Te()}}function Ga(r,e){return(r.values||[]).find(t=>nr(t,e))!==void 0}function Eo(r,e){if(r===e)return 0;const t=_i(r),s=_i(e);if(t!==s)return ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return function(l,c){const f=st(l.integerValue||l.doubleValue),p=st(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(r,e);case 3:return Mg(r.timestampValue,e.timestampValue);case 4:return Mg(Wa(r),Wa(e));case 5:return ke(r.stringValue,e.stringValue);case 6:return function(l,c){const f=vi(l),p=vi(c);return f.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const w=ke(f[y],p[y]);if(w!==0)return w}return ke(f.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,c){const f=ke(st(l.latitude),st(c.latitude));return f!==0?f:ke(st(l.longitude),st(c.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Fg(r.arrayValue,e.arrayValue);case 10:return function(l,c){var f,p,y,w;const I=l.fields||{},A=c.fields||{},j=(f=I.value)===null||f===void 0?void 0:f.arrayValue,q=(p=A.value)===null||p===void 0?void 0:p.arrayValue,U=ke(((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0,((w=q==null?void 0:q.values)===null||w===void 0?void 0:w.length)||0);return U!==0?U:Fg(j,q)}(r.mapValue,e.mapValue);case 11:return function(l,c){if(l===Du.mapValue&&c===Du.mapValue)return 0;if(l===Du.mapValue)return 1;if(c===Du.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let I=0;I<p.length&&I<w.length;++I){const A=ke(p[I],w[I]);if(A!==0)return A;const j=Eo(f[p[I]],y[w[I]]);if(j!==0)return j}return ke(p.length,w.length)}(r.mapValue,e.mapValue);default:throw Te()}}function Mg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const t=yi(r),s=yi(e),o=ke(t.seconds,s.seconds);return o!==0?o:ke(t.nanos,s.nanos)}function Fg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Eo(t[o],s[o]);if(l)return l}return ke(t.length,s.length)}function wo(r){return Md(r)}function Md(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=yi(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return vi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return me.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Md(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Md(t.fields[c])}`;return o+"}"}(r.mapValue):Te()}function Lu(r){switch(_i(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vc(r);return e?16+Lu(e):16;case 5:return 2*r.stringValue.length;case 6:return vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Lu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ti(s.fields,(l,c)=>{o+=l.length+Lu(c)}),o}(r.mapValue);default:throw Te()}}function Ug(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Fd(r){return!!r&&"integerValue"in r}function df(r){return!!r&&"arrayValue"in r}function Bg(r){return!!r&&"nullValue"in r}function zg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mu(r){return!!r&&"mapValue"in r}function UI(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Va(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ti(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Va(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Va(r.arrayValue.values[t]);return e}return Object.assign({},r)}function BI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Mu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=xt.emptyPath(),s={},o=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=Va(c):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Mu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Mu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ti(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new tn(Va(this.value))}}function Cv(r){const e=[];return Ti(r.fields,(t,s)=>{const o=new xt([t]);if(Mu(s)){const l=Cv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ft(e,0,Ie.min(),Ie.min(),Ie.min(),tn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ie.min(),Ie.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ie.min(),Ie.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.position=e,this.inclusive=t}}function $g(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?s=me.comparator(me.fromName(c.referenceValue),t.key):s=Eo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function qg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!nr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t="asc"){this.field=e,this.dir=t}}function zI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{}class ut extends Av{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new qI(e,t,s):t==="array-contains"?new GI(e,s):t==="in"?new KI(e,s):t==="not-in"?new QI(e,s):t==="array-contains-any"?new YI(e,s):new ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new WI(e,s):new HI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Eo(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(Eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Av{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ln(e,t)}matches(e){return Rv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rv(r){return r.op==="and"}function Pv(r){return $I(r)&&Rv(r)}function $I(r){for(const e of r.filters)if(e instanceof Ln)return!1;return!0}function Ud(r){if(r instanceof ut)return r.field.canonicalString()+r.op.toString()+wo(r.value);if(Pv(r))return r.filters.map(e=>Ud(e)).join(",");{const e=r.filters.map(t=>Ud(t)).join(",");return`${r.op}(${e})`}}function xv(r,e){return r instanceof ut?function(s,o){return o instanceof ut&&s.op===o.op&&s.field.isEqual(o.field)&&nr(s.value,o.value)}(r,e):r instanceof Ln?function(s,o){return o instanceof Ln&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,c,f)=>l&&xv(c,o.filters[f]),!0):!1}(r,e):void Te()}function Nv(r){return r instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${wo(t.value)}`}(r):r instanceof Ln?function(t){return t.op.toString()+" {"+t.getFilters().map(Nv).join(" ,")+"}"}(r):"Filter"}class qI extends ut{constructor(e,t,s){super(e,t,s),this.key=me.fromName(s.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class WI extends ut{constructor(e,t){super(e,"in",t),this.keys=kv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HI extends ut{constructor(e,t){super(e,"not-in",t),this.keys=kv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>me.fromName(s.referenceValue))}class GI extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return df(t)&&Ga(t.arrayValue,this.value)}}class KI extends ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ga(this.value.arrayValue,t)}}class QI extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ga(this.value.arrayValue,t)}}class YI extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!df(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ga(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.ue=null}}function Wg(r,e=null,t=[],s=[],o=null,l=null,c=null){return new XI(r,e,t,s,o,l,c)}function ff(r){const e=Se(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ud(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>wo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>wo(s)).join(",")),e.ue=t}return e.ue}function pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!zI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!xv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qg(r.startAt,e.startAt)&&qg(r.endAt,e.endAt)}function Bd(r){return me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JI(r,e,t,s,o,l,c,f){return new No(r,e,t,s,o,l,c,f)}function mf(r){return new No(r)}function Hg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Dv(r){return r.collectionGroup!==null}function La(r){const e=Se(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new gt(xt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ka(l,s))}),t.has(xt.keyField().canonicalString())||e.ce.push(new Ka(xt.keyField(),s))}return e.ce}function Jn(r){const e=Se(r);return e.le||(e.le=ZI(e,La(r))),e.le}function ZI(r,e){if(r.limitType==="F")return Wg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ka(o.field,l)});const t=r.endAt?new Ju(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ju(r.startAt.position,r.startAt.inclusive):null;return Wg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function zd(r,e){const t=r.filters.concat([e]);return new No(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function $d(r,e,t){return new No(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function _c(r,e){return pf(Jn(r),Jn(e))&&r.limitType===e.limitType}function Ov(r){return`${ff(Jn(r))}|lt:${r.limitType}`}function ao(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Nv(o)).join(", ")}]`),yc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>wo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>wo(o)).join(",")),`Target(${s})`}(Jn(r))}; limitType=${r.limitType})`}function Ec(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):me.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of La(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(c,f,p){const y=$g(c,f,p);return c.inclusive?y<=0:y<0}(s.startAt,La(s),o)||s.endAt&&!function(c,f,p){const y=$g(c,f,p);return c.inclusive?y>=0:y>0}(s.endAt,La(s),o))}(r,e)}function eS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function bv(r){return(e,t)=>{let s=!1;for(const o of La(r)){const l=tS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function tS(r,e,t){const s=r.field.isKeyField()?me.comparator(e.key,t.key):function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Eo(p,y):Te()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return Iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new et(me.comparator);function xr(){return nS}const jv=new et(me.comparator);function Oa(...r){let e=jv;for(const t of r)e=e.insert(t.key,t);return e}function Vv(r){let e=jv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ts(){return Ma()}function Lv(){return Ma()}function Ma(){return new us(r=>r.toString(),(r,e)=>r.isEqual(e))}const rS=new et(me.comparator),iS=new gt(me.comparator);function xe(...r){let e=iS;for(const t of r)e=e.add(t);return e}const sS=new gt(ke);function oS(){return sS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xu(e)?"-0":e}}function Mv(r){return{integerValue:""+r}}function aS(r,e){return jI(e)?Mv(e):gf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this._=void 0}}function lS(r,e,t){return r instanceof Zu?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&hf(l)&&(l=vc(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):r instanceof Qa?Uv(r,e):r instanceof Ya?Bv(r,e):function(o,l){const c=Fv(o,l),f=Gg(c)+Gg(o.Pe);return Fd(c)&&Fd(o.Pe)?Mv(f):gf(o.serializer,f)}(r,e)}function uS(r,e,t){return r instanceof Qa?Uv(r,e):r instanceof Ya?Bv(r,e):t}function Fv(r,e){return r instanceof ec?function(s){return Fd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Zu extends wc{}class Qa extends wc{constructor(e){super(),this.elements=e}}function Uv(r,e){const t=zv(e);for(const s of r.elements)t.some(o=>nr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ya extends wc{constructor(e){super(),this.elements=e}}function Bv(r,e){let t=zv(e);for(const s of r.elements)t=t.filter(o=>!nr(o,s));return{arrayValue:{values:t}}}class ec extends wc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Gg(r){return st(r.integerValue||r.doubleValue)}function zv(r){return df(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function cS(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Qa&&o instanceof Qa||s instanceof Ya&&o instanceof Ya?_o(s.elements,o.elements,nr):s instanceof ec&&o instanceof ec?nr(s.Pe,o.Pe):s instanceof Zu&&o instanceof Zu}(r.transform,e.transform)}class hS{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tc{}function $v(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new yf(r.key,nn.none()):new nl(r.key,r.data,nn.none());{const t=r.data,s=tn.empty();let o=new gt(xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Ii(r.key,s,new hn(o.toArray()),nn.none())}}function dS(r,e,t){r instanceof nl?function(o,l,c){const f=o.value.clone(),p=Qg(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ii?function(o,l,c){if(!Fu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Qg(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(qv(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Fa(r,e,t,s){return r instanceof nl?function(l,c,f,p){if(!Fu(l.precondition,c))return f;const y=l.value.clone(),w=Yg(l.fieldTransforms,p,c);return y.setAll(w),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ii?function(l,c,f,p){if(!Fu(l.precondition,c))return f;const y=Yg(l.fieldTransforms,p,c),w=c.data;return w.setAll(qv(l)),w.setAll(y),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(r,e,t,s):function(l,c,f){return Fu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(r,e,t)}function fS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Fv(s.transform,o||null);l!=null&&(t===null&&(t=tn.empty()),t.set(s.field,l))}return t||null}function Kg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&_o(s,o,(l,c)=>cS(l,c))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class nl extends Tc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ii extends Tc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Qg(r,e,t){const s=new Map;Fe(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,uS(c,f,t[o]))}return s}function Yg(r,e,t){const s=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);s.set(o.field,lS(l,c,e))}return s}class yf extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pS extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&dS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Fa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Lv();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=$v(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(t,s)=>Kg(t,s))&&_o(this.baseMutations,e.baseMutations,(t,s)=>Kg(t,s))}}class vf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length);let o=function(){return rS}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new vf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,be;function vS(r){switch(r){default:return Te();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function Wv(r){if(r===void 0)return Pr("GRPC error has no .code"),G.UNKNOWN;switch(r){case lt.OK:return G.OK;case lt.CANCELLED:return G.CANCELLED;case lt.UNKNOWN:return G.UNKNOWN;case lt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case lt.INTERNAL:return G.INTERNAL;case lt.UNAVAILABLE:return G.UNAVAILABLE;case lt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case lt.NOT_FOUND:return G.NOT_FOUND;case lt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case lt.ABORTED:return G.ABORTED;case lt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case lt.DATA_LOSS:return G.DATA_LOSS;default:return Te()}}(be=lt||(lt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new ns([4294967295,4294967295],0);function Xg(r){const e=_S().encode(r),t=new mv;return t.update(e),new Uint8Array(t.digest())}function Jg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ns([t,s],0),new ns([o,l],0)]}class _f{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ba(`Invalid padding: ${t}`);if(s<0)throw new ba(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ba(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ns.fromNumber(this.Te)}Ee(e,t,s){let o=e.add(t.multiply(ns.fromNumber(s)));return o.compare(ES)===1&&(o=new ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Xg(e),[s,o]=Jg(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(s,o,l);if(!this.de(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new _f(l,o,t);return s.forEach(f=>c.insert(f)),c}insert(e){if(this.Te===0)return;const t=Xg(e),[s,o]=Jg(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(s,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ic(Ie.min(),o,new et(ke),xr(),xe())}}class rl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new rl(s,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class Hv{constructor(e,t){this.targetId=e,this.me=t}}class Gv{constructor(e,t,s=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Zg{constructor(){this.fe=0,this.ge=ey(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),s=xe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te()}}),new rl(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ey()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wS{constructor(e){this.Le=e,this.Be=new Map,this.ke=xr(),this.qe=Ou(),this.Qe=Ou(),this.Ke=new et(ke)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(Bd(l))if(s===0){const c=new me(l.path);this.We(t,c,Ft.newNoDocument(c,Ie.min()))}else Fe(s===1);else{const c=this.Ze(t);if(c!==s){const f=this.Xe(e),p=f?this.et(f,e,c):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=vi(s).toUint8Array()}catch(p){if(p instanceof Sv)return vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new _f(c,o,l)}catch(p){return vo(p instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const c=this.Le.nt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const f=this.Ye(c);if(f){if(l.current&&Bd(f.target)){const p=new me(f.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,Ft.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let s=xe();this.Qe.forEach((l,c)=>{let f=!0;c.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Ic(e,t,this.Ke,this.ke,s);return this.ke=xr(),this.qe=Ou(),this.Qe=Ou(),this.Ke=new et(ke),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Zg,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new gt(ke),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(ke),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Zg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ou(){return new et(me.comparator)}function ey(){return new et(me.comparator)}const TS={asc:"ASCENDING",desc:"DESCENDING"},IS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SS={and:"AND",or:"OR"};class CS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qd(r,e){return r.useProto3Json||yc(e)?e:{value:e}}function tc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function AS(r,e){return tc(r,e.toTimestamp())}function Zn(r){return Fe(!!r),Ie.fromTimestamp(function(t){const s=yi(t);return new mt(s.seconds,s.nanos)}(r))}function Ef(r,e){return Wd(r,e).canonicalString()}function Wd(r,e){const t=function(o){return new Qe(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Qv(r){const e=Qe.fromString(r);return Fe(e_(e)),e}function Hd(r,e){return Ef(r.databaseId,e.path)}function wd(r,e){const t=Qv(e);if(t.get(1)!==r.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new me(Xv(t))}function Yv(r,e){return Ef(r.databaseId,e)}function RS(r){const e=Qv(r);return e.length===4?Qe.emptyPath():Xv(e)}function Gd(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Xv(r){return Fe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function ty(r,e,t){return{name:Hd(r,e),fields:t.value.mapValue.fields}}function PS(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,w){return y.useProto3Json?(Fe(w===void 0||typeof w=="string"),Nt.fromBase64String(w||"")):(Fe(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Nt.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const w=y.code===void 0?G.UNKNOWN:Wv(y.code);return new oe(w,y.message||"")}(c);t=new Gv(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wd(r,s.document.name),l=Zn(s.document.updateTime),c=s.document.createTime?Zn(s.document.createTime):Ie.min(),f=new tn({mapValue:{fields:s.document.fields}}),p=Ft.newFoundDocument(o,l,c,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new Uu(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wd(r,s.document),l=s.readTime?Zn(s.readTime):Ie.min(),c=Ft.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Uu([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wd(r,s.document),l=s.removedTargetIds||[];t=new Uu([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new yS(o,l),f=s.targetId;t=new Hv(f,c)}}return t}function xS(r,e){let t;if(e instanceof nl)t={update:ty(r,e.key,e.value)};else if(e instanceof yf)t={delete:Hd(r,e.key)};else if(e instanceof Ii)t={update:ty(r,e.key,e.data),updateMask:MS(e.fieldMask)};else{if(!(e instanceof pS))return Te();t={verify:Hd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,c){const f=c.transform;if(f instanceof Zu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Qa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ya)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ec)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw Te()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:AS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(r,e.precondition)),t}function NS(r,e){return r&&r.length>0?(Fe(e!==void 0),r.map(t=>function(o,l){let c=o.updateTime?Zn(o.updateTime):Zn(l);return c.isEqual(Ie.min())&&(c=Zn(l)),new hS(c,o.transformResults||[])}(t,e))):[]}function kS(r,e){return{documents:[Yv(r,e.path)]}}function DS(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Yv(r,o);const l=function(y){if(y.length!==0)return Zv(Ln.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(w=>function(A){return{field:lo(A.field),direction:jS(A.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=qd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function OS(r){let e=RS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(I){const A=Jv(I);return A instanceof Ln&&Pv(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(A=>function(q){return new Ka(uo(q.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(A))}(t.orderBy));let f=null;t.limit&&(f=function(I){let A;return A=typeof I=="object"?I.value:I,yc(A)?null:A}(t.limit));let p=null;t.startAt&&(p=function(I){const A=!!I.before,j=I.values||[];return new Ju(j,A)}(t.startAt));let y=null;return t.endAt&&(y=function(I){const A=!I.before,j=I.values||[];return new Ju(j,A)}(t.endAt)),JI(e,o,c,l,f,"F",p,y)}function bS(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Jv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=uo(t.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(t.unaryFilter.field);return ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=uo(t.unaryFilter.field);return ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=uo(t.unaryFilter.field);return ut.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(r):r.fieldFilter!==void 0?function(t){return ut.create(uo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ln.create(t.compositeFilter.filters.map(s=>Jv(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(r):Te()}function jS(r){return TS[r]}function VS(r){return IS[r]}function LS(r){return SS[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return xt.fromServerFormat(r.fieldPath)}function Zv(r){return r instanceof ut?function(t){if(t.op==="=="){if(zg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NAN"}};if(Bg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NAN"}};if(Bg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(t.field),op:VS(t.op),value:t.value}}}(r):r instanceof Ln?function(t){const s=t.getFilters().map(o=>Zv(o));return s.length===1?s[0]:{compositeFilter:{op:LS(t.op),filters:s}}}(r):Te()}function MS(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,s,o,l=Ie.min(),c=Ie.min(),f=Nt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.ht=e}}function US(r){const e=OS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.ln=new zS}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(gi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class zS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gt(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new To(0)}static Qn(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry([r,e],[t,s]){const o=ke(r,t);return o===0?ke(e,s):o}class $S{constructor(e){this.Gn=e,this.buffer=new gt(ry),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ry(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qS{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xo(t)?le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Po(t)}await this.Yn(3e5)})}}class WS{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return K.resolve(gc.oe);const s=new $S(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(ny)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ny):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,c,f,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,c=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(s=I,f=Date.now(),this.removeTargets(e,s,t))).next(I=>(l=I,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(y=Date.now(),oo()<=Pe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${I} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function HS(r,e){return new WS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(){this.changes=new us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Fa(s.mutation,o,hn.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=xe()){const o=ts();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let c=Oa();return l.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=ts();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,xe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,s,o){let l=xr();const c=Ma(),f=function(){return Ma()}();return t.forEach((p,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ii)?l=l.insert(y.key,y):w!==void 0?(c.set(y.key,w.mutation.getFieldMask()),Fa(w.mutation,y,w.mutation.getFieldMask(),mt.now())):c.set(y.key,hn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,w)=>c.set(y,w)),t.forEach((y,w)=>{var I;return f.set(y,new KS(w,(I=c.get(y))!==null&&I!==void 0?I:null))}),f))}recalculateAndSaveOverlays(e,t){const s=Ma();let o=new et((c,f)=>c-f),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let w=s.get(p)||hn.empty();w=f.applyToLocalView(y,w),s.set(p,w);const I=(o.get(f.batchId)||xe()).add(p);o=o.insert(f.batchId,I)})}).next(()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,w=p.value,I=Lv();w.forEach(A=>{if(!l.has(A)){const j=$v(t.get(A),s.get(A));j!==null&&I.set(A,j),l=l.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,I))}return K.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(ts());let f=-1,p=l;return c.next(y=>K.forEach(y,(w,I)=>(f<I.largestBatchId&&(f=I.largestBatchId),l.get(w)?K.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{p=p.insert(w,A)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,xe())).next(w=>({batchId:f,changes:Vv(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(s=>{let o=Oa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Oa();return this.indexManager.getCollectionParents(e,l).next(f=>K.forEach(f,p=>{const y=function(I,A){return new No(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(w=>{w.forEach((I,A)=>{c=c.insert(I,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(c=>{l.forEach((p,y)=>{const w=y.getKey();c.get(w)===null&&(c=c.insert(w,Ft.newInvalidDocument(w)))});let f=Oa();return c.forEach((p,y)=>{const w=l.get(p);w!==void 0&&Fa(w.mutation,y,hn.empty(),mt.now()),Ec(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Zn(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:US(o.bundledQuery),readTime:Zn(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.overlays=new et(me.comparator),this.Er=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ts();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Er.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=ts(),l=t.length+1,c=new me(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new et((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=ts(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=ts(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>f.set(y,w)),!(f.size()>=o)););return K.resolve(f)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new gS(t,s));let l=this.Er.get(t);l===void 0&&(l=xe(),this.Er.set(t,l)),this.Er.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.dr=new gt(Tt.Ar),this.Rr=new gt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Tt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new me(new Qe([])),s=new Tt(t,e),o=new Tt(t,e+1),l=[];return this.Rr.forEachInRange([s,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new me(new Qe([])),s=new Tt(t,e),o=new Tt(t,e+1);let l=xe();return this.Rr.forEachInRange([s,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Tt(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return me.comparator(e.key,t.key)||ke(e.br,t.br)}static Vr(e,t){return ke(e.br,t.br)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new gt(Tt.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new mS(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.vr=this.vr.add(new Tt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(c)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],c=>{const f=this.Cr(c.br);l.push(f)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(ke);return t.forEach(o=>{const l=new Tt(o,0),c=new Tt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],f=>{s=s.add(f.br)})}),K.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;me.isDocumentKey(l)||(l=l.child(""));const c=new Tt(new me(l),0);let f=new gt(ke);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.br)),!0)},c),K.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Fe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return K.forEach(t.mutations,o=>{const l=new Tt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new Tt(t,0),o=this.vr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.Nr=e,this.docs=function(){return new et(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=xr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))}),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=xr();const c=t.path,f=new me(c.child("")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||kI(NI(w),s)<=0||(o.has(w.key)||Ec(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te()}Lr(e,t){return K.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new tC(this)}getSize(e){return K.resolve(this.size)}}class tC extends GS{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.persistence=e,this.Br=new us(t=>ff(t),pf),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.kr=0,this.qr=new wf,this.targetCount=0,this.Qr=To.qn()}forEachTarget(e,t){return this.Br.forEach((s,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new To(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Br.forEach((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new gc(0),this.Ur=!1,this.Ur=!0,this.Wr=new JS,this.referenceDelegate=e(this),this.Gr=new nC(this),this.indexManager=new BS,this.remoteDocumentCache=function(o){return new eC(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new FS(t),this.jr=new YS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new ZS(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const o=new rC(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return K.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class rC extends OI{constructor(e){super(),this.currentSequenceNumber=e}}class Tf{constructor(e){this.persistence=e,this.Zr=new wf,this.Xr=null}static ei(e){return new Tf(e)}get ti(){if(this.Xr)return this.Xr;throw Te()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,s=>{const o=me.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ie.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class nc{constructor(e,t){this.persistence=e,this.ri=new us(s=>VI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=HS(this,t)}static ei(e,t){return new nc(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(f=>{f||(s++,l.removeEntry(c,Ie.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lu(e.data.value)),t}ir(e,t,s){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new If(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return rT()?8:bI(Ut())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new iC;return this.ts(e,t,c).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,c,f.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(oo()<=Pe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(oo()<=Pe.DEBUG&&le("QueryEngine","Query:",ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(oo()<=Pe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):K.resolve())}Xi(e,t){if(Hg(t))return K.resolve(null);let s=Jn(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=$d(t,null,"F"),s=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const c=xe(...l);return this.Zi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.rs(t,f);return this.ss(t,y,c,p.readTime)?this.Xi(e,$d(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,s,o){return Hg(t)||o.isEqual(Ie.min())?K.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const c=this.rs(t,l);return this.ss(t,c,s,o)?K.resolve(null):(oo()<=Pe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ao(t)),this.os(e,c,t,xI(o,-1)).next(f=>f))})}rs(e,t){let s=new gt(bv(e));return t.forEach((o,l)=>{Ec(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return oo()<=Pe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ao(t)),this.Zi.getDocumentsMatchingQuery(e,t,gi.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new et(ke),this.cs=new us(l=>ff(l),pf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QS(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function aC(r,e,t,s){return new oC(r,e,t,s)}async function n_(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const c=[],f=[];let p=xe();for(const y of o){c.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(s,p).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:f}))})})}function lC(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,w){const I=y.batch,A=I.keys();let j=K.resolve();return A.forEach(q=>{j=j.next(()=>w.getEntry(p,q)).next(U=>{const b=y.docVersions.get(q);Fe(b!==null),U.version.compareTo(b)<0&&(I.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),w.addEntry(U)))})}),j.next(()=>f.mutationQueue.removeMutationBatch(p,I))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let p=xe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function r_(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function uC(r,e){const t=Se(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((w,I)=>{const A=o.get(I);if(!A)return;f.push(t.Gr.removeMatchingKeys(l,w.removedDocuments,I).next(()=>t.Gr.addMatchingKeys(l,w.addedDocuments,I)));let j=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(Nt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):w.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(w.resumeToken,s)),o=o.insert(I,j),function(U,b,B){return U.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(A,j,w)&&f.push(t.Gr.updateTargetData(l,j))});let p=xr(),y=xe();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),f.push(cC(l,c,e.documentUpdates).next(w=>{p=w.Is,y=w.Es})),!s.isEqual(Ie.min())){const w=t.Gr.getLastRemoteSnapshotVersion(l).next(I=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(w)}return K.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function cC(r,e,t){let s=xe(),o=xe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let c=xr();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):le("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{Is:c,Es:o}})}function hC(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function dC(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,K.resolve(o)):t.Gr.allocateTargetId(s).next(c=>(o=new ci(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function Kd(r,e,t){const s=Se(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,c=>s.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!xo(c))throw c;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function iy(r,e,t){const s=Se(r);let o=Ie.min(),l=xe();return s.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,w){const I=Se(p),A=I.cs.get(w);return A!==void 0?K.resolve(I.us.get(A)):I.Gr.getTargetData(y,w)}(s,c,Jn(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(c,f.targetId).next(p=>{l=p})}).next(()=>s._s.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:xe())).next(f=>(fC(s,eS(e),f),{documents:f,ds:l})))}function fC(r,e,t){let s=r.ls.get(e)||Ie.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class sy{constructor(){this.activeTargetIds=oS()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pC{constructor(){this._o=new sy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new sy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=null;function Td(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class vC extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,c){const f=Td(),p=this.No(t,s.toUriEncodedString());le("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,c),this.Bo(t,p,y,o).then(w=>(le("RestConnection",`Received RPC '${t}' ${f}: `,w),w),w=>{throw vo("RestConnection",`RPC '${t}' ${f} failed with error: `,w,"url: ",p,"request:",o),w})}ko(t,s,o,l,c,f){return this.Oo(t,s,o,l,c)}Lo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,s){const o=gC[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,o){const l=Td();return new Promise((c,f)=>{const p=new gv;p.setWithCredentials(!0),p.listenOnce(yv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Vu.NO_ERROR:const w=p.getResponseJson();le(Lt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),c(w);break;case Vu.TIMEOUT:le(Lt,`RPC '${e}' ${l} timed out`),f(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const I=p.getStatus();if(le(Lt,`RPC '${e}' ${l} failed with status:`,I,"response text:",p.getResponseText()),I>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const j=A==null?void 0:A.error;if(j&&j.status&&j.message){const q=function(b){const B=b.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(B)>=0?B:G.UNKNOWN}(j.status);f(new oe(q,j.message))}else f(new oe(G.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new oe(G.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{le(Lt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);le(Lt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,s,15)})}qo(e,t,s){const o=Td(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ev(),f=_v(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const w=l.join("");le(Lt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const I=c.createWebChannel(w,p);let A=!1,j=!1;const q=new yC({Eo:b=>{j?le(Lt,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(A||(le(Lt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),A=!0),le(Lt,`RPC '${e}' stream ${o} sending:`,b),I.send(b))},Ao:()=>I.close()}),U=(b,B,H)=>{b.listen(B,te=>{try{H(te)}catch(ie){setTimeout(()=>{throw ie},0)}})};return U(I,Da.EventType.OPEN,()=>{j||(le(Lt,`RPC '${e}' stream ${o} transport opened.`),q.So())}),U(I,Da.EventType.CLOSE,()=>{j||(j=!0,le(Lt,`RPC '${e}' stream ${o} transport closed`),q.Do())}),U(I,Da.EventType.ERROR,b=>{j||(j=!0,vo(Lt,`RPC '${e}' stream ${o} transport errored:`,b),q.Do(new oe(G.UNAVAILABLE,"The operation could not be completed")))}),U(I,Da.EventType.MESSAGE,b=>{var B;if(!j){const H=b.data[0];Fe(!!H);const te=H,ie=(te==null?void 0:te.error)||((B=te[0])===null||B===void 0?void 0:B.error);if(ie){le(Lt,`RPC '${e}' stream ${o} received error:`,ie);const fe=ie.status;let _e=function(P){const x=lt[P];if(x!==void 0)return Wv(x)}(fe),k=ie.message;_e===void 0&&(_e=G.INTERNAL,k="Unknown error status: "+fe+" with message "+ie.message),j=!0,q.Do(new oe(_e,k)),I.close()}else le(Lt,`RPC '${e}' stream ${o} received:`,H),q.vo(H)}}),U(f,vv.STAT_EVENT,b=>{b.stat===Ld.PROXY?le(Lt,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===Ld.NOPROXY&&le(Lt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{q.bo()},0),q}}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(r){return new CS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t,s,o,l,c,f,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new i_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new oe(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _C extends s_{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=PS(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Zn(c.readTime):Ie.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=Gd(this.serializer),t.addTarget=function(l,c){let f;const p=c.target;if(f=Bd(p)?{documents:kS(l,p)}:{query:DS(l,p).ct},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Kv(l,c.resumeToken);const y=qd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=tc(l,c.snapshotVersion.toTimestamp());const y=qd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=bS(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=Gd(this.serializer),t.removeTarget=e,this.c_(t)}}class EC extends s_{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=NS(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=Gd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>xS(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,Wd(t,s),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(G.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.ko(e,Wd(t,s),o,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(G.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class TC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Pr(t),this.C_=!1):le("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{s.enqueueAndForget(async()=>{cs(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Se(p);y.k_.add(4),await il(y),y.K_.set("Unknown"),y.k_.delete(4),await Cc(y)}(this))})}),this.K_=new TC(s,o)}}async function Cc(r){if(cs(r))for(const e of r.q_)await e(!0)}async function il(r){for(const e of r.q_)await e(!1)}function o_(r,e){const t=Se(r);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Rf(t)?Af(t):ko(t).s_()&&Cf(t,e))}function Sf(r,e){const t=Se(r),s=ko(t);t.B_.delete(e),s.s_()&&a_(t,e),t.B_.size===0&&(s.s_()?s.a_():cs(t)&&t.K_.set("Unknown"))}function Cf(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ko(r).V_(e)}function a_(r,e){r.U_.xe(e),ko(r).m_(e)}function Af(r){r.U_=new wS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.B_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),ko(r).start(),r.K_.F_()}function Rf(r){return cs(r)&&!ko(r).i_()&&r.B_.size>0}function cs(r){return Se(r).k_.size===0}function l_(r){r.U_=void 0}async function SC(r){r.K_.set("Online")}async function CC(r){r.B_.forEach((e,t)=>{Cf(r,e)})}async function AC(r,e){l_(r),Rf(r)?(r.K_.O_(e),Af(r)):r.K_.set("Unknown")}async function RC(r,e,t){if(r.K_.set("Online"),e instanceof Gv&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const f of l.targetIds)o.B_.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.B_.delete(f),o.U_.removeTarget(f))}(r,e)}catch(s){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rc(r,s)}else if(e instanceof Uu?r.U_.$e(e):e instanceof Hv?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ie.min()))try{const s=await r_(r.localStore);t.compareTo(s)>=0&&await function(l,c){const f=l.U_.it(c);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.B_.get(y);w&&l.B_.set(y,w.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,y)=>{const w=l.B_.get(p);if(!w)return;l.B_.set(p,w.withResumeToken(Nt.EMPTY_BYTE_STRING,w.snapshotVersion)),a_(l,p);const I=new ci(w.target,p,y,w.sequenceNumber);Cf(l,I)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){le("RemoteStore","Failed to raise snapshot:",s),await rc(r,s)}}async function rc(r,e,t){if(!xo(e))throw e;r.k_.add(1),await il(r),r.K_.set("Offline"),t||(t=()=>r_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Cc(r)})}function u_(r,e){return e().catch(t=>rc(r,t,e))}async function Ac(r){const e=Se(r),t=Ei(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;PC(e);)try{const o=await hC(e.localStore,s);if(o===null){e.L_.length===0&&t.a_();break}s=o.batchId,xC(e,o)}catch(o){await rc(e,o)}c_(e)&&h_(e)}function PC(r){return cs(r)&&r.L_.length<10}function xC(r,e){r.L_.push(e);const t=Ei(r);t.s_()&&t.f_&&t.g_(e.mutations)}function c_(r){return cs(r)&&!Ei(r).i_()&&r.L_.length>0}function h_(r){Ei(r).start()}async function NC(r){Ei(r).w_()}async function kC(r){const e=Ei(r);for(const t of r.L_)e.g_(t.mutations)}async function DC(r,e,t){const s=r.L_.shift(),o=vf.from(s,e,t);await u_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Ac(r)}async function OC(r,e){e&&Ei(r).f_&&await async function(s,o){if(function(c){return vS(c)&&c!==G.ABORTED}(o.code)){const l=s.L_.shift();Ei(s).__(),await u_(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Ac(s)}}(r,e),c_(r)&&h_(r)}async function ay(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const s=cs(t);t.k_.add(3),await il(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Cc(t)}async function bC(r,e){const t=Se(r);e?(t.k_.delete(2),await Cc(t)):e||(t.k_.add(2),await il(t),t.K_.set("Unknown"))}function ko(r){return r.W_||(r.W_=function(t,s,o){const l=Se(t);return l.b_(),new _C(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:SC.bind(null,r),mo:CC.bind(null,r),po:AC.bind(null,r),R_:RC.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Rf(r)?Af(r):r.K_.set("Unknown")):(await r.W_.stop(),l_(r))})),r.W_}function Ei(r){return r.G_||(r.G_=function(t,s,o){const l=Se(t);return l.b_(),new EC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:NC.bind(null,r),po:OC.bind(null,r),p_:kC.bind(null,r),y_:DC.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Ac(r)):(await r.G_.stop(),r.L_.length>0&&(le("RemoteStore",`Stopping write stream with ${r.L_.length} pending writes`),r.L_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Pf(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xf(r,e){if(Pr("AsyncQueue",`${e}: ${r}`),xo(r))return new oe(G.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||me.comparator(t.key,s.key):(t,s)=>me.comparator(t.key,s.key),this.keyedMap=Oa(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ho;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.z_=new et(me.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Te():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Io{constructor(e,t,s,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Io(e,t,ho.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class VC{constructor(){this.queries=uy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Se(t),l=o.queries;o.queries=uy(),l.forEach((c,f)=>{for(const p of f.J_)p.onError(s)})})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function uy(){return new us(r=>Ov(r),_c)}async function d_(r,e){const t=Se(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new jC,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=xf(c,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Nf(t)}async function f_(r,e){const t=Se(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function LC(r,e){const t=Se(r);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.J_)f.ta(o)&&(s=!0);c.H_=o}}s&&Nf(t)}function MC(r,e,t){const s=Se(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function Nf(r){r.X_.forEach(e=>{e.next()})}var Qd,cy;(cy=Qd||(Qd={})).na="default",cy.Cache="cache";class p_{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Io(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.key=e}}class g_{constructor(e){this.key=e}}class FC{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=xe(),this.mutatedKeys=xe(),this.Va=bv(e),this.ma=new ho(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new ly,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,I)=>{const A=o.get(w),j=Ec(this.query,I)?I:null,q=!!A&&this.mutatedKeys.has(A.key),U=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let b=!1;A&&j?A.data.isEqual(j.data)?q!==U&&(s.track({type:3,doc:j}),b=!0):this.ya(A,j)||(s.track({type:2,doc:j}),b=!0,(p&&this.Va(j,p)>0||y&&this.Va(j,y)<0)&&(f=!0)):!A&&j?(s.track({type:0,doc:j}),b=!0):A&&!j&&(s.track({type:1,doc:A}),b=!0,(p||y)&&(f=!0)),b&&(j?(c=c.add(j),l=U?l.add(w):l.delete(w)):(c=c.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{ma:c,pa:s,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((w,I)=>function(j,q){const U=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return U(j)-U(q)}(w.type,I.type)||this.Va(w.doc,I.doc)),this.wa(s),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,c.length!==0||y?{snapshot:new Io(this.query,e.ma,l,c,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ly,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=xe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new g_(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new m_(s))}),t}va(e){this.da=e.ds,this.Ra=xe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Io.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class UC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class BC{constructor(e){this.key=e,this.Fa=!1}}class zC{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new us(f=>Ov(f),_c),this.Oa=new Map,this.Na=new Set,this.La=new et(me.comparator),this.Ba=new Map,this.ka=new wf,this.qa={},this.Qa=new Map,this.Ka=To.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function $C(r,e,t=!0){const s=T_(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await y_(s,e,t,!0),o}async function qC(r,e){const t=T_(r);await y_(t,e,!0,!1)}async function y_(r,e,t,s){const o=await dC(r.localStore,Jn(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await WC(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&o_(r.remoteStore,o),f}async function WC(r,e,t,s,o){r.Ua=(I,A,j)=>async function(U,b,B,H){let te=b.view.ga(B);te.ss&&(te=await iy(U.localStore,b.query,!1).then(({documents:k})=>b.view.ga(k,te)));const ie=H&&H.targetChanges.get(b.targetId),fe=H&&H.targetMismatches.get(b.targetId)!=null,_e=b.view.applyChanges(te,U.isPrimaryClient,ie,fe);return dy(U,b.targetId,_e.ba),_e.snapshot}(r,I,A,j);const l=await iy(r.localStore,e,!0),c=new FC(e,l.ds),f=c.ga(l.documents),p=rl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=c.applyChanges(f,r.isPrimaryClient,p);dy(r,t,y.ba);const w=new UC(e,t,c);return r.xa.set(e,w),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function HC(r,e,t){const s=Se(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(c=>!_c(c,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Kd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Sf(s.remoteStore,o.targetId),Yd(s,o.targetId)}).catch(Po)):(Yd(s,o.targetId),await Kd(s.localStore,o.targetId,!0))}async function GC(r,e){const t=Se(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Sf(t.remoteStore,s.targetId))}async function KC(r,e,t){const s=tA(r);try{const o=await function(c,f){const p=Se(c),y=mt.now(),w=f.reduce((j,q)=>j.add(q.key),xe());let I,A;return p.persistence.runTransaction("Locally write mutations","readwrite",j=>{let q=xr(),U=xe();return p.hs.getEntries(j,w).next(b=>{q=b,q.forEach((B,H)=>{H.isValidDocument()||(U=U.add(B))})}).next(()=>p.localDocuments.getOverlayedDocuments(j,q)).next(b=>{I=b;const B=[];for(const H of f){const te=fS(H,I.get(H.key).overlayedDocument);te!=null&&B.push(new Ii(H.key,te,Cv(te.value.mapValue),nn.exists(!0)))}return p.mutationQueue.addMutationBatch(j,y,B,f)}).next(b=>{A=b;const B=b.applyToLocalDocumentSet(I,U);return p.documentOverlayCache.saveOverlays(j,b.batchId,B)})}).then(()=>({batchId:A.batchId,changes:Vv(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(c,f,p){let y=c.qa[c.currentUser.toKey()];y||(y=new et(ke)),y=y.insert(f,p),c.qa[c.currentUser.toKey()]=y}(s,o.batchId,t),await sl(s,o.changes),await Ac(s.remoteStore)}catch(o){const l=xf(o,"Failed to persist write");t.reject(l)}}async function v_(r,e){const t=Se(r);try{const s=await uC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?Fe(c.Fa):o.removedDocuments.size>0&&(Fe(c.Fa),c.Fa=!1))}),await sl(t,s,e)}catch(s){await Po(s)}}function hy(r,e,t){const s=Se(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,c)=>{const f=c.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(c,f){const p=Se(c);p.onlineState=f;let y=!1;p.queries.forEach((w,I)=>{for(const A of I.J_)A.ea(f)&&(y=!0)}),y&&Nf(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QC(r,e,t){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ba.get(e),l=o&&o.key;if(l){let c=new et(me.comparator);c=c.insert(l,Ft.newNoDocument(l,Ie.min()));const f=xe().add(l),p=new Ic(Ie.min(),new Map,new et(ke),c,f);await v_(s,p),s.La=s.La.remove(l),s.Ba.delete(e),kf(s)}else await Kd(s.localStore,e,!1).then(()=>Yd(s,e,t)).catch(Po)}async function YC(r,e){const t=Se(r),s=e.batch.batchId;try{const o=await lC(t.localStore,e);E_(t,s,null),__(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await sl(t,o)}catch(o){await Po(o)}}async function XC(r,e,t){const s=Se(r);try{const o=await function(c,f){const p=Se(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,f).next(I=>(Fe(I!==null),w=I.keys(),p.mutationQueue.removeMutationBatch(y,I))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(s.localStore,e);E_(s,e,t),__(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await sl(s,o)}catch(o){await Po(o)}}function __(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function E_(r,e,t){const s=Se(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Yd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||w_(r,s)})}function w_(r,e){r.Na.delete(e.path.canonicalString());const t=r.La.get(e);t!==null&&(Sf(r.remoteStore,t),r.La=r.La.remove(e),r.Ba.delete(t),kf(r))}function dy(r,e,t){for(const s of t)s instanceof m_?(r.ka.addReference(s.key,e),JC(r,s)):s instanceof g_?(le("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||w_(r,s.key)):Te()}function JC(r,e){const t=e.key,s=t.path.canonicalString();r.La.get(t)||r.Na.has(s)||(le("SyncEngine","New document in limbo: "+t),r.Na.add(s),kf(r))}function kf(r){for(;r.Na.size>0&&r.La.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new me(Qe.fromString(e)),s=r.Ka.next();r.Ba.set(s,new BC(t)),r.La=r.La.insert(t,s),o_(r.remoteStore,new ci(Jn(mf(t.path)),s,"TargetPurposeLimboResolution",gc.oe))}}async function sl(r,e,t){const s=Se(r),o=[],l=[],c=[];s.xa.isEmpty()||(s.xa.forEach((f,p)=>{c.push(s.Ua(p,e,t).then(y=>{var w;if((y||t)&&s.isPrimaryClient){const I=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(y){o.push(y);const I=If.zi(p.targetId,y);l.push(I)}}))}),await Promise.all(c),s.Ma.R_(o),await async function(p,y){const w=Se(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>K.forEach(y,A=>K.forEach(A.Wi,j=>w.persistence.referenceDelegate.addReference(I,A.targetId,j)).next(()=>K.forEach(A.Gi,j=>w.persistence.referenceDelegate.removeReference(I,A.targetId,j)))))}catch(I){if(!xo(I))throw I;le("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const A=I.targetId;if(!I.fromCache){const j=w.us.get(A),q=j.snapshotVersion,U=j.withLastLimboFreeSnapshotVersion(q);w.us=w.us.insert(A,U)}}}(s.localStore,l))}async function ZC(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const s=await n_(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(f=>{f.forEach(p=>{p.reject(new oe(G.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sl(t,s.Ts)}}function eA(r,e){const t=Se(r),s=t.Ba.get(e);if(s&&s.Fa)return xe().add(s.key);{let o=xe();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const f=t.xa.get(c);o=o.unionWith(f.view.fa)}return o}}function T_(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=v_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QC.bind(null,e),e.Ma.R_=LC.bind(null,e.eventManager),e.Ma.Wa=MC.bind(null,e.eventManager),e}function tA(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XC.bind(null,e),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return aC(this.persistence,new sC,e.initialUser,this.serializer)}ja(e){return new t_(Tf.ei,this.serializer)}za(e){return new pC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class nA extends ic{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Fe(this.persistence.referenceDelegate instanceof nc);const s=this.persistence.referenceDelegate.garbageCollector;return new qS(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new t_(s=>nc.ei(s,t),this.serializer)}}class Xd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>hy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZC.bind(null,this.syncEngine),await bC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VC}()}createDatastore(e){const t=Sc(e.databaseInfo.databaseId),s=function(l){return new vC(l)}(e.databaseInfo);return function(l,c,f,p){return new wC(l,c,f,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,c,f){return new IC(s,o,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>hy(this.syncEngine,t,0),function(){return oy.p()?new oy:new mC}())}createSyncEngine(e,t){return function(o,l,c,f,p,y,w){const I=new zC(o,l,c,f,p,y);return w&&(I.$a=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);le("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await il(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Mt.UNAUTHENTICATED,this.clientId=Tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async c=>{le("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(le("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=xf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Sd(r,e){r.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await n_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function fy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await iA(r);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>ay(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>ay(e.remoteStore,o)),r._onlineComponents=e}async function iA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;vo("Error using user provided cache. Falling back to memory cache: "+t),await Sd(r,new ic)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Sd(r,new nA(void 0));return r._offlineComponents}async function S_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await fy(r,r._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await fy(r,new Xd))),r._onlineComponents}function sA(r){return S_(r).then(e=>e.syncEngine)}async function C_(r){const e=await S_(r),t=e.eventManager;return t.onListen=$C.bind(null,e.syncEngine),t.onUnlisten=HC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GC.bind(null,e.syncEngine),t}function oA(r,e,t={}){const s=new Cr;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,f,p,y){const w=new I_({next:A=>{w.eu(),c.enqueueAndForget(()=>f_(l,I));const j=A.docs.has(f);!j&&A.fromCache?y.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&A.fromCache&&p&&p.source==="server"?y.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),I=new p_(mf(f.path),w,{includeMetadataChanges:!0,ua:!0});return d_(l,I)}(await C_(r),r.asyncQueue,e,t,s)),s.promise}function aA(r,e,t={}){const s=new Cr;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,f,p,y){const w=new I_({next:A=>{w.eu(),c.enqueueAndForget(()=>f_(l,I)),A.fromCache&&p.source==="server"?y.reject(new oe(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),I=new p_(f,w,{includeMetadataChanges:!0,ua:!0});return d_(l,I)}(await C_(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r,e,t){if(!t)throw new oe(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lA(r,e,t,s){if(e===!0&&s===!0)throw new oe(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function my(r){if(!me.isDocumentKey(r))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function gy(r){if(me.isDocumentKey(r))throw new oe(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Rc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function Mn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rc(r);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new EI;switch(s.type){case"firstParty":return new SI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=py.get(t);s&&(le("ComponentProvider","Removing Datastore"),py.delete(t),s.terminate())}(this),Promise.resolve()}}function uA(r,e,t,s={}){var o;const l=(r=Mn(r,Pc))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),s.mockUserToken){let f,p;if(typeof s.mockUserToken=="string")f=s.mockUserToken,p=Mt.MOCK_USER;else{f=Y0(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mt(y)}r._authCredentials=new wI(new wv(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Wt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class mi extends hs{constructor(e,t,s){super(e,t,mf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new me(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function Do(r,e,...t){if(r=It(r),R_("collection","path",e),r instanceof Pc){const s=Qe.fromString(e,...t);return gy(s),new mi(r,null,s)}{if(!(r instanceof Wt||r instanceof mi))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return gy(s),new mi(r.firestore,null,s)}}function Nr(r,e,...t){if(r=It(r),arguments.length===1&&(e=Tv.newId()),R_("doc","path",e),r instanceof Pc){const s=Qe.fromString(e,...t);return my(s),new Wt(r,null,new me(s))}{if(!(r instanceof Wt||r instanceof mi))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return my(s),new Wt(r.firestore,r instanceof mi?r.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new i_(this,"async_queue_retry"),this.fu=()=>{const s=Id();s&&le("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=Id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Cr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!xo(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(s);throw Pr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Pf.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&Te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class ds extends Pc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new vy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vy(e),this._firestoreClient=void 0,await e}}}function cA(r,e){const t=typeof r=="object"?r:dv(),s=typeof r=="string"?r:"(default)",o=uf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=K0("firestore");l&&uA(o,...l)}return o}function xc(r){if(r._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hA(r),r._firestoreClient}function hA(r){var e,t,s;const o=r._freezeSettings(),l=function(f,p,y,w){return new FI(f,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,A_(w.experimentalLongPollingOptions),w.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new rA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Nt.fromBase64String(e))}catch(t){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new So(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^__.*__$/;class fA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new nl(e,this.data,t,this.fieldTransforms)}}class P_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class jf{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Lu(e),o}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return sc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(x_(this.Mu)&&dA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class pA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Sc(e)}$u(e,t,s,o=!1){return new jf({Mu:e,methodName:t,Ku:s,path:xt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function al(r){const e=r._freezeSettings(),t=Sc(r._databaseId);return new pA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Vf(r,e,t,s,o,l={}){const c=r.$u(l.merge||l.mergeFields?2:0,e,t,o);Lf("Data must be an object, but it was:",c,s);const f=D_(s,c);let p,y;if(l.merge)p=new hn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const A=Jd(e,I,t);if(!c.contains(A))throw new oe(G.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);b_(w,A)||w.push(A)}p=new hn(w),y=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=c.fieldTransforms;return new fA(new tn(f),p,y)}class Nc extends Df{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nc}}function N_(r,e,t,s){const o=r.$u(1,e,t);Lf("Data must be an object, but it was:",o,s);const l=[],c=tn.empty();Ti(s,(p,y)=>{const w=Mf(e,p,t);y=It(y);const I=o.Bu(w);if(y instanceof Nc)l.push(w);else{const A=ll(y,I);A!=null&&(l.push(w),c.set(w,A))}});const f=new hn(l);return new P_(c,f,o.fieldTransforms)}function k_(r,e,t,s,o,l){const c=r.$u(1,e,t),f=[Jd(e,s,t)],p=[o];if(l.length%2!=0)throw new oe(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)f.push(Jd(e,l[A])),p.push(l[A+1]);const y=[],w=tn.empty();for(let A=f.length-1;A>=0;--A)if(!b_(y,f[A])){const j=f[A];let q=p[A];q=It(q);const U=c.Bu(j);if(q instanceof Nc)y.push(j);else{const b=ll(q,U);b!=null&&(y.push(j),w.set(j,b))}}const I=new hn(y);return new P_(w,I,c.fieldTransforms)}function mA(r,e,t,s=!1){return ll(t,r.$u(s?4:3,e))}function ll(r,e){if(O_(r=It(r)))return Lf("Unsupported field value:",e,r),D_(r,e);if(r instanceof Df)return function(s,o){if(!x_(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let c=0;for(const f of s){let p=ll(f,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:tc(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:tc(o.serializer,l)}}if(s instanceof Of)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof So)return{bytesValue:Kv(o.serializer,s._byteString)};if(s instanceof Wt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ef(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof bf)return function(c,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return gf(f.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${Rc(s)}`)}(r,e)}function D_(r,e){const t={};return Iv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(r,(s,o)=>{const l=ll(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function O_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof Of||r instanceof So||r instanceof Wt||r instanceof Df||r instanceof bf)}function Lf(r,e,t){if(!O_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Rc(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function Jd(r,e,t){if((e=It(e))instanceof ol)return e._internalPath;if(typeof e=="string")return Mf(r,e);throw sc("Field path arguments must be of type string or ",r,!1,void 0,t)}const gA=new RegExp("[~\\*/\\[\\]]");function Mf(r,e,t){if(e.search(gA)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ol(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sc(r,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new oe(G.INVALID_ARGUMENT,f+r+p)}function b_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yA extends j_{data(){return super.data()}}function kc(r,e){return typeof e=="string"?Mf(r,e):e instanceof ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new oe(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}class V_ extends Ff{}function oc(r,e,...t){let s=[];e instanceof Ff&&s.push(e),s=s.concat(t),function(l){const c=l.filter(p=>p instanceof Bf).length,f=l.filter(p=>p instanceof Dc).length;if(c>1||c>0&&f>0)throw new oe(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Dc extends V_{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Dc(e,t,s)}_apply(e){const t=this._parse(e);return L_(e._query,t),new hs(e.firestore,e.converter,zd(e._query,t))}_parse(e){const t=al(e.firestore);return function(l,c,f,p,y,w,I){let A;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new oe(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){wy(I,w);const j=[];for(const q of I)j.push(Ey(p,l,q));A={arrayValue:{values:j}}}else A=Ey(p,l,I)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||wy(I,w),A=mA(f,c,I,w==="in"||w==="not-in");return ut.create(y,w,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Uf(r,e,t){const s=e,o=kc("where",r);return Dc._create(o,s,t)}class Bf extends Ff{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)L_(c,p),c=zd(c,p)}(e._query,t),new hs(e.firestore,e.converter,zd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zf extends V_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zf(e,t)}_apply(e){const t=function(o,l,c){if(o.startAt!==null)throw new oe(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ka(l,c)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new No(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function _y(r,e="asc"){const t=e,s=kc("orderBy",r);return zf._create(s,t)}function Ey(r,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new oe(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dv(e)&&t.indexOf("/")!==-1)throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!me.isDocumentKey(s))throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ug(r,new me(s))}if(t instanceof Wt)return Ug(r,t._key);throw new oe(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rc(t)}.`)}function wy(r,e){if(!Array.isArray(r)||r.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L_(r,e){const t=function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _A{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ti(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(c=>st(c.doubleValue));return new bf(l)}convertGeoPoint(e){return new Of(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=vc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const t=yi(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);Fe(e_(s));const o=new Ha(s.get(1),s.get(3)),l=new me(s.popFirst(5));return o.isEqual(t)||Pr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class M_ extends j_{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(kc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Bu extends M_{data(e={}){return super.data(e)}}class EA{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ja(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Bu(this._firestore,this._userDataWriter,s.key,s,new ja(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(f=>{const p=new Bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new Bu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),w=c.indexOf(f.doc.key)),{type:wA(f.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(r){r=Mn(r,Wt);const e=Mn(r.firestore,ds);return oA(xc(e),r._key).then(t=>SA(e,r,t))}class U_ extends _A{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Oc(r){r=Mn(r,hs);const e=Mn(r.firestore,ds),t=xc(e),s=new U_(e);return vA(r._query),aA(t,r._query).then(o=>new EA(e,s,r,o))}function B_(r,e,t){r=Mn(r,Wt);const s=Mn(r.firestore,ds),o=$f(r.converter,e,t);return bc(s,[Vf(al(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,nn.none())])}function TA(r,e,t,...s){r=Mn(r,Wt);const o=Mn(r.firestore,ds),l=al(o);let c;return c=typeof(e=It(e))=="string"||e instanceof ol?k_(l,"updateDoc",r._key,e,t,s):N_(l,"updateDoc",r._key,e),bc(o,[c.toMutation(r._key,nn.exists(!0))])}function IA(r,e){const t=Mn(r.firestore,ds),s=Nr(r),o=$f(r.converter,e);return bc(t,[Vf(al(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,nn.exists(!1))]).then(()=>s)}function bc(r,e){return function(s,o){const l=new Cr;return s.asyncQueue.enqueueAndForget(async()=>KC(await sA(s),o,l)),l.promise}(xc(r),e)}function SA(r,e,t){const s=t.docs.get(e._key),o=new U_(r);return new M_(r,o,e._key,s,new ja(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=al(e)}set(e,t,s){this._verifyNotCommitted();const o=Cd(e,this._firestore),l=$f(o.converter,t,s),c=Vf(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(c.toMutation(o._key,nn.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Cd(e,this._firestore);let c;return c=typeof(t=It(t))=="string"||t instanceof ol?k_(this._dataReader,"WriteBatch.update",l._key,t,s,o):N_(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cd(e,this._firestore);return this._mutations=this._mutations.concat(new yf(t._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cd(r,e){if((r=It(r)).firestore!==e)throw new oe(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(r){return xc(r=Mn(r,ds)),new CA(r,e=>bc(r,e))}(function(e,t=!0){(function(o){Ro=o})(Ao),yo(new rs("firestore",(s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new ds(new TI(s.getProvider("auth-internal")),new AI(s.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(y.options.projectId,w)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),pi(bg,"4.7.5",e),pi(bg,"4.7.5","esm2017")})();var RA="firebase",PA="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(RA,PA,"app");function qf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xA=z_,$_=new el("auth","Firebase",z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new af("@firebase/auth");function NA(r,...e){ac.logLevel<=Pe.WARN&&ac.warn(`Auth (${Ao}): ${r}`,...e)}function zu(r,...e){ac.logLevel<=Pe.ERROR&&ac.error(`Auth (${Ao}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r,...e){throw Wf(r,...e)}function er(r,...e){return Wf(r,...e)}function q_(r,e,t){const s=Object.assign(Object.assign({},xA()),{[e]:t});return new el("auth","Firebase",s).create(e,{appName:r.name})}function Ar(r){return q_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return $_.create(r,...e)}function Ee(r,e,...t){if(!r)throw Wf(e,...t)}function Tr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw zu(e),new Error(e)}function kr(r,e){r||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function kA(){return Ty()==="http:"||Ty()==="https:"}function Ty(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kA()||eT()||"connection"in navigator)?navigator.onLine:!0}function OA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=X0()||tT()}get(){return DA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r,e){kr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new ul(3e4,6e4);function Si(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ci(r,e,t,s,o={}){return H_(r,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=tl(Object.assign({key:r.config.apiKey},c)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return Z0()||(y.referrerPolicy="no-referrer"),W_.fetch()(G_(r,r.config.apiHost,t,f),y)})}async function H_(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},bA),e);try{const o=new LA(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ju(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ju(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw ju(r,"user-disabled",c);const w=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw q_(r,w,y);Fn(r,w)}}catch(o){if(o instanceof Dr)throw o;Fn(r,"network-request-failed",{message:String(o)})}}async function cl(r,e,t,s,o={}){const l=await Ci(r,e,t,s,o);return"mfaPendingCredential"in l&&Fn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function G_(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?Hf(r.config,o):`${r.config.apiScheme}://${o}`}function VA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(er(this.auth,"network-request-failed")),jA.get())})}}function ju(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=er(r,e,s);return o.customData._tokenResponse=t,o}function Iy(r){return r!==void 0&&r.enterprise!==void 0}class MA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FA(r,e){return Ci(r,"GET","/v2/recaptchaConfig",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(r,e){return Ci(r,"POST","/v1/accounts:delete",e)}async function K_(r,e){return Ci(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BA(r,e=!1){const t=It(r),s=await t.getIdToken(e),o=Gf(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Ua(Ad(o.auth_time)),issuedAtTime:Ua(Ad(o.iat)),expirationTime:Ua(Ad(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ad(r){return Number(r)*1e3}function Gf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=sv(t);return o?JSON.parse(o):(zu("Failed to decode base64 JWT payload"),null)}catch(o){return zu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sy(r){const e=Gf(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Dr&&zA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function zA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ua(this.lastLoginAt),this.creationTime=Ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Xa(r,K_(t,{idToken:s}));Ee(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Q_(l.providerUserInfo):[],f=WA(r.providerData,c),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),w=p?y:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ef(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,I)}async function qA(r){const e=It(r);await lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WA(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Q_(r){return r.map(e=>{var{providerId:t}=e,s=qf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(r,e){const t=await H_(r,{},async()=>{const s=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=G_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",W_.fetch()(c,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GA(r,e){return Ci(r,"POST","/v2/accounts:revokeToken",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Sy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await HA(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new fo;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=qf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $A(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ef(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BA(this,e)}reload(){return qA(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await lc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await Xa(this,UA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,c,f,p,y,w;const I=(s=t.displayName)!==null&&s!==void 0?s:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(f=t.tenantId)!==null&&f!==void 0?f:void 0,b=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,B=(y=t.createdAt)!==null&&y!==void 0?y:void 0,H=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:te,emailVerified:ie,isAnonymous:fe,providerData:_e,stsTokenManager:k}=t;Ee(te&&k,e,"internal-error");const S=fo.fromJSON(this.name,k);Ee(typeof te=="string",e,"internal-error"),ii(I,e.name),ii(A,e.name),Ee(typeof ie=="boolean",e,"internal-error"),Ee(typeof fe=="boolean",e,"internal-error"),ii(j,e.name),ii(q,e.name),ii(U,e.name),ii(b,e.name),ii(B,e.name),ii(H,e.name);const P=new Ir({uid:te,auth:e,email:A,emailVerified:ie,displayName:I,isAnonymous:fe,photoURL:q,phoneNumber:j,tenantId:U,stsTokenManager:S,createdAt:B,lastLoginAt:H});return _e&&Array.isArray(_e)&&(P.providerData=_e.map(x=>Object.assign({},x))),b&&(P._redirectEventId=b),P}static async _fromIdTokenResponse(e,t,s=!1){const o=new fo;o.updateFromServerResponse(t);const l=new Ir({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await lc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Q_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new fo;f.updateFromIdToken(s);const p=new Ir({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=new Map;function Sr(r){kr(r instanceof Function,"Expected a class definition");let e=Cy.get(r);return e?(kr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Cy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y_.type="NONE";const Ay=Y_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(r,e,t){return`firebase:${r}:${e}:${t}`}class po{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=$u(this.userKey,o.apiKey,l),this.fullPersistenceKey=$u("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new po(Sr(Ay),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Sr(Ay);const c=$u(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(c);if(w){const I=Ir._fromJSON(e,w);y!==l&&(f=I),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new po(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new po(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nE(e))return"Blackberry";if(rE(e))return"Webos";if(J_(e))return"Safari";if((e.includes("chrome/")||Z_(e))&&!e.includes("edge/"))return"Chrome";if(tE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function X_(r=Ut()){return/firefox\//i.test(r)}function J_(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z_(r=Ut()){return/crios\//i.test(r)}function eE(r=Ut()){return/iemobile/i.test(r)}function tE(r=Ut()){return/android/i.test(r)}function nE(r=Ut()){return/blackberry/i.test(r)}function rE(r=Ut()){return/webos/i.test(r)}function Kf(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KA(r=Ut()){var e;return Kf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QA(){return nT()&&document.documentMode===10}function iE(r=Ut()){return Kf(r)||tE(r)||rE(r)||nE(r)||/windows phone/i.test(r)||eE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(r,e=[]){let t;switch(r){case"Browser":t=Ry(Ut());break;case"Worker":t=`${Ry(Ut())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(r,e={}){return Ci(r,"GET","/v2/passwordPolicy",Si(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=6;class ZA{constructor(e){var t,s,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:JA,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Py(this),this.idTokenSubscription=new Py(this),this.beforeStateQueue=new YA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await K_(this,{idToken:e}),s=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Ar(this));const t=e?It(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XA(this),t=new ZA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await GA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&NA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fs(r){return It(r)}class Py{constructor(e){this.auth=e,this.observer=null,this.addObserver=cT(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tR(r){jc=r}function oE(r){return jc.loadJS(r)}function nR(){return jc.recaptchaEnterpriseScript}function rR(){return jc.gapiScript}function iR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class sR{constructor(){this.enterprise=new oR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aR="recaptcha-enterprise",aE="NO_RECAPTCHA";class lR{constructor(e){this.type=aR,this.auth=fs(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{FA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new MA(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,c,f){const p=window.grecaptcha;Iy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(aE)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sR().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&Iy(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=nR();p.length!==0&&(p+=f),oE(p).then(()=>{o(f,l,c)}).catch(y=>{c(y)})}}).catch(f=>{c(f)})})}}async function xy(r,e,t,s=!1,o=!1){const l=new lR(r);let c;if(o)c=aE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function tf(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xy(r,e,t,t==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await xy(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r,e){const t=uf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Qu(l,e??{}))return o;Fn(o,"already-initialized")}return t.initialize({options:e})}function cR(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Sr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function hR(r,e,t){const s=fs(r);Ee(s._canInitEmulator,s,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=lE(e),{host:c,port:f}=dR(e),p=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${c}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),fR()}function lE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function dR(r){const e=lE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ny(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Ny(c)}}}function Ny(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function fR(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,t){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function pR(r,e){return Ci(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(r,e){return cl(r,"POST","/v1/accounts:signInWithPassword",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Si(r,e))}async function yR(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Qf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ja(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ja(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,t,"signInWithPassword",mR);case"emailLink":return gR(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,s,"signUpPassword",pR);case"emailLink":return yR(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(r,e){return cl(r,"POST","/v1/accounts:signInWithIdp",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="http://localhost";class ss extends Qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=qf(t,["providerId","signInMethod"]);if(!s||!o)return null;const c=new ss(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return mo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,mo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mo(e,t)}buildRequest(){const e={requestUri:vR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ER(r){const e=Na(ka(r)).link,t=e?Na(ka(e)).deep_link_id:null,s=Na(ka(r)).deep_link_id;return(s?Na(ka(s)).link:null)||s||t||e||r}class Yf{constructor(e){var t,s,o,l,c,f;const p=Na(ka(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(s=p.oobCode)!==null&&s!==void 0?s:null,I=_R((o=p.mode)!==null&&o!==void 0?o:null);Ee(y&&w&&I,"argument-error"),this.apiKey=y,this.operation=I,this.code=w,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=ER(e);try{return new Yf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Ja._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Yf.parseLink(t);return Ee(s,"argument-error"),Ja._fromEmailAndCode(e,s.code,s.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends uE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends hl{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ss._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return oi.credential(t,s)}catch{return null}}}oi.GOOGLE_SIGN_IN_METHOD="google.com";oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends hl{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends hl{constructor(){super("twitter.com")}static credential(e,t){return ss._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return li.credential(t,s)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(r,e){return cl(r,"POST","/v1/accounts:signUp",Si(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Ir._fromIdTokenResponse(e,s,o),c=ky(s);return new os({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ky(s);return new os({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ky(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Dr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new uc(e,t,s,o)}}function cE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uc._fromErrorAndOperation(r,l,e,s):l})}async function TR(r,e,t=!1){const s=await Xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return os._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(r,e,t=!1){const{auth:s}=r;if(Xn(s.app))return Promise.reject(Ar(s));const o="reauthenticate";try{const l=await Xa(r,cE(s,o,e,r),t);Ee(l.idToken,s,"internal-error");const c=Gf(l.idToken);Ee(c,s,"internal-error");const{sub:f}=c;return Ee(r.uid===f,s,"user-mismatch"),os._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Fn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hE(r,e,t=!1){if(Xn(r.app))return Promise.reject(Ar(r));const s="signIn",o=await cE(r,s,e),l=await os._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function SR(r,e){return hE(fs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(r){const e=fs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CR(r,e,t){if(Xn(r.app))return Promise.reject(Ar(r));const s=fs(r),c=await tf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&dE(r),p}),f=await os._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function AR(r,e,t){return Xn(r.app)?Promise.reject(Ar(r)):SR(It(r),Oo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&dE(r),s})}function RR(r,e,t,s){return It(r).onIdTokenChanged(e,t,s)}function PR(r,e,t){return It(r).beforeAuthStateChanged(e,t)}const cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1e3,NR=10;class pE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);QA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,NR):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},xR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pE.type="LOCAL";const kR=pE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mE.type="SESSION";const gE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Vc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),p=await DR(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const y=Xf("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(I){const A=I;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function bR(r){tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function jR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VR(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function LR(){return yE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebaseLocalStorageDb",MR=1,hc="firebaseLocalStorage",_E="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([hc],e?"readwrite":"readonly").objectStore(hc)}function FR(){const r=indexedDB.deleteDatabase(vE);return new dl(r).toPromise()}function nf(){const r=indexedDB.open(vE,MR);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(hc,{keyPath:_E})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(hc)?e(s):(s.close(),await FR(),e(await nf()))})})}async function Dy(r,e,t){const s=Lc(r,!0).put({[_E]:e,value:t});return new dl(s).toPromise()}async function UR(r,e){const t=Lc(r,!1).get(e),s=await new dl(t).toPromise();return s===void 0?null:s.value}function Oy(r,e){const t=Lc(r,!0).delete(e);return new dl(t).toPromise()}const BR=800,zR=3;class EE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>zR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vc._getInstance(LR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jR(),!this.activeServiceWorker)return;this.sender=new OR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nf();return await Dy(e,cc,"1"),await Oy(e,cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Dy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>UR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Oy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EE.type="LOCAL";const $R=EE;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r,e){return e?Sr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Qf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WR(r){return hE(r.auth,new Jf(r),r.bypassAuthState)}function HR(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),IR(t,new Jf(r),r.bypassAuthState)}async function GR(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),TR(t,new Jf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WR;case"linkViaPopup":case"linkViaRedirect":return GR;case"reauthViaPopup":case"reauthViaRedirect":return HR;default:Fn(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new ul(2e3,1e4);class co extends wE{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KR.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="pendingRedirect",qu=new Map;class YR extends wE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=qu.get(this.auth._key());if(!e){try{const s=await XR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}qu.set(this.auth._key(),e)}return this.bypassAuthState||qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XR(r,e){const t=eP(e),s=ZR(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function JR(r,e){qu.set(r._key(),e)}function ZR(r){return Sr(r._redirectPersistence)}function eP(r){return $u(QR,r.config.apiKey,r.name)}async function tP(r,e,t=!1){if(Xn(r.app))return Promise.reject(Ar(r));const s=fs(r),o=qR(s,e),c=await new YR(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=10*60*1e3;class rP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!TE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(er(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nP&&this.cachedEventUids.clear(),this.cachedEventUids.has(by(e))}saveEventToCache(e){this.cachedEventUids.add(by(e)),this.lastProcessedEventTime=Date.now()}}function by(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function TE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(r,e={}){return Ci(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aP=/^https?/;async function lP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await sP(r);for(const t of e)try{if(uP(t))return}catch{}Fn(r,"unauthorized-domain")}function uP(r){const e=Zd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!aP.test(t))return!1;if(oP.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new ul(3e4,6e4);function jy(){const r=tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function hP(r){return new Promise((e,t)=>{var s,o,l;function c(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),t(er(r,"network-request-failed"))},timeout:cP.get()})}if(!((o=(s=tr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=tr().gapi)===null||l===void 0)&&l.load)c();else{const f=iR("iframefcb");return tr()[f]=()=>{gapi.load?c():t(er(r,"network-request-failed"))},oE(`${rR()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function dP(r){return Wu=Wu||hP(r),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new ul(5e3,15e3),pP="__/auth/iframe",mP="emulator/auth/iframe",gP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vP(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Hf(e,mP):`https://${r.config.authDomain}/${pP}`,s={apiKey:e.apiKey,appName:r.name,v:Ao},o=yP.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${tl(s).slice(1)}`}async function _P(r){const e=await dP(r),t=tr().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:vP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gP,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=er(r,"network-request-failed"),f=tr().setTimeout(()=>{l(c)},fP.get());function p(){tr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wP=500,TP=600,IP="_blank",SP="http://localhost";class Vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CP(r,e,t,s=wP,o=TP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},EP),{width:s.toString(),height:o.toString(),top:l,left:c}),y=Ut().toLowerCase();t&&(f=Z_(y)?IP:t),X_(y)&&(e=e||SP,p.scrollbars="yes");const w=Object.entries(p).reduce((A,[j,q])=>`${A}${j}=${q},`,"");if(KA(y)&&f!=="_self")return AP(e||"",f),new Vy(null);const I=window.open(e||"",f,w);Ee(I,r,"popup-blocked");try{I.focus()}catch{}return new Vy(I)}function AP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="__/auth/handler",PP="emulator/auth/handler",xP=encodeURIComponent("fac");async function Ly(r,e,t,s,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Ao,eventId:o};if(e instanceof uE){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",uT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,I]of Object.entries({}))c[w]=I}if(e instanceof hl){const w=e.getScopes().filter(I=>I!=="");w.length>0&&(c.scopes=w.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const p=await r._getAppCheckToken(),y=p?`#${xP}=${encodeURIComponent(p)}`:"";return`${NP(r)}?${tl(f).slice(1)}${y}`}function NP({config:r}){return r.emulator?Hf(r,PP):`https://${r.authDomain}/${RP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="webStorageSupport";class kP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=tP,this._overrideRedirectResult=JR}async _openPopup(e,t,s,o){var l;kr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Ly(e,t,s,Zd(),o);return CP(e,c,Xf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Ly(e,t,s,Zd(),o);return bR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(kr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await _P(e),s=new rP(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rd,{type:Rd},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Rd];c!==void 0&&t(!!c),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iE()||J_()||Kf()}}const DP=kP;var My="@firebase/auth",Fy="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jP(r){yo(new rs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(r)},y=new eR(s,o,l,p);return cR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),yo(new rs("auth-internal",e=>{const t=fs(e.getProvider("auth").getImmediate());return(s=>new OP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(My,Fy,bP(r)),pi(My,Fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=5*60,LP=lv("authIdTokenMaxAge")||VP;let Uy=null;const MP=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>LP)return;const o=t==null?void 0:t.token;Uy!==o&&(Uy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function FP(r=dv()){const e=uf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=uR(r,{popupRedirectResolver:DP,persistence:[$R,kR,gE]}),s=lv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=MP(l.toString());PR(t,c,()=>c(t.currentUser)),RR(t,f=>c(f))}}const o=ov("auth");return o&&hR(t,`http://${o}`),t}function UP(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}tR({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=er("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",UP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jP("Browser");const BP={apiKey:"AIzaSyCCY04yZIph76N5CWCVpEiqR5j4RbPnVP8",authDomain:"admin-helper-9700e.firebaseapp.com",projectId:"admin-helper-9700e",storageBucket:"admin-helper-9700e.firebasestorage.app",messagingSenderId:"992028453882",appId:"1:992028453882:web:973785a68e07b3df845243"},IE=hv(BP),SE=FP(IE),rr=cA(IE);async function zP(r,e){const t=Do(rr,"usuarios"),s=oc(t,Uf("username","==",r));if(!(await Oc(s)).empty)throw new Error("❌ Username already taken");const l=`${r}@adminhelper.com`,f=(await CR(SE,l,e)).user;return await B_(Nr(t,f.uid),{username:r,role:"1"}),f}async function $P(r,e){if(!r.includes("@")){const o=Do(rr,"usuarios"),l=oc(o,Uf("username","==",r)),c=await Oc(l);if(!c.empty)r=c.docs[0].data().username;else throw new Error("❌ Username does not exist")}const t=`${r}@adminhelper.com`;return(await AR(SE,t,e)).user}const Zf=({message:r,show:e,onClose:t,duration:s=5e3})=>(J.useEffect(()=>{if(e){const o=setTimeout(()=>{t()},s);return()=>clearTimeout(o)}},[e,t,s]),v.jsx("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",style:{zIndex:1055},children:v.jsx("div",{className:`toast align-items-center text-bg-primary ${e?"show":"hide"}`,role:"alert","aria-live":"assertive","aria-atomic":"true",children:v.jsxs("div",{className:"d-flex",children:[v.jsx("div",{className:"toast-body",children:r}),v.jsx("button",{type:"button",className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:t})]})})})),ep="https://super-abuelo.github.io/admin-helper/assets/logo-Cyni-XaW.png";function qP({setShowForm:r}){const[e,t]=J.useState(""),[s,o]=J.useState(""),[l,c]=J.useState(!1),[f,p]=J.useState(""),y=async()=>{try{await zP(e,s),p("✅ Usuario creado exitosamente. Por favor, inicie sesión."),c(!0),t(""),o(""),setTimeout(()=>{c(!1),r(!1)},3e3)}catch(w){console.error("Error al crear el usuario:",w),p("❌ Error al crear el usuario. Intente nuevamente."),c(!0),setTimeout(()=>{c(!1)},3e3)}};return v.jsxs("div",{className:"d-flex justify-content-center",children:[v.jsx(Zf,{message:f,show:l,onClose:()=>c(!1),duration:3e3}),v.jsxs("div",{className:"card mt-3 p-4 w-50 rounded-4",children:[v.jsx("div",{className:"h-50",children:v.jsx("img",{src:ep,alt:"",height:100})}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-3 align-items-center justify-content-center",children:[v.jsx("h4",{className:"mb-4",children:"Creación de Cuenta"}),v.jsx("div",{className:"col-4 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fs-4",children:"Usuario:"})}),v.jsx("div",{className:"col-4",children:v.jsx("input",{type:"text",className:"form-control text-center",value:e,onChange:w=>t(w.target.value)})})]}),v.jsxs("div",{className:"row my-3 align-items-center justify-content-center",children:[v.jsx("div",{className:"col-4 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fs-4",children:"Contraseña:"})}),v.jsx("div",{className:"col-4",children:v.jsx("input",{type:"password",className:"form-control text-center",value:s,onChange:w=>o(w.target.value)})})]}),v.jsxs("div",{className:"d-flex my-3 align-items-center justify-content-evenly",children:[v.jsx("button",{className:"btn btn-secondary",onClick:()=>r(!1),children:"Volver"}),v.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Crear Cuenta"})]})]})]})]})}function WP({setShowForm:r,setUser:e}){const[t,s]=J.useState(""),[o,l]=J.useState(""),c=of(),f=async()=>{try{const p=await $P(t,o);if(p){const y=p,w=Nr(rr,"usuarios",y.uid),I=await F_(w);if(I.exists()){const A=I.data(),j={uid:y.uid,username:A.username,role:A.role};e(j),c("/cierrecaja",{state:{message:`👋 ¡Bienvenid@, ${j.username}!`}})}}}catch(p){console.error("Login failed:",p)}};return v.jsx("div",{className:"d-flex justify-content-center",children:v.jsxs("div",{className:"card mt-3 p-4 w-50 rounded-4",children:[v.jsx("div",{className:"h-50",children:v.jsx("img",{src:ep,alt:"",height:100})}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-3 align-items-center justify-content-center",children:[v.jsx("h4",{className:"mb-4",children:"Inicio de Sesión"}),v.jsx("div",{className:"col-4 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fs-4",children:"Usuario:"})}),v.jsx("div",{className:"col-4",children:v.jsx("input",{type:"",className:"form-control text-center",value:t,onChange:p=>s(p.target.value)})})]}),v.jsxs("div",{className:"row my-3 align-items-center justify-content-center",children:[v.jsx("div",{className:"col-4 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fs-4",children:"Contraseña:"})}),v.jsx("div",{className:"col-4",children:v.jsx("input",{type:"password",className:"form-control text-center",value:o,onChange:p=>l(p.target.value)})})]}),v.jsxs("div",{className:"d-flex my-3 align-items-center justify-content-evenly",children:[v.jsx("button",{className:"btn btn-secondary",onClick:()=>{f()},children:"Iniciar Sesión"}),v.jsx("button",{className:"btn btn-secondary",onClick:()=>r(!0),children:"Crear Cuenta"})]})]})]})})}const HP=({user:r,setUser:e})=>{const[t,s]=J.useState(!1);return v.jsx("div",{children:t?v.jsx(qP,{setShowForm:s}):v.jsx(WP,{setShowForm:s,user:r,setUser:e})})};function GP(r){const[e,t]=J.useState(0);function s(){t(c=>c>=r.length-1?c:c+1)}function o(){t(c=>c<=0?c:c-1)}function l(c){t(c)}return{currentStepIndex:e,step:r[e],steps:r,isFirstStep:e===0,isLastStep:e===r.length-1,goTo:l,next:s,back:o}}function KP({creditosData:r,creditosTotal:e,updateFields:t}){const s=c=>{c.preventDefault();const f={id:r.length+1,name:"",amount:0},p=[...r,f],y=p.reduce((w,I)=>w+I.amount,0);t({creditosData:p,creditosTotal:y})},o=(c,f,p)=>{const y=r.map(I=>I.id===c?{...I,[f]:f==="amount"?Number(p):p}:I),w=y.reduce((I,A)=>I+A.amount,0);t({creditosData:y,creditosTotal:w})},l=c=>{const f=r.filter(y=>y.id!==c),p=f.reduce((y,w)=>y+w.amount,0);t({creditosData:f,creditosTotal:p})};return v.jsxs("div",{children:[v.jsx("h1",{className:"my-3",children:"Créditos"}),v.jsx("div",{className:"d-flex justify-content-center",children:v.jsxs("table",{className:"table table-striped-columns table-bordered w-50 shadow",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"col-6",children:"Créditos - Nombres"}),v.jsx("th",{className:"col-3",children:"Monto"}),v.jsx("th",{className:"col-3",children:"Acciones"})]})}),v.jsx("tbody",{children:r.map(c=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("input",{className:"form-control border-0",value:c.name,onChange:f=>o(c.id,"name",f.target.value)})}),v.jsx("td",{children:v.jsx("input",{type:"number",className:"form-control border-0 text-center",value:c.amount,onChange:f=>o(c.id,"amount",f.target.value)})}),v.jsx("td",{children:v.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>l(c.id),children:"Eliminar"})})]},c.id))}),v.jsx("tfoot",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"Total"}),v.jsx("td",{colSpan:2,className:"text-center",children:e.toFixed(2)})]})})]})}),v.jsx("div",{className:"d-flex justify-content-center mt-3",children:v.jsx("button",{className:"btn btn-primary",onClick:s,children:"Agregar Crédito"})})]})}function QP({denominaciones:r,efectivoTotal:e,updateFields:t}){const s=[{key:"cincuentaMil",value:5e4,label:"50 000"},{key:"veinteMil",value:2e4,label:"20 000"},{key:"diezMil",value:1e4,label:"10 000"},{key:"cincoMil",value:5e3,label:"5 000"},{key:"dosMil",value:2e3,label:"2 000"},{key:"mil",value:1e3,label:"1 000"}],o=l=>Object.entries(l).reduce((c,[f,p])=>{const y={cincuentaMil:5e4,veinteMil:2e4,diezMil:1e4,cincoMil:5e3,dosMil:2e3,mil:1e3}[f];return c+y*p},0);return v.jsxs("div",{children:[v.jsx("h1",{className:"my-3",children:"Billetes"}),v.jsx("div",{className:"d-flex justify-content-center text-center",children:v.jsxs("table",{className:"table table-striped-columns table-bordered w-50 shadow",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"col-4",children:"Denominación"}),v.jsx("th",{className:"col-4",children:"Cantidad"}),v.jsx("th",{className:"col-4",children:"Total"})]})}),v.jsx("tbody",{children:s.map(({key:l,value:c,label:f})=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("label",{className:"my-2",children:f})}),v.jsx("td",{children:v.jsx("input",{type:"number",className:"form-control border-0 text-center",value:r[l],placeholder:"-",onChange:p=>{const y=Number(p.target.value)||0,w={...r,[l]:y};t({denominaciones:w,efectivoTotal:o(w)})}})}),v.jsx("td",{children:v.jsx("label",{className:"my-2",children:r[l]?r[l]*c:0})})]},l))})]})}),v.jsx("div",{className:"d-flex justify-content-center align-items-center",children:v.jsxs("label",{children:["Total Billetes: ",e]})})]})}function YP({cashOpening:r,updateFields:e}){const{apertura:t=0,facturasPagadas:s=0,facturasProcesadas:o=0,notasCredito:l=0,reintegros:c=0}=r,f=p=>{const y=p.apertura??t,w=p.facturasProcesadas??o,I=p.facturasPagadas??s,A=p.reintegros??c,j=p.notasCredito??l,q=y+w+A+I-j;e({...p,totalBruto:q})};return v.jsxs("div",{children:[v.jsx("h1",{className:"my-4",children:"1 / 3"}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"",children:"Apertura:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:t,required:!0,onChange:p=>{const y=p.target.value;e({apertura:y===""?0:Number.parseInt(y)})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Facturas Pagadas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:s,onChange:p=>{const y=p.target.value;e({facturasPagadas:y===""?0:Number.parseInt(y)}),f({facturasPagadas:Number(p.target.value)||0})}})})]}),v.jsxs("div",{className:"row justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Facturas Procesadas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:o,required:!0,onChange:p=>{const y=p.target.value;e({facturasProcesadas:y===""?0:Number.parseInt(y)}),f({facturasProcesadas:Number(p.target.value)||0})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Notas de Crédito (-):"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:l,onChange:p=>{const y=p.target.value;e({notasCredito:y===""?0:Number.parseInt(y)}),f({notasCredito:Number(p.target.value)||0})}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Reintegros:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:c,onChange:p=>{const y=p.target.value;e({reintegros:y===""?0:Number.parseInt(p.target.value)}),f({reintegros:Number(p.target.value)||0})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total Bruto:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!0,value:(t+o+c+s-l).toFixed(2),onChange:p=>{e({totalBruto:Number.parseInt(p.target.value)})}})})]})]})]})}function XP({denominacionesMonedas:r,monedasTotal:e,updateFields:t}){const s=[{key:"quinientos",value:500,label:"500"},{key:"cien",value:100,label:"100"},{key:"cincuenta",value:50,label:"50"},{key:"veinticinco",value:25,label:"25"},{key:"diez",value:10,label:"10"},{key:"cinco",value:5,label:"5"}],o=l=>Object.entries(l).reduce((c,[f,p])=>{const y={quinientos:500,cien:100,cincuenta:50,veinticinco:25,diez:10,cinco:5}[f];return c+y*p},0);return v.jsxs("div",{children:[v.jsx("h1",{className:"my-3",children:"Monedas"}),v.jsx("div",{className:"d-flex justify-content-center text-center",children:v.jsxs("table",{className:"table table-striped-columns table-bordered w-50 shadow",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"col-4",children:"Denominación"}),v.jsx("th",{className:"col-4",children:"Cantidad"}),v.jsx("th",{className:"col-4",children:"Total"})]})}),v.jsx("tbody",{children:s.map(({key:l,value:c,label:f})=>v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx("label",{className:"my-2",children:f})}),v.jsx("td",{children:v.jsx("input",{type:"number",className:"form-control border-0 text-center",value:r[l],placeholder:"-",onChange:p=>{const y=Number(p.target.value)||0,w={...r,[l]:y};t({denominacionesMonedas:w,monedasTotal:o(w)})}})}),v.jsx("td",{children:v.jsx("label",{className:"my-2",children:r[l]?r[l]*c:0})})]},l))})]})}),v.jsx("div",{className:"d-flex justify-content-center align-items-center",children:v.jsxs("label",{children:["Total Monedas: ",e]})})]})}function JP({servicesData:{serviciosBAC:r,depositosBAC:e,totalBAC:t,avanceBAC:s,serviciosTucan:o,depositosTucan:l,totalTucan:c,avanceBCR:f,notas:p},totalAmounts:{total:y},cashOpening:{totalBruto:w},totalAmounts:{diferencia:I},updateFields:A}){const j=U=>{const b=U.depositosBAC??e,B=U.serviciosBAC??r,H=b+B;A({...U,totalBAC:H})},q=U=>{const b=U.depositosTucan??l,B=U.serviciosTucan??o,H=b+B;A({...U,totalTucan:H})};return v.jsxs("div",{children:[v.jsx("h1",{className:"my-4",children:"3 / 3"}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Servicios BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:r,onChange:U=>{const b=U.target.value;A({serviciosBAC:Number.parseFloat(b)}),j({serviciosBAC:b===""?0:Number.parseFloat(b)})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Servicios Tucán:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:o,onChange:U=>{const b=U.target.value;q({serviciosTucan:b===""?0:Number.parseFloat(b)})}})})]}),v.jsxs("div",{className:"row justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Depósitos BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:e,onChange:U=>{const b=U.target.value;A({depositosBAC:b===""?0:Number.parseInt(b)}),j({depositosBAC:b===""?0:Number.parseInt(b)})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Depósitos Tucán:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:l,onChange:U=>{const b=U.target.value;q({depositosTucan:b===""?0:Number.parseInt(b)}),A({depositosTucan:Number.parseInt(U.target.value)})}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total BAC:"})}),v.jsx("div",{className:"col-2 d-flex",children:v.jsx("input",{type:"number",className:"form-control text-center",value:t==null?void 0:t.toFixed(2),readOnly:!0})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total Tucán:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:c==null?void 0:c.toFixed(2),readOnly:!0})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Avance BAC"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:s,onChange:U=>{const b=U.target.value;A({avanceBAC:b===""?0:Number.parseInt(b)})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Avance BCR:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:f,onChange:U=>{const b=U.target.value;A({avanceBCR:b===""?0:Number.parseInt(b)})}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("label",{className:"my-2",children:"Notas:"}),v.jsx("textarea",{className:"form-control my-1 w-50",value:p,onChange:U=>A({notas:U.target.value})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2",children:v.jsxs("label",{className:"fw-semibold",children:[" Total B: ",w]})}),v.jsx("div",{className:"col-2",children:v.jsxs("label",{className:"fw-semibold",children:[" Total: ",y]})}),v.jsx("div",{className:"col-2",children:v.jsxs("label",{className:"fw-semibold",children:[" Diferencia: ",I]})})]})]})]})}function ZP({totalAmounts:{dolares:r,colones:e,datafonosBAC:t,datafonosBCR:s,total:o,pagoProveedores:l,retirosDeCaja:c},cashOpening:{totalBruto:f},creditosTotal:p,efectivoTotal:y,monedasTotal:w,updateFields:I}){const A=j=>{const q=j.colones??e??0,U=j.datafonosBAC??t??0,b=j.datafonosBCR??s??0,B=j.pagoProveedores??l??0,H=j.retirosDeCaja??c??0,te=parseFloat((y+w+p+q+U+b+B+H).toFixed(2)),ie=parseFloat((te-(f??0)).toFixed(2));I({...j,total:te,diferencia:ie})};return v.jsxs("div",{children:[v.jsx("h1",{className:"my-4",children:"2 / 3"}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Efectivo:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!0,value:y})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Datáfonos BCR:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:s,onChange:j=>{const q=j.target.value;I({datafonosBCR:q===""?0:Number.parseInt(q)}),A({datafonosBCR:Number(j.target.value)||0})}})})]}),v.jsxs("div",{className:"row justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Monedas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:w,readOnly:!0})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Pago Proveedores:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:l,onChange:j=>{const q=j.target.value;A({pagoProveedores:Number(j.target.value)||0}),I({pagoProveedores:q===""?0:Number.parseInt(q)})}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Dólares ($/₡):"})}),v.jsxs("div",{className:"col-2 d-flex",children:[v.jsx("input",{type:"number",className:"form-control text-center w-50",placeholder:"$",value:r,onChange:j=>{const q=j.target.value===""?0:Number.parseInt(j.target.value),U=q*490;I({dolares:q,colones:U}),A({colones:U})}}),v.jsx("input",{type:"number",className:"form-control text-center w-50",placeholder:"₡",readOnly:!0,value:e})]}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Créditos:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:p,readOnly:!0})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Datáfonos BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:t,onChange:j=>{const q=j.target.value;I({datafonosBAC:q===""?0:Number.parseInt(q)}),A({datafonosBAC:Number(j.target.value)||0})}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Retiros de Caja:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",value:c,onChange:j=>{const q=j.target.value;A({retirosDeCaja:Number(j.target.value)||0}),I({retirosDeCaja:q===""?0:Number.parseInt(q)})}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!0,value:(y+w+e+t+s+l+p+c).toFixed(2)})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Diferencia:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!0,value:(o-f).toFixed(2),onChange:j=>{I({diferencia:Number.parseInt(j.target.value)})}})})]}),v.jsx("div",{className:"row my-3 justify-content-center",children:v.jsx("div",{className:"col",children:v.jsxs("label",{className:"fw-semibold",children:[" Total Bruto: ",f]})})})]})]})}async function ex(r,e){try{const t=Do(rr,r);console.log("Raw fecha value:",e.fecha);const s=e.fecha,[o,l,c]=s.split("/"),f=`${c}-${l}-${o}`,p=new Date(f);console.log("Processed fecha value:",p);const y={creditosData:e.creditosData,efectivoTotal:e.efectivoTotal,monedasTotal:e.monedasTotal,creditosTotal:e.creditosTotal,fecha:f,superMercado:e.superMercado,usuario:e.usuario,caja:e.caja},w=await IA(t,y);return console.log(y.fecha),console.log("Nuevo documento agregado con ID:",w.id),tx(w.id,e),w.id.toString()}catch(t){console.error("Error al agregar el nuevo documento:",t)}}async function tx(r,e){try{const t=AA(rr),s=Nr(rr,"cierresCaja",r);[{name:"cashOpening",data:e.cashOpening,docId:"cashOpening"},{name:"totalAmounts",data:e.totalAmounts,docId:"totalAmounts"},{name:"services",data:e.services,docId:"services"},{name:"denominaciones",data:e.denominaciones,docId:"denominaciones"},{name:"denominacionesMonedas",data:e.denominacionesMonedas,docId:"denominacionesMonedas"}].forEach(l=>{const c=Nr(Do(s,l.name));t.set(c,l.data)}),await t.commit(),console.log("✅ All subcollections added successfully!")}catch(t){console.error("❌ Error adding subcollections:",t)}}function nx({usuario:r,fecha:e,updateFields:t}){const[s,o]=J.useState(""),[l,c]=J.useState("");return v.jsxs("div",{children:[v.jsx("h1",{className:"my-3",children:"Seleccione la información solicitada:"}),v.jsxs("div",{className:"d-flex justify-content-center",children:[v.jsxs("h4",{className:"me-3 fw-normal",children:["Usuario: ",r]}),v.jsxs("h4",{className:"fw-normal",children:["Fecha: ",e]})]}),v.jsxs("div",{className:"d-flex flex-column align-items-center my-3",children:[v.jsxs("select",{className:"form-select w-25 mb-4",value:s,onChange:f=>{const p=f.target.value;o(p),t({superMercado:Number.parseInt(f.target.value)})},children:[v.jsx("option",{value:"",disabled:!0,children:"Seleccione un supermercado"}),v.jsx("option",{value:"1",children:"Super El Abuelo 1 (El Burrito)"}),v.jsx("option",{value:"2",children:"Super El Abuelo 2 (La Perla)"})]}),v.jsxs("select",{className:"form-select w-25",value:l,onChange:f=>{c(f.target.value),t({caja:Number.parseInt(f.target.value)})},children:[v.jsx("option",{value:"",disabled:!0,children:"Seleccione el número de caja"}),v.jsx("option",{value:"1",children:"Caja Principal (1)"}),v.jsx("option",{value:"2",children:"Caja Secundaria (2)"})]})]})]})}const rx=()=>new Date().toLocaleDateString("es-CR"),By={cashOpening:{apertura:0,facturasPagadas:0,facturasProcesadas:0,notasCredito:0,reintegros:0,totalBruto:0},totalAmounts:{dolares:0,colones:0,datafonosBAC:0,datafonosBCR:0,total:0,pagoProveedores:0,retirosDeCaja:0,diferencia:0},services:{serviciosBAC:0,depositosBAC:0,totalBAC:0,avanceBAC:0,serviciosTucan:0,depositosTucan:0,totalTucan:0,avanceBCR:0,notas:""},denominaciones:{cincuentaMil:0,veinteMil:0,diezMil:0,cincoMil:0,dosMil:0,mil:0},denominacionesMonedas:{quinientos:0,cien:0,cincuenta:0,veinticinco:0,diez:0,cinco:0},creditosData:[],efectivoTotal:0,monedasTotal:0,creditosTotal:0,fecha:rx(),superMercado:0,usuario:"",caja:0},ix=({user:r})=>{const e=B=>{o(H=>({...H,cashOpening:{...H.cashOpening,...B.cashOpening},totalAmounts:{...H.totalAmounts,...B.totalAmounts},services:{...H.services,...B.services},denominaciones:{...H.denominaciones,...B.denominaciones},denominacionesMonedas:{...H.denominacionesMonedas,...B.denominacionesMonedas},creditosData:B.creditosData||H.creditosData,efectivoTotal:B.efectivoTotal??H.efectivoTotal,monedasTotal:B.monedasTotal??H.monedasTotal,creditosTotal:B.creditosTotal??H.creditosTotal,superMercado:B.superMercado??H.superMercado,caja:B.caja??H.caja}))},t=Co(),[s,o]=J.useState(By),[l,c]=J.useState(!1),[f,p]=J.useState("");J.useEffect(()=>{var B;(B=t.state)!=null&&B.message&&(p(t.state.message),c(!0),setTimeout(()=>{c(!1)},5e3))},[t.state]);const{currentStepIndex:y,step:w,isFirstStep:I,isLastStep:A,back:j,next:q,goTo:U}=GP([v.jsx(nx,{usuario:s.usuario=(r==null?void 0:r.username)||"",fecha:s.fecha,superMercado:s.superMercado,caja:s.caja,updateFields:e}),v.jsx(KP,{...s,updateFields:e}),v.jsx(QP,{...s,updateFields:e}),v.jsx(XP,{...s,updateFields:e}),v.jsx(YP,{cashOpening:s.cashOpening||{},updateFields:B=>e({cashOpening:{...B}})}),v.jsx(ZP,{totalAmounts:s.totalAmounts,creditosTotal:s.creditosTotal,efectivoTotal:s.efectivoTotal,monedasTotal:s.monedasTotal,cashOpening:s.cashOpening,updateFields:B=>e({totalAmounts:{...B}})}),v.jsx(JP,{cashOpening:s.cashOpening,totalAmounts:s.totalAmounts,servicesData:s.services,updateFields:B=>e({services:{...B}})})]);function b(B){if(B.preventDefault(),A)window.confirm("¿Desea finalizar? Una vez enviado no podrá modificar la información.")&&ex("cierresCaja",s).then(()=>{p("✅ Cierre finalizado correctamente."),c(!0),o(By),U(0)}).catch(te=>{console.error("❌ Error al finalizar el cierre:",te),p("❌ Error al finalizar el cierre."),c(!0)});else{if(y==3&&!window.confirm("¿Desea continuar? Una vez terminada esta parte no podrá modificar esta información."))return;q()}}return v.jsxs("div",{children:[v.jsx(Zf,{message:f,show:l,onClose:()=>c(!1),duration:3e3}),v.jsxs("form",{onSubmit:b,children:[w,v.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:".5rem",justifySelf:"center"},children:[!I&&y!==4&&v.jsx("button",{type:"button",onClick:j,className:"btn btn-light shadow",children:"Retroceder"}),v.jsx("button",{type:"submit",className:"btn btn-light shadow",children:A?"Finalizar":"Siguiente"})]})]})]})};async function sx(r){try{const e=Nr(rr,"cierresCaja",r),t=await F_(e);if(!t.exists())return console.log("❌ No document found!"),null;const s=["cashOpening","totalAmounts","services","denominaciones","denominacionesMonedas"],o={};for(const c of s){const f=Do(e,c),p=await Oc(f);o[c]={},p.forEach(y=>{o[c]=y.data()})}return{id:t.id,...t.data(),...o}}catch(e){return console.error("❌ Error getting document:",e),null}}const ox="https://super-abuelo.github.io/admin-helper/assets/loading-DoFyGA-G.gif";async function ax(r,e,t){try{const s=Nr(rr,r,e),o={caja:t.caja,creditosTotal:t.creditosTotal,efectivoTotal:t.efectivoTotal,monedasTotal:t.monedasTotal,fecha:t.fecha,superMercado:t.superMercado,usuario:t.usuario,creditosData:t.creditosData};await TA(s,o),console.log("✅ Parent document updated successfully!"),CE(e,t)}catch(s){throw console.error("❌ Error updating parent document:",s),new Error("❌ Error updating parent document.")}}async function CE(r,e){try{const t=Nr(rr,"cierresCaja",r),s=[{name:"cashOpening",data:e.cashOpening,docId:"cashOpening"},{name:"totalAmounts",data:e.totalAmounts,docId:"totalAmounts"},{name:"services",data:e.services,docId:"services"},{name:"denominaciones",data:e.denominaciones,docId:"denominaciones"},{name:"denominacionesMonedas",data:e.denominacionesMonedas,docId:"denominacionesMonedas"}];for(const o of s){const l=Nr(t,o.name,o.docId);await B_(l,o.data,{merge:!0})}}catch(t){throw console.error("❌ Error updating subcollections:",t),new Error("❌ Error updating subcollections.")}}function lx({closingData:r,cierreId:e}){const[t,s]=J.useState(!1),[o,l]=J.useState(!0),[c,f]=J.useState([]),[p,y]=J.useState(!1),[w,I]=J.useState("");J.useEffect(()=>{(async()=>{l(!0);try{const H=await sx(e);f(H)}catch(H){console.error("Error fetching data:",H)}finally{l(!1)}})()},[e]);const A=B=>{const H=B.apertura??0,te=B.facturasProcesadas??0,ie=B.reintegros??0,fe=B.facturasPagadas??0,_e=B.notasCredito??0;return H+te+ie+fe-_e},j=(B,H,te,ie)=>{const fe=B.colones??0,_e=B.datafonosBAC??0,k=B.datafonosBCR??0,S=B.pagoProveedores??0,P=B.retirosDeCaja??0,x=ie??0,D=te??0,V=H??0;return D+x+fe+_e+k+S+V+P},q=(B,H)=>B-H,U=(B,H,te)=>{f(ie=>{const fe=B?{...ie,[B]:{...ie[B],[H]:te}}:{...ie,[H]:te};if(typeof te=="number"){const{cashOpening:_e,totalAmounts:k,services:S}=fe,P=A(_e),x=j(k,fe.creditosTotal,fe.efectivoTotal,fe.monedasTotal),D=q(x,P),V=S.serviciosBAC+S.depositosBAC,R=S.serviciosTucan+S.depositosTucan;return{...fe,cashOpening:{...fe.cashOpening,totalBruto:P},totalAmounts:{...fe.totalAmounts,total:x,diferencia:D},services:{...fe.services,totalBAC:V,totalTucan:R}}}return fe})},b=async()=>{if(window.confirm("¿Desea guardar los cambios realizados?"))try{await ax("cierresCaja",e,c),await CE(e,c),I("✅ Los cambios se han guardado correctamente."),y(!0),s(!1)}catch(H){console.error("❌ Error al guardar los cambios:",H),I("❌ Ocurrió un error al guardar los cambios."),y(!0)}};return v.jsxs("div",{className:"my-2",children:[v.jsx(Zf,{message:w,show:p,onClose:()=>y(!1),duration:3e3}),o?v.jsxs("div",{children:[v.jsx("div",{className:"d-flex justify-content-center mt-5",children:v.jsx("img",{src:ox,alt:"Loading...",width:"75"})}),v.jsx("h6",{className:"my-3",children:"Cargando datos..."})]}):v.jsxs("div",{children:[v.jsxs("div",{className:"revision-container",children:[v.jsx("h3",{className:"my-3",children:"Revisión de Datos"}),v.jsx("button",{className:"btn btn-success shadow ",onClick:()=>{s(!t)},children:t?"Editando":"Editar"}),v.jsx("button",{className:"btn btn-primary shadow ms-3",onClick:b,children:"Guardar"})]}),v.jsxs("div",{className:"container",children:[v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsxs("div",{className:"mb-3 d-flex justify-content-center",children:[v.jsxs("h5",{className:"mx-3",children:["Fecha: ",r.fecha]}),v.jsxs("h5",{className:"mx-3",children:["Súper: ",r.superMercado]}),v.jsxs("h5",{className:"mx-3",children:["Cajero: ",r.usuario]}),v.jsxs("h5",{className:"mx-3",children:["Caja: ",r.caja]})]}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Apertura:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.cashOpening.apertura,onChange:B=>{t&&U("cashOpening","apertura",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Créditos:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.creditosTotal,onChange:B=>{t&&U(null,"creditosTotal",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Facturas Procesadas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.cashOpening.facturasProcesadas,onChange:B=>{t&&U("cashOpening","facturasProcesadas",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Retiros de Caja:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.retirosDeCaja,onChange:B=>{t&&U("totalAmounts","retirosDeCaja",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Reintegros:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.cashOpening.reintegros,onChange:B=>{t&&U("cashOpening","reintegros",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.total.toFixed(2)})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Facturas Pagadas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.cashOpening.facturasPagadas,onChange:B=>{t&&U("cashOpening","facturasPagadas",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Diferencia:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.diferencia.toFixed(2)})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Notas de Crédito:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.cashOpening.notasCredito,onChange:B=>{t&&U("cashOpening","notasCredito",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Servicios BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.serviciosBAC,onChange:B=>{t&&U("services","serviciosBAC",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total Bruto:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!0,value:c.cashOpening.totalBruto.toFixed(2)})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Depósitos BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.depositosBAC,onChange:B=>{t&&U("services","depositosBAC",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Efectivo:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.efectivoTotal,onChange:B=>{t&&U(null,"efectivoTotal",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.totalBAC.toFixed(2)})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Monedas:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.monedasTotal,onChange:B=>{t&&U(null,"monedasTotal",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Avance BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.avanceBAC,onChange:B=>{t&&U("services","avanceBAC",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Dólares ($/₡):"})}),v.jsxs("div",{className:"col-2 d-flex",children:[v.jsx("input",{type:"number",className:"form-control text-center w-50",readOnly:!t,value:c.totalAmounts.dolares,onChange:B=>{if(t){const H=Number(B.target.value),te=H*490;U("totalAmounts","colones",te),f(ie=>{const fe=H*490;return{...ie,totalAmounts:{...ie.totalAmounts,dolares:H,colones:fe}}})}}}),v.jsx("input",{type:"number",className:"form-control text-center w-50",readOnly:!t,value:c.totalAmounts.colones})]}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Servicios Tucan:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.serviciosTucan,onChange:B=>{t&&U("services","serviciosTucan",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Datáfonos BAC:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.datafonosBAC,onChange:B=>{t&&U("totalAmounts","datafonosBAC",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Depósitos Tucan:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.depositosTucan,onChange:B=>{t&&U("services","depositosTucan",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Datáfonos BCR:"})}),v.jsx("div",{className:"col-2 d-flex",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.datafonosBCR,onChange:B=>{t&&U("totalAmounts","datafonosBCR",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{className:"fw-semibold",children:"Total BCR:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.totalTucan.toFixed(2)})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Pago Proveedores:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.totalAmounts.pagoProveedores,onChange:B=>{t&&U("totalAmounts","pagoProveedores",Number(B.target.value))}})}),v.jsx("div",{className:"col-2 d-flex justify-content-start align-items-center",children:v.jsx("label",{children:"Avance BCR:"})}),v.jsx("div",{className:"col-2",children:v.jsx("input",{type:"number",className:"form-control text-center",readOnly:!t,value:c.services.avanceBCR,onChange:B=>{t&&U("services","avanceBCR",Number(B.target.value))}})})]}),v.jsxs("div",{className:"row my-2 justify-content-center",children:[v.jsx("label",{className:"my-2",children:"Notas:"}),v.jsx("textarea",{className:"form-control my-1 w-50",value:c.services.notas,readOnly:!t,onChange:B=>{t&&U("services","notas",B.target.value)}})]})]})]})]})}const ux=()=>{const[r,e]=J.useState(null),[t,s]=J.useState(!1),[o,l]=J.useState([]),[c,f]=J.useState(!0),[p,y]=J.useState(1),[w]=J.useState(8),[I,A]=J.useState(null);J.useEffect(()=>{j()},[I]);const j=async()=>{try{const x=Do(rr,"cierresCaja");let D;I?D=oc(x,Uf("superMercado","==",I),_y("fecha","desc")):D=oc(x,_y("fecha","desc"));let R=(await Oc(D)).docs.map(He=>({id:He.id,fecha:He.data().fecha,...He.data()}));l(R)}catch(x){console.error("Error fetching cierresCaja:",x)}finally{f(!1)}},q=x=>{e(x),s(!0)},U=()=>{s(!1),e(null)},b=()=>{s(!0)},B=x=>{y(x)},H=p*w,te=H-w,ie=o.slice(te,H),fe=Math.ceil(o.length/w),_e=5;let k=Math.max(1,p-Math.floor(_e/2)),S=k+_e-1;S>fe&&(S=fe,k=Math.max(1,S-_e+1));const P=[];for(let x=k;x<=S;x++)P.push(x);return v.jsxs("div",{children:[v.jsx("h1",{className:"my-3",children:"Cierres de Caja Realizados"}),!t&&v.jsx("div",{className:"d-flex justify-content-center my-3",children:v.jsxs("select",{className:"form-select w-25",value:I??"",onChange:x=>A(Number(x.target.value)),children:[v.jsx("option",{value:"",children:"Seleccionar Súper"}),v.jsx("option",{value:"1",children:"Súper El Abuelo #1"}),v.jsx("option",{value:"2",children:"Súper El Abuelo #2"})]})}),!t&&v.jsx("div",{className:"d-flex justify-content-center",children:v.jsxs("table",{className:"table table-striped table-bordered w-75 shadow",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Fecha"}),v.jsx("th",{children:"Súper"}),v.jsx("th",{children:"Caja"}),v.jsx("th",{children:"Usuario"}),v.jsx("th",{children:"Ver Más"})]})}),v.jsx("tbody",{children:c?v.jsx("tr",{children:v.jsx("td",{colSpan:9,className:"text-center",children:"Cargando datos..."})}):ie.length>0?ie.map(x=>{var D;return v.jsxs("tr",{children:[v.jsx("td",{children:x.fecha}),v.jsx("td",{children:x.superMercado}),v.jsx("td",{children:x.caja??"N/A"}),v.jsx("td",{children:((D=x.usuario)==null?void 0:D.toString())||"N/A"}),v.jsx("td",{children:v.jsx("button",{className:"btn btn-primary",onClick:()=>{q(x),b()},children:"+"})})]},x.id)}):v.jsx("tr",{children:v.jsx("td",{colSpan:9,className:"text-center text-danger",children:"⚠️ No hay datos disponibles."})})})]})}),!t&&v.jsx("div",{className:"d-flex justify-content-center align-items-center",children:v.jsx("nav",{"aria-label":"Page navigation",children:v.jsxs("ul",{className:"pagination",children:[v.jsx("li",{className:`page-item ${p===1?"disabled":""}`,children:v.jsx("button",{className:"page-link",onClick:()=>B(p-1),disabled:p===1,children:"Anterior"})}),k>1&&v.jsxs(v.Fragment,{children:[v.jsx("li",{className:"page-item",children:v.jsx("button",{className:"page-link",onClick:()=>B(1),children:"1"})}),k>2&&v.jsx("li",{className:"page-item disabled",children:v.jsx("span",{className:"page-link",children:"..."})})]}),P.map(x=>v.jsx("li",{className:`page-item ${x===p?"active":""}`,children:v.jsx("button",{className:"page-link",onClick:()=>B(x),children:x})},x)),S<fe&&v.jsxs(v.Fragment,{children:[S<fe-1&&v.jsx("li",{className:"page-item disabled",children:v.jsx("span",{className:"page-link",children:"..."})}),v.jsx("li",{className:"page-item",children:v.jsx("button",{className:"page-link",onClick:()=>B(fe),children:fe})})]}),v.jsx("li",{className:`page-item ${p===fe?"disabled":""}`,children:v.jsx("button",{className:"page-link",onClick:()=>B(p+1),disabled:p===fe,children:"Siguiente"})})]})})}),t&&v.jsxs("div",{className:"reviewContainer",children:[v.jsx(lx,{closingData:r,cierreId:r.id}),v.jsx("div",{className:"my-3",children:v.jsx("button",{type:"button",className:"btn btn-secondary ms-3 mb-5",onClick:U,children:"Volver"})})]})]})},cx=()=>v.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center vh-100",children:[v.jsx("h1",{className:"display-1 text-danger",children:"404"}),v.jsx("h2",{className:"mb-4",children:"Página no encontrada"}),v.jsx("p",{className:"mb-4",children:"Lo sentimos, la página que busca no existe."}),v.jsx(nv,{to:"/",className:"btn btn-primary",children:"Volver al Inicio"})]}),hx=({user:r,setUser:e})=>v.jsxs(R0,{children:[v.jsx(xa,{path:"/",element:v.jsx(HP,{user:r,setUser:e})}),v.jsx(xa,{path:"/cierrecaja",element:v.jsx(ix,{user:r})}),v.jsx(xa,{path:"/cierresrealizados",element:v.jsx(ux,{})}),v.jsx(xa,{path:"*",element:v.jsx(cx,{})})]}),dx=({user:r,setUser:e})=>{const t=of(),s=()=>{e(null),t("/")};return v.jsx("div",{className:"navbar-container",children:v.jsx("nav",{className:"navbar",children:v.jsxs("div",{className:"container-fluid",children:[v.jsx("img",{src:ep,alt:"",height:70}),v.jsxs("div",{className:"tabs",children:[(r==null?void 0:r.role)==="1"&&v.jsx(v.Fragment,{children:v.jsx(xu,{to:"/cierrecaja",children:"Cierre de Caja"})}),(r==null?void 0:r.role)==="0"&&v.jsxs(v.Fragment,{children:[v.jsx(xu,{to:"/cierrecaja",children:"Cierre de Caja"}),v.jsx(xu,{to:"/cierresrealizados",children:"Cierres Realizados"})]}),v.jsx(xu,{to:"/",onClick:o=>{o.preventDefault(),s()},className:"text-danger",children:"Cerrar Sesión"})]})]})})})},fx=({children:r,user:e,setUser:t})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(dx,{user:e,setUser:t}),v.jsx("div",{className:"main-body",children:r})]});function px(){const[r,e]=J.useState(null);return v.jsx(j0,{children:v.jsx(fx,{user:r,setUser:e,children:v.jsx(hx,{user:r,setUser:e})})})}Mw.createRoot(document.getElementById("root")).render(v.jsx($y.StrictMode,{children:v.jsx(px,{})}));
